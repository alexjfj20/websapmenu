"use strict";(self["webpackChunkwebsap"]=self["webpackChunkwebsap"]||[]).push([[770],{646:function(e,a,o){o.r(a),o.d(a,{default:function(){return _e}});var s=o(6768),t=o(4232);const n={class:"platos-view"},r={class:"actions-container"},l={key:0,class:"form-container"},i={class:"platos-list"},c={key:0,class:"loading"},d={key:1,class:"empty-state"},u={key:2,class:"platos-grid"},m={class:"plato-content"},p={class:"price"},g={class:"category"},v={class:"description"},b={class:"plato-actions"},f=["onClick"],k={key:1,class:"error-container"};function y(e,a,o,y,E,h){const L=(0,s.g2)("IndexedDBBackup"),I=(0,s.g2)("SyncSettings"),S=(0,s.g2)("PlatoForm"),C=(0,s.g2)("DeletePlatoButton"),D=(0,s.g2)("DirectDeleteButton");return(0,s.uX)(),(0,s.CE)("div",n,[a[2]||(a[2]=(0,s.Lk)("h2",null,"Gestión de Platos",-1)),(0,s.Lk)("div",r,[(0,s.Lk)("button",{onClick:a[0]||(a[0]=e=>y.showForm=!y.showForm),class:"btn toggle-form-btn"},(0,t.v_)(y.showForm?"Ocultar Formulario":"Crear Nuevo Plato"),1),(0,s.bF)(L,{class:"backup-component"})]),(0,s.bF)(I,{class:"sync-settings-component"}),y.showForm?((0,s.uX)(),(0,s.CE)("div",l,[(0,s.bF)(S,{"edit-plato":y.platoToEdit,onPlatoSaved:y.onPlatoSaved,onPlatoUpdated:y.onPlatoUpdated,onCancel:y.onFormCancel},null,8,["edit-plato","onPlatoSaved","onPlatoUpdated","onCancel"])])):(0,s.Q3)("",!0),(0,s.Lk)("div",i,[(0,s.Lk)("h3",null,"Lista de Platos ("+(0,t.v_)(y.platos.length)+")",1),y.isLoading?((0,s.uX)(),(0,s.CE)("div",c," Cargando platos... ")):0===y.platos.length?((0,s.uX)(),(0,s.CE)("div",d," No hay platos disponibles. ¡Crea el primero! ")):((0,s.uX)(),(0,s.CE)("div",u,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(y.platos,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"plato-card"},[(0,s.Lk)("div",{class:"plato-image",style:(0,t.Tr)({backgroundImage:`url(${e.image_url||"/placeholder-food.jpg"})`})},null,4),(0,s.Lk)("div",m,[(0,s.Lk)("h4",null,(0,t.v_)(e.name),1),(0,s.Lk)("p",p,"$"+(0,t.v_)(e.price.toFixed(2)),1),(0,s.Lk)("p",g,(0,t.v_)(e.category||"Sin categoría"),1),(0,s.Lk)("p",v,(0,t.v_)(e.description||"Sin descripción"),1),(0,s.Lk)("div",{class:(0,t.C4)(["availability",{available:e.is_available}])},(0,t.v_)(e.is_available?"Disponible":"No disponible"),3)]),(0,s.Lk)("div",b,[(0,s.Lk)("button",{onClick:a=>y.editPlato(e),class:"btn btn-edit"},"Editar",8,f),(0,s.bF)(C,{"plato-id":e.id,"plato-name":e.name,onDeleted:y.onPlatoDeleted,onError:y.onDeleteError},null,8,["plato-id","plato-name","onDeleted","onError"]),(0,s.bF)(D,{"plato-id":e.id,"plato-name":e.name,onDeleted:y.onPlatoDeleted,onError:y.onDeleteError},null,8,["plato-id","plato-name","onDeleted","onError"])])])))),128))]))]),y.error?((0,s.uX)(),(0,s.CE)("div",k,[(0,s.Lk)("p",null,(0,t.v_)(y.error),1),(0,s.Lk)("button",{onClick:a[1]||(a[1]=(...e)=>y.loadPlatos&&y.loadPlatos(...e)),class:"btn retry-btn"},"Reintentar")])):(0,s.Q3)("",!0)])}o(4114),o(8111),o(2489);var E=o(144),h=o(5130);const L={class:"plato-form"},I={class:"form-group"},S={key:0,class:"error-text"},C={class:"form-group"},D={class:"form-group"},x={key:0,class:"error-text"},P={class:"form-group"},_={class:"form-group"},w={class:"checkbox-label"},z={class:"form-group"},B={class:"actions"},$=["disabled"],R=["disabled"],F={key:0,class:"success-message"},K={key:1,class:"error-message"};function N(e,a,o,n,r,l){return(0,s.uX)(),(0,s.CE)("div",L,[(0,s.Lk)("h3",null,(0,t.v_)(n.isEditing?"Editar Plato":"Crear Nuevo Plato"),1),(0,s.Lk)("form",{onSubmit:a[7]||(a[7]=(0,h.D$)(((...e)=>n.handleSubmit&&n.handleSubmit(...e)),["prevent"])),class:"form"},[(0,s.Lk)("div",I,[a[8]||(a[8]=(0,s.Lk)("label",{for:"name"},"Nombre del Plato *",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":a[0]||(a[0]=e=>n.form.name=e),required:"",class:"form-control"},null,512),[[h.Jo,n.form.name]]),n.errors.name?((0,s.uX)(),(0,s.CE)("div",S,(0,t.v_)(n.errors.name),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",C,[a[9]||(a[9]=(0,s.Lk)("label",{for:"description"},"Descripción",-1)),(0,s.bo)((0,s.Lk)("textarea",{id:"description","onUpdate:modelValue":a[1]||(a[1]=e=>n.form.description=e),class:"form-control"},null,512),[[h.Jo,n.form.description]])]),(0,s.Lk)("div",D,[a[10]||(a[10]=(0,s.Lk)("label",{for:"price"},"Precio *",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number",id:"price","onUpdate:modelValue":a[2]||(a[2]=e=>n.form.price=e),min:"0",step:"0.01",required:"",class:"form-control"},null,512),[[h.Jo,n.form.price,void 0,{number:!0}]]),n.errors.price?((0,s.uX)(),(0,s.CE)("div",x,(0,t.v_)(n.errors.price),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",P,[a[12]||(a[12]=(0,s.Lk)("label",{for:"category"},"Categoría",-1)),(0,s.bo)((0,s.Lk)("select",{id:"category","onUpdate:modelValue":a[3]||(a[3]=e=>n.form.category=e),class:"form-control"},a[11]||(a[11]=[(0,s.Fv)('<option value="" data-v-19264ebf>Seleccionar categoría</option><option value="Entradas" data-v-19264ebf>Entradas</option><option value="Platos Principales" data-v-19264ebf>Platos Principales</option><option value="Postres" data-v-19264ebf>Postres</option><option value="Bebidas" data-v-19264ebf>Bebidas</option>',5)]),512),[[h.u1,n.form.category]])]),(0,s.Lk)("div",_,[(0,s.Lk)("label",w,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=e=>n.form.is_available=e)},null,512),[[h.lH,n.form.is_available]]),a[13]||(a[13]=(0,s.Lk)("span",null,"Disponible",-1))])]),(0,s.Lk)("div",z,[a[14]||(a[14]=(0,s.Lk)("label",{for:"image_url"},"URL de Imagen",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"image_url","onUpdate:modelValue":a[5]||(a[5]=e=>n.form.image_url=e),class:"form-control",placeholder:"http://ejemplo.com/imagen.jpg"},null,512),[[h.Jo,n.form.image_url]])]),(0,s.Lk)("div",B,[(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:n.isSubmitting},(0,t.v_)(n.isSubmitting?"Guardando...":n.isEditing?"Actualizar":"Guardar"),9,$),(0,s.Lk)("button",{type:"button",onClick:a[6]||(a[6]=(...e)=>n.resetForm&&n.resetForm(...e)),class:"btn btn-secondary",disabled:n.isSubmitting}," Cancelar ",8,R)])],32),n.success?((0,s.uX)(),(0,s.CE)("div",F,(0,t.v_)(n.success),1)):(0,s.Q3)("",!0),n.errorMessage?((0,s.uX)(),(0,s.CE)("div",K,(0,t.v_)(n.errorMessage),1)):(0,s.Q3)("",!0)])}var X=o(4216),U={name:"PlatoForm",props:{editPlato:{type:Object,default:null}},emits:["plato-saved","plato-updated","cancel"],setup(e,{emit:a}){const o=(0,E.Kh)({name:"",description:"",price:0,category:"",is_available:!0,image_url:""}),t=(0,E.Kh)({name:"",price:""}),n=(0,E.KR)(!1),r=(0,E.KR)(""),l=(0,E.KR)(""),i=(0,s.EW)((()=>!!e.editPlato));(0,s.sV)((()=>{e.editPlato&&Object.assign(o,e.editPlato)}));const c=()=>{let e=!0;return o.name.trim()?t.name="":(t.name="El nombre del plato es obligatorio",e=!1),null===o.price||void 0===o.price||isNaN(o.price)?(t.price="El precio debe ser un número válido",e=!1):o.price<0?(t.price="El precio no puede ser negativo",e=!1):t.price="",e},d=async()=>{if(console.log("Enviando formulario",o),l.value="",r.value="",c()){n.value=!0;try{if(i.value)a("plato-updated",o),l.value="Plato actualizado correctamente";else{console.log("Llamando a createPlato con:",o);const e=await(0,X.VI)({...o,price:Number(o.price)});console.log("Plato guardado exitosamente:",e),l.value="Plato guardado correctamente",a("plato-saved",e),u()}}catch(e){console.error("Error al guardar el plato:",e),r.value=`Error al guardar el plato: ${e.message||"Error desconocido"}`}finally{n.value=!1}}else console.log("Formulario inválido",t)},u=()=>{i.value&&e.editPlato?Object.assign(o,e.editPlato):(o.name="",o.description="",o.price=0,o.category="",o.is_available=!0,o.image_url=""),t.name="",t.price="",r.value="",l.value="",a("cancel")};return{form:o,errors:t,isSubmitting:n,errorMessage:r,success:l,isEditing:i,handleSubmit:d,resetForm:u}}},Q=o(1241);const V=(0,Q.A)(U,[["render",N],["__scopeId","data-v-19264ebf"]]);var j=V;const T=["disabled"];function M(e,a,o,n,r,l){return(0,s.uX)(),(0,s.CE)("button",{onClick:a[0]||(a[0]=(...e)=>n.confirmDelete&&n.confirmDelete(...e)),class:"delete-button",disabled:n.isDeleting},(0,t.v_)(n.isDeleting?"Eliminando...":"Eliminar"),9,T)}var A={name:"DeletePlatoButton",props:{platoId:{type:String,required:!0},platoName:{type:String,default:"este plato"}},emits:["deleted","error"],setup(e,{emit:a}){const o=(0,E.KR)(!1),s=async()=>{confirm(`¿Estás seguro de que deseas eliminar ${e.platoName}?`)&&await t()},t=async()=>{o.value=!0;try{console.log(`Iniciando eliminación directa del plato ID: ${e.platoId}`);const o=await fetch("http://localhost:3000/api/sync/platos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.platoId,operation:"delete"})});if(console.log(`Respuesta del servidor: ${o.status}`),o.ok){const s=await o.json();console.log("Respuesta del servidor:",s),a("deleted",e.platoId),alert(`El plato "${e.platoName}" ha sido eliminado correctamente.`)}else{console.error(`Error al eliminar plato: ${o.status}`);const s=await o.text();console.error("Detalles del error:",s),a("error",{id:e.platoId,status:o.status,message:s}),alert(`Error al eliminar el plato. Por favor, utiliza el script directo:\n\nnode delete-plato.js ${e.platoId}`)}}catch(s){console.error("Error al eliminar plato:",s),a("error",{id:e.platoId,message:s.message}),alert(`Error al eliminar el plato: ${s.message}\n\nPor favor, utiliza el script directo:\n\nnode delete-plato.js ${e.platoId}`)}finally{o.value=!1}};return{isDeleting:o,confirmDelete:s}}};const O=(0,Q.A)(A,[["render",M],["__scopeId","data-v-988cd296"]]);var J=O;const q={class:"direct-delete-container"},W=["disabled"],G={key:0,class:"confirmation-dialog"},H={class:"confirmation-content"},Y={class:"confirmation-actions"},Z=["disabled"];function ee(e,a,o,n,r,l){return(0,s.uX)(),(0,s.CE)("div",q,[(0,s.Lk)("button",{onClick:a[0]||(a[0]=e=>n.showConfirmation=!0),class:"direct-delete-button",disabled:n.isDeleting},(0,t.v_)(n.isDeleting?"Eliminando...":"Eliminar Directamente"),9,W),n.showConfirmation?((0,s.uX)(),(0,s.CE)("div",G,[(0,s.Lk)("div",H,[a[5]||(a[5]=(0,s.Lk)("h3",null,"Confirmar Eliminación",-1)),(0,s.Lk)("p",null,[a[3]||(a[3]=(0,s.eW)("¿Estás seguro de que deseas eliminar el plato ")),(0,s.Lk)("strong",null,(0,t.v_)(o.platoName),1),a[4]||(a[4]=(0,s.eW)("?"))]),a[6]||(a[6]=(0,s.Lk)("p",null,"Esta acción eliminará el plato directamente de la base de datos MySQL y no se puede deshacer.",-1)),(0,s.Lk)("div",Y,[(0,s.Lk)("button",{onClick:a[1]||(a[1]=e=>n.showConfirmation=!1),class:"cancel-button"},"Cancelar"),(0,s.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>n.executeDelete&&n.executeDelete(...e)),class:"confirm-button",disabled:n.isDeleting},(0,t.v_)(n.isDeleting?"Eliminando...":"Confirmar Eliminación"),9,Z)])])])):(0,s.Q3)("",!0)])}var ae={name:"DirectDeleteButton",props:{platoId:{type:String,required:!0},platoName:{type:String,default:"este plato"}},emits:["deleted","error"],setup(e,{emit:a}){const o=(0,E.KR)(!1),s=(0,E.KR)(!1),t=(0,E.KR)(""),n=async()=>{o.value=!0,t.value="Iniciando eliminación...";try{const o=await fetch(`http://localhost:3000/direct-delete?id=${encodeURIComponent(e.platoId)}`,{method:"GET",headers:{"Cache-Control":"no-cache"}});if(console.log(`Respuesta del servidor: Status ${o.status}`),o.ok){const r=await o.json();if(console.log("Respuesta completa:",r),r.success){t.value="Plato eliminado con éxito",a("deleted",e.platoId),s.value=!1;try{const a=await window.indexedDB.open("websap",3);a.onsuccess=function(a){const o=a.target.result,s=o.transaction(["platos"],"readwrite"),t=s.objectStore("platos");t.delete(e.platoId),s.oncomplete=function(){console.log(`Plato ${e.platoId} también eliminado de IndexedDB`)}}}catch(n){console.warn("No se pudo eliminar de IndexedDB, pero se eliminó de MySQL:",n)}alert(`El plato "${e.platoName}" ha sido eliminado correctamente de la base de datos MySQL.`)}else t.value=`Error: ${r.message}`,a("error",{id:e.platoId,message:r.message}),alert(`Error al eliminar el plato: ${r.message}`)}else{const s=await o.text();t.value=`Error: ${o.status} - ${s}`,a("error",{id:e.platoId,status:o.status,message:s}),alert(`Error al eliminar el plato. Status: ${o.status}\n${s}`)}}catch(r){t.value=`Error: ${r.message}`,a("error",{id:e.platoId,message:r.message}),alert(`Error al eliminar el plato: ${r.message}`)}finally{o.value=!1}};return{isDeleting:o,showConfirmation:s,deleteStatus:t,executeDelete:n}}};const oe=(0,Q.A)(ae,[["render",ee],["__scopeId","data-v-39d68c72"]]);var se=oe;const te={class:"indexeddb-backup"},ne=["disabled"];function re(e,a,o,n,r,l){return(0,s.uX)(),(0,s.CE)("div",te,[(0,s.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>n.backupIndexedDB&&n.backupIndexedDB(...e)),class:"backup-button",disabled:n.isBackingUp},(0,t.v_)(n.isBackingUp?"Procesando...":"Sincronizar imágenes originales"),9,ne),n.message?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,t.C4)(["backup-message",n.messageType])},(0,t.v_)(n.message),3)):(0,s.Q3)("",!0)])}var le=o(133),ie=o(9098);async function ce(){try{console.log("Extrayendo imágenes de IndexedDB...");const o=await(0,X.Dh)();if(!o||0===o.length)return console.warn("No hay platos en IndexedDB para extraer imágenes"),{success:!1,message:"No hay platos en IndexedDB para extraer imágenes"};console.log(`Se encontraron ${o.length} platos en IndexedDB`);const s=o.filter((e=>e.image&&e.image.length>0));if(console.log(`${s.length} platos tienen imágenes en IndexedDB`),0===s.length)return console.warn("Ninguno de los platos tiene imágenes en IndexedDB"),{success:!1,message:"Ninguno de los platos tiene imágenes en IndexedDB"};console.log("Optimizando imágenes antes de enviarlas...");const t=[];for(const a of s)try{const e={...a};e.image=await(0,ie.z)(a.image),t.push(e)}catch(e){console.warn(`Error al optimizar imagen del plato ${a.name}:`,e),t.push(a)}console.log(`${t.length} platos con imágenes optimizadas listos para enviar`);const n=await le["default"].post("/indexeddb/backup",{platos:t});if(!n||!n.success)return console.error("Error al enviar imágenes al servidor:",n?.message||"Error desconocido"),{success:!1,message:"Error al enviar imágenes al servidor: "+(n?.message||"Error desconocido")};console.log("Imágenes extraídas y enviadas al servidor con éxito");try{const e=await le["default"].post("/indexeddb/sync-images");return e&&e.success?(console.log("Imágenes sincronizadas con MySQL con éxito"),{success:!0,message:`Imágenes extraídas y sincronizadas con éxito. ${e.data.actualizados} platos actualizados.`}):(console.error("Error al sincronizar imágenes con MySQL:",e?.message||"Error desconocido"),{success:!1,message:"Error al sincronizar imágenes con MySQL: "+(e?.message||"Error desconocido")})}catch(a){return console.error("Error al sincronizar imágenes con MySQL:",a),{success:!1,message:"Error al sincronizar imágenes con MySQL: "+a.message}}}catch(e){return console.error("Error al extraer imágenes de IndexedDB:",e),{success:!1,message:"Error al extraer imágenes de IndexedDB: "+e.message}}}var de={name:"IndexedDBBackup",setup(){const e=(0,E.KR)(!1),a=(0,E.KR)(""),o=(0,E.KR)("info"),s=async()=>{try{e.value=!0,a.value="Recuperando y optimizando imágenes originales...",o.value="info";const s=await ce();s.success?(a.value=s.message,o.value="success"):(a.value=s.message,o.value="error")}catch(s){console.error("Error al recuperar imágenes originales:",s),a.value="Error al recuperar imágenes originales: "+s.message,o.value="error"}finally{e.value=!1,setTimeout((()=>{a.value=""}),1e4)}};return{isBackingUp:e,message:a,messageType:o,backupIndexedDB:s}}};const ue=(0,Q.A)(de,[["render",re],["__scopeId","data-v-4e991565"]]);var me=ue;const pe={class:"sync-settings"},ge={class:"settings-form"},ve={class:"form-group"},be={for:"autoSyncImages"},fe={class:"form-group"},ke={for:"compressImages"},ye={class:"form-group"},Ee={class:"sync-actions"},he=["disabled"];function Le(e,a,o,n,r,l){return(0,s.uX)(),(0,s.CE)("div",pe,[a[13]||(a[13]=(0,s.Lk)("h3",null,"Configuración de Sincronización",-1)),(0,s.Lk)("div",ge,[(0,s.Lk)("div",ve,[(0,s.Lk)("label",be,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"autoSyncImages","onUpdate:modelValue":a[0]||(a[0]=e=>n.settings.autoSyncImages=e),onChange:a[1]||(a[1]=(...e)=>n.saveSettings&&n.saveSettings(...e))},null,544),[[h.lH,n.settings.autoSyncImages]]),a[7]||(a[7]=(0,s.eW)(" Sincronizar imágenes automáticamente "))]),a[8]||(a[8]=(0,s.Lk)("div",{class:"help-text"}," Cuando está activado, las imágenes se sincronizarán automáticamente con el servidor ",-1))]),(0,s.Lk)("div",fe,[(0,s.Lk)("label",ke,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"compressImages","onUpdate:modelValue":a[2]||(a[2]=e=>n.settings.compressImages=e),onChange:a[3]||(a[3]=(...e)=>n.saveSettings&&n.saveSettings(...e))},null,544),[[h.lH,n.settings.compressImages]]),a[9]||(a[9]=(0,s.eW)(" Comprimir imágenes antes de sincronizar "))]),a[10]||(a[10]=(0,s.Lk)("div",{class:"help-text"}," Reduce el tamaño de las imágenes para mejorar la velocidad de sincronización ",-1))]),(0,s.Lk)("div",ye,[a[11]||(a[11]=(0,s.Lk)("label",{for:"maxImageSize"},"Tamaño máximo de imagen (KB):",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number",id:"maxImageSize","onUpdate:modelValue":a[4]||(a[4]=e=>n.settings.maxImageSize=e),min:"100",max:"2000",onChange:a[5]||(a[5]=(...e)=>n.saveSettings&&n.saveSettings(...e))},null,544),[[h.Jo,n.settings.maxImageSize,void 0,{number:!0}]]),a[12]||(a[12]=(0,s.Lk)("div",{class:"help-text"}," Las imágenes más grandes que este valor serán comprimidas automáticamente ",-1))])]),(0,s.Lk)("div",Ee,[(0,s.Lk)("button",{onClick:a[6]||(a[6]=(...e)=>n.syncAllImages&&n.syncAllImages(...e)),class:"sync-button",disabled:n.isSyncing},(0,t.v_)(n.isSyncing?"Sincronizando...":"Sincronizar todas las imágenes ahora"),9,he),n.message?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,t.C4)(["sync-message",n.messageType])},(0,t.v_)(n.message),3)):(0,s.Q3)("",!0)])])}const Ie="websap_sync_settings";var Se={name:"SyncSettings",setup(){const e=(0,E.KR)(!1),a=(0,E.KR)(""),o=(0,E.KR)("info"),t={autoSyncImages:!0,compressImages:!0,maxImageSize:500},n=(0,E.Kh)(r());function r(){try{const e=localStorage.getItem(Ie);if(e)return JSON.parse(e)}catch(e){console.error("Error al cargar configuración de sincronización:",e)}return{...t}}function l(){try{localStorage.setItem(Ie,JSON.stringify(n)),c("Configuración guardada","success")}catch(e){console.error("Error al guardar configuración de sincronización:",e),c("Error al guardar configuración","error")}}async function i(){try{e.value=!0,c("Sincronizando imágenes...","info");const a=await ce();a.success?c(a.message,"success"):c(a.message,"error")}catch(a){console.error("Error al sincronizar imágenes:",a),c("Error al sincronizar imágenes: "+a.message,"error")}finally{e.value=!1}}function c(e,s="info"){a.value=e,o.value=s,setTimeout((()=>{a.value=""}),5e3)}return(0,s.sV)((()=>{localStorage.getItem(Ie)||l()})),{settings:n,isSyncing:e,message:a,messageType:o,saveSettings:l,syncAllImages:i}}};const Ce=(0,Q.A)(Se,[["render",Le],["__scopeId","data-v-8a790240"]]);var De=Ce,xe={name:"PlatosView",components:{PlatoForm:j,DeletePlatoButton:J,DirectDeleteButton:se,IndexedDBBackup:me,SyncSettings:De},setup(){const e=(0,E.KR)([]),a=(0,E.KR)(!0),o=(0,E.KR)(""),t=(0,E.KR)(!1),n=(0,E.KR)(null);(0,s.sV)((()=>{r()}));const r=async()=>{a.value=!0,o.value="";try{const a=await(0,X.Dh)();e.value=a,console.log("Platos cargados:",e.value)}catch(s){console.error("Error al cargar platos:",s),o.value=`Error al cargar platos: ${s.message||"Error desconocido"}`}finally{a.value=!1}},l=a=>{console.log("Plato guardado en la vista:",a),e.value.push(a),t.value=!1},i=a=>{console.log("Plato actualizado en la vista:",a);const o=e.value.findIndex((e=>e.id===a.id));-1!==o&&(e.value[o]={...a}),n.value=null,t.value=!1},c=()=>{n.value=null,t.value=!1},d=e=>{n.value={...e},t.value=!0},u=a=>{e.value=e.value.filter((e=>e.id!==a))},m=e=>{console.error("Error al eliminar plato:",e),o.value=`Error al eliminar plato: ${e.message||"Error desconocido"}`};return{platos:e,isLoading:a,error:o,showForm:t,platoToEdit:n,loadPlatos:r,onPlatoSaved:l,onPlatoUpdated:i,onFormCancel:c,editPlato:d,onPlatoDeleted:u,onDeleteError:m}}};const Pe=(0,Q.A)(xe,[["render",y],["__scopeId","data-v-075cd5d8"]]);var _e=Pe}}]);
//# sourceMappingURL=platos.23cb5a5b.js.map