{"version":3,"file":"js/employee.2825684d.js","mappings":"kLACOA,MAAM,iB,GACJA,MAAM,kB,GAOJA,MAAM,OAAOC,MAAA,sC,GACXD,MAAM,a,GAVnBE,IAAA,EAiBmCF,MAAM,Q,wGAhBvCG,EAAAA,EAAAA,IAyBM,MAzBNC,EAyBM,EAxBJC,EAAAA,EAAAA,IAuBM,MAvBNC,EAuBM,cAtBJD,EAAAA,EAAAA,IAGM,OAHDL,MAAM,oBAAkB,EAC3BK,EAAAA,EAAAA,IAAiD,MAA7CL,MAAM,eAAc,yBACxBK,EAAAA,EAAAA,IAAqF,MAAjFL,MAAM,oBAAmB,yDAAmD,KAIlFK,EAAAA,EAAAA,IAYM,MAZNE,EAYM,EAXJF,EAAAA,EAAAA,IAUM,MAVNG,EAUM,cATJH,EAAAA,EAAAA,IAA4B,UAAxB,uBAAmB,iBACvBA,EAAAA,EAAAA,IAAI,qBACJA,EAAAA,EAAAA,IAES,UAFDL,MAAM,kBAAmBS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAAC,gBAAAD,EAAAC,kBAAAF,KAAgB,kBAI7CC,EAAAE,eAAY,WAAvBX,EAAAA,EAAAA,IAEM,MAFNY,EAEM,EADJC,EAAAA,EAAAA,IAAyDC,EAAA,CAAzCC,UAAU,EAAMC,IAAI,oB,cAlBhDC,EAAAA,EAAAA,IAAA,YAwBMJ,EAAAA,EAAAA,IAA0CK,EAAA,CAA1BC,kBAAkB,O,iFAcxC,GACEC,KAAM,eACNC,WAAY,CACVC,cAAa,aACbC,cAAaA,EAAAA,GAEfC,KAAAA,GACE,MAAMC,GAASC,EAAAA,EAAAA,MACTC,GAAOX,EAAAA,EAAAA,IAAI,MACXL,GAAeK,EAAAA,EAAAA,KAAI,GAGnBY,GAAmBZ,EAAAA,EAAAA,IAAI,MAIvBa,EAAqBA,KACrBlB,EAAamB,OAASF,EAAiBE,OACzCF,EAAiBE,MAAMC,qBACzB,GAGFC,EAAAA,EAAAA,KAAU,KAER,MAAMC,GAAcC,EAAAA,EAAAA,MACpB,IAAKD,EAGH,OAFAE,EAAAA,EAAAA,IAAM,uDACNV,EAAOW,KAAK,UAGdT,EAAKG,MAAQG,EAGbI,EAAAA,EAASC,GAAG,gBAAiBT,EAAmB,KAGlDU,EAAAA,EAAAA,KAAY,KAEVF,EAAAA,EAASG,IAAI,gBAAiBX,EAAmB,IAGnD,MAAMY,EAAeA,MACnBC,EAAAA,EAAAA,MACAjB,EAAOW,KAAK,SAAS,EAGjB1B,EAAiBA,KACrBC,EAAamB,OAASnB,EAAamB,KAAK,EAG1C,MAAO,CACLH,OACAc,eACA9B,eACAD,iBACAkB,mBAEJ,G,UCxFF,MAAMe,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://websap/./src/views/EmployeeView.vue","webpack://websap/./src/views/EmployeeView.vue?9ff5"],"sourcesContent":["<template>\r\n  <div class=\"employee-view\">\r\n    <div class=\"container mt-4\">\r\n      <div class=\"text-center mb-4\">\r\n        <h1 class=\"text-center\">Bienvenido, Empleado</h1>\r\n        <h2 class=\"lead text-center\">Desde aquí puedes ver productos y realizar pedidos.</h2>\r\n      </div>\r\n      \r\n      <!-- Gestión de Reservas con estructura de card -->\r\n      <div class=\"card\" style=\"max-width: 1750px; margin: auto;\" >\r\n        <div class=\"card-body\">\r\n          <h3>Gestión de Reservas</h3>\r\n          <hr>\r\n          <button class=\"btn btn-success\" @click=\"toggleReservas\">\r\n            Ver Reservas\r\n          </button>\r\n          \r\n          <div v-if=\"showReservas\" class=\"mt-3\">\r\n            <AdminReservas :readOnly=\"true\" ref=\"adminReservasRef\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- MenuComponent sin cambios -->\r\n      <MenuComponent :restrictedAccess=\"true\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, onUnmounted } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { getCurrentUser, logout, hasRole } from '../services/authService';\r\nimport { alert } from '../services/dialogService';\r\nimport MenuComponent from '../components/MenuComponent.vue';\r\nimport AdminReservas from '@/components/admin/AdminReservas.vue';\r\nimport eventBus from '@/utils/eventBus';\r\n\r\nexport default {\r\n  name: 'EmployeeView',\r\n  components: {\r\n    MenuComponent,\r\n    AdminReservas\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    const user = ref(null);\r\n    const showReservas = ref(false);\r\n    \r\n    // Referencia al componente AdminReservas\r\n    const adminReservasRef = ref(null);\r\n    \r\n    // Definir handleNuevaReserva FUERA de onMounted para poder \r\n    // acceder a ella en onUnmounted\r\n    const handleNuevaReserva = () => {\r\n      if (showReservas.value && adminReservasRef.value) {\r\n        adminReservasRef.value.refreshReservations();\r\n      }\r\n    };\r\n    \r\n    onMounted(() => {\r\n      // Verificar si el usuario está autenticado\r\n      const currentUser = getCurrentUser();\r\n      if (!currentUser) {\r\n        alert('Debe iniciar sesión para acceder a esta página');\r\n        router.push('/login');\r\n        return;\r\n      }\r\n      user.value = currentUser;\r\n      \r\n      // Registrar el evento\r\n      eventBus.on('nueva-reserva', handleNuevaReserva);\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      // Ahora podemos acceder a handleNuevaReserva correctamente\r\n      eventBus.off('nueva-reserva', handleNuevaReserva);\r\n    });\r\n\r\n    const handleLogout = () => {\r\n      logout();\r\n      router.push('/login');\r\n    };\r\n\r\n    const toggleReservas = () => {\r\n      showReservas.value = !showReservas.value;\r\n    };\r\n\r\n    return {\r\n      user,\r\n      handleLogout,\r\n      showReservas,\r\n      toggleReservas,\r\n      adminReservasRef\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.employee-view {\r\n  min-height: 100vh;\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n/* Estilos para títulos centrados */\r\nh1, h2.lead {\r\n  text-align: center;\r\n  width: 100%;\r\n}\r\n\r\nh1 {\r\n  color: #333;\r\n  margin-bottom: 15px;\r\n}\r\n\r\nh2.lead {\r\n  font-weight: 300;\r\n  color: #555;\r\n}\r\n\r\n/* Estilos para las secciones */\r\nh3 {\r\n  font-size: 1.25rem;\r\n  margin-bottom: 0;\r\n  color: #333;\r\n}\r\n\r\nhr {\r\n  margin-top: 10px;\r\n  margin-bottom: 15px;\r\n  border-color: #dee2e6;\r\n}\r\n\r\n/* Estilo para botón verde con esquinas más redondeadas y tamaño consistente */\r\n.btn-success {\r\n  background-color: #28a745;\r\n  border-color: #28a745;\r\n  color: white;\r\n  border-radius: 0.3rem;  /* Hacer las esquinas un poco más redondeadas */\r\n  padding: 0.375rem 0.75rem;  /* Padding estándar de Bootstrap */\r\n  font-size: 1rem;  /* Tamaño de fuente estándar */\r\n  min-width: 140px;  /* Ancho mínimo para consistencia con otros botones */\r\n  text-align: center;\r\n}\r\n\r\n.btn-success:hover {\r\n  background-color: #218838;\r\n  border-color: #1e7e34;\r\n}\r\n\r\n/* Estilo para botones grises */\r\n.btn-secondary {\r\n  background-color: #e2e6ea;\r\n  border-color: #dae0e5;\r\n  color: #333;\r\n}\r\n\r\n/* Estilos para las cards */\r\n.card {\r\n  margin-top: 1rem;\r\n  margin-bottom: 1rem;\r\n  border: none;\r\n  border-radius: 0.25rem;\r\n  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);\r\n}\r\n\r\n.card-body {\r\n  padding: 1.25rem;\r\n}\r\n\r\n/* garantizar una buena experiencia en dispositivos móviles */\r\n@media (max-width: 480px) {\r\n  .payment-options {\r\n    flex-direction: column;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .payment-option {\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n\r\n","import { render } from \"./EmployeeView.vue?vue&type=template&id=f2d2da0c&scoped=true\"\nimport script from \"./EmployeeView.vue?vue&type=script&lang=js\"\nexport * from \"./EmployeeView.vue?vue&type=script&lang=js\"\n\nimport \"./EmployeeView.vue?vue&type=style&index=0&id=f2d2da0c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f2d2da0c\"]])\n\nexport default __exports__"],"names":["class","style","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","onClick","_cache","args","$setup","toggleReservas","showReservas","_hoisted_5","_createVNode","_component_AdminReservas","readOnly","ref","_createCommentVNode","_component_MenuComponent","restrictedAccess","name","components","MenuComponent","AdminReservas","setup","router","useRouter","user","adminReservasRef","handleNuevaReserva","value","refreshReservations","onMounted","currentUser","getCurrentUser","alert","push","eventBus","on","onUnmounted","off","handleLogout","logout","__exports__","render"],"sourceRoot":""}