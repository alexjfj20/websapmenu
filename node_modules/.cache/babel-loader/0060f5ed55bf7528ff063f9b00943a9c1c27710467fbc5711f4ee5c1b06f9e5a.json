{"ast":null,"code":"import { createCommentVNode as _createCommentVNode } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _createCommentVNode(\" ... \");\n}","map":{"version":3,"names":["_createCommentVNode"],"sources":["F:\\Driver google\\VUE.JS-2\\VUE-JS\\websap\\src\\components\\MenuComponent.vue"],"sourcesContent":["<template>\n  <!-- ... -->\n</template>\n\n<script>\nimport { ref, computed, onMounted } from 'vue';\nimport { saveMenu } from '../services/menuService';\nimport { formatShareLinkMessage } from '../utils/messageFormatter';\nimport { copyToClipboard } from '../utils/clipboardUtils';\nimport SalesChartComponent from './SalesChartComponent.vue';\nimport { saveAs } from 'file-saver';\nimport * as XLSX from 'xlsx';\nimport { jsPDF } from 'jspdf';\nimport 'jspdf-autotable';\nimport { \n  getMenuItems, \n  saveMenuItems,\n  getBusinessInfo, \n  saveBusinessInfo as saveBusinessInfoToDB,\n  getSoldItems, \n  saveSoldItems,\n  deleteMenuItemFromDB,\n  migrateFromLocalStorage,\n  compressImage,\n  updateItemAvailability\n} from '../services/storageService';\nimport { confirm, alert } from '../services/dialogService';\nimport { getCurrentUser, hasRole } from '../services/authService';\nimport { guardarPlato } from '@/services/indexedDBService';\n\nexport default {\n  name: 'MenuComponent',\n  components: {\n    SalesChartComponent\n  },\n  props: {\n    viewOnly: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    // Estado para información del negocio\n    const businessInfo = ref({\n      name: '',\n      description: '',\n      contact: '',\n      address: '',\n      logo: ''\n    });\n    const showBusinessForm = ref(false);\n\n    // Estado para información de pago\n    const paymentInfo = ref({\n      qrTitle: '',\n      qrImage: '',\n      nequiNumber: '',\n      nequiImage: ''\n    });\n    const showPaymentForm = ref(false);\n\n    // Estado para platos del menú\n    const newItem = ref({\n      name: '',\n      description: '',\n      price: 0,\n      includesDrink: false,\n      availableQuantity: 0,\n      image: '',\n      id: null\n    });\n    const menuItems = ref([]);\n    const showMenuForm = ref(false);\n    const isEditing = ref(false);\n    const editingIndex = ref(-1);\n\n    // Estado para ventas e inventario\n    const soldItems = ref([]);\n    const searchTerm = ref('');\n    const sortBy = ref('');\n    const categoryFilter = ref('');\n    const selectedChartType = ref('bar');\n\n    // Estado para compartir\n    const shareLink = ref('');\n    const showCopiedMessage = ref(false);\n    \n    // Estado para mostrar progreso de migración\n    const migrationStatus = ref({\n      inProgress: false,\n      completed: false,\n      message: ''\n    });\n\n    // Estado para errores del gráfico\n    const chartError = ref(null);\n    \n    // Primero, añadir el componente Toast\n    const toast = ref({\n      show: false,\n      message: '',\n      type: 'success' // success, error, warning\n    });\n\n    // Manejar errores del gráfico\n    const handleChartError = (error) => {\n      console.error(\"Error en el gráfico:\", error);\n      chartError.value = error;\n    };\n\n    // Estado para mensajes de notificación\n    const notification = ref({\n      show: false,\n      message: '',\n      type: 'success', // 'success', 'error'\n      timeout: null\n    });\n\n    // Estado para platos especiales\n    const newSpecialItem = ref({\n      name: '',\n      description: '',\n      price: 0,\n      includesDrink: false,\n      availableQuantity: 0,\n      image: '',\n      id: null\n    });\n    const specialMenuItems = ref([]);\n    const showSpecialMenuForm = ref(false);\n    const isEditingSpecial = ref(false);\n    const editingSpecialIndex = ref(-1);\n\n    // Cargar datos guardados\n    onMounted(async () => {\n      try {\n        migrationStatus.value.inProgress = true;\n        migrationStatus.value.message = 'Cargando datos...';\n        \n        const hasLocalData = localStorage.getItem('businessInfo') || \n                             localStorage.getItem('menuItems') ||\n                             localStorage.getItem('soldItems');\n          \n        if (hasLocalData) {\n          migrationStatus.value.message = 'Migrando datos desde localStorage a IndexedDB...';\n          \n          const migrationResult = await migrateFromLocalStorage();\n          \n          if (migrationResult) {\n            migrationStatus.value.completed = true;\n            migrationStatus.value.message = 'Migración completada exitosamente';\n            localStorage.removeItem('businessInfo');\n            localStorage.removeItem('menuItems');\n            localStorage.removeItem('soldItems');\n          } else {\n            migrationStatus.value.message = 'Error en la migración de datos';\n          }\n        }\n\n        const dbBusinessInfo = await getBusinessInfo();\n        if (dbBusinessInfo && dbBusinessInfo.name) {\n          businessInfo.value = dbBusinessInfo;\n        }\n\n        const dbMenuItems = await getMenuItems();\n        if (dbMenuItems && dbMenuItems.length > 0) {\n          // Separar los platos regulares de los especiales\n          const regularItems = dbMenuItems.filter(item => !item.isSpecial);\n          const specialItems = dbMenuItems.filter(item => item.isSpecial === true);\n          \n          menuItems.value = regularItems;\n          \n          if (specialItems.length > 0) {\n            specialMenuItems.value = specialItems;\n          }\n        }\n\n        const dbSoldItems = await getSoldItems();\n        if (dbSoldItems && dbSoldItems.length > 0) {\n          soldItems.value = dbSoldItems;\n        }\n        \n        setTimeout(() => {\n          migrationStatus.value.inProgress = false;\n        }, 1500);\n      } catch (error) {\n        console.error('Error al cargar datos:', error);\n        migrationStatus.value.message = 'Error al cargar datos: ' + error.message;\n        setTimeout(() => {\n          migrationStatus.value.inProgress = false;\n        }, 3000);\n      }\n    });\n\n    // Métodos para información del negocio\n    const toggleBusinessForm = () => {\n      showBusinessForm.value = !showBusinessForm.value;\n    };\n\n    const onLogoChange = async (event) => {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = async (e) => {\n          const compressedLogo = await compressImage(e.target.result);\n          businessInfo.value.logo = compressedLogo;\n        };\n        reader.readAsDataURL(file);\n      }\n    };\n\n    const saveBusinessInfo = async () => {\n      try {\n        if (notification.value.timeout) {\n          clearTimeout(notification.value.timeout);\n        }\n        \n        await saveBusinessInfoToDB(businessInfo.value);\n        \n        notification.value = {\n          show: true,\n          message: 'Información del negocio guardada con éxito!',\n          type: 'success',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      } catch (error) {\n        console.error('Error al guardar información del negocio:', error);\n        \n        notification.value = {\n          show: true,\n          message: 'Error al guardar la información. Por favor, intenta nuevamente.',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    };\n\n    const clearBusinessForm = async () => {\n      const confirmed = await confirm('¿Estás seguro de querer limpiar el formulario?');\n      if (confirmed) {\n        businessInfo.value = {\n          name: '',\n          description: '',\n          contact: '',\n          address: '',\n          logo: ''\n        };\n      }\n    };\n\n    // Métodos para información de pago\n    const togglePaymentForm = () => {\n      showPaymentForm.value = !showPaymentForm.value;\n    };\n\n    const onQRImageChange = async (event) => {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = async (e) => {\n          const compressedImage = await compressImage(e.target.result);\n          paymentInfo.value.qrImage = compressedImage;\n        };\n        reader.readAsDataURL(file);\n      }\n    };\n\n    const onNequiImageChange = async (event) => {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = async (e) => {\n          const compressedImage = await compressImage(e.target.result);\n          paymentInfo.value.nequiImage = compressedImage;\n        };\n        reader.readAsDataURL(file);\n      }\n    };\n\n    const savePaymentInfo = async () => {\n      try {\n        if (notification.value.timeout) {\n          clearTimeout(notification.value.timeout);\n        }\n        \n        businessInfo.value.paymentInfo = { ...paymentInfo.value };\n        \n        await saveBusinessInfoToDB(businessInfo.value);\n        \n        notification.value = {\n          show: true,\n          message: 'Información de pago guardada con éxito!',\n          type: 'success',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      } catch (error) {\n        console.error('Error al guardar información de pago:', error);\n        \n        notification.value = {\n          show: true,\n          message: 'Error al guardar la información de pago. Por favor, intenta nuevamente.',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    };\n\n    const clearPaymentForm = async () => {\n      const confirmed = await confirm('¿Estás seguro de querer limpiar la información de pago?');\n      if (confirmed) {\n        paymentInfo.value = {\n          qrTitle: '',\n          qrImage: '',\n          nequiNumber: '',\n          nequiImage: ''\n        };\n      }\n    };\n\n    // Métodos para platos del menú\n    const toggleMenuForm = () => {\n      showMenuForm.value = !showMenuForm.value;\n      if (!showMenuForm.value) {\n        clearMenuForm();\n      }\n    };\n\n    const onImageChange = async (event) => {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = async (e) => {\n          const compressedImage = await compressImage(e.target.result);\n          newItem.value.image = compressedImage;\n        };\n        reader.readAsDataURL(file);\n      }\n    };\n\n    const saveMenuItem = async () => {\n      try {\n        // Validaciones iniciales\n        if (!newItem.value.name || !newItem.value.price) {\n          showNotification('El nombre y el precio son obligatorios', 'error');\n          return;\n        }\n\n        if (newItem.value.availableQuantity < 0) {\n          showNotification('La cantidad disponible no puede ser negativa', 'error');\n          return;\n        }\n\n        // Generar ID si no existe\n        if (!newItem.value.id) {\n          newItem.value.id = Date.now() + Math.random().toString(36).substring(2, 10);\n        }\n\n        try {\n          console.log('📝 Datos del plato antes de guardar:', newItem.value);\n          \n          // Guardar en la base de datos\n          const savedPlato = await guardarPlato(newItem.value);\n          console.log('✅ Plato guardado correctamente:', savedPlato);\n          \n          if (isEditing.value) {\n            // Actualizar el plato existente en la lista\n            const index = menuItems.value.findIndex(item => item.id === savedPlato.id);\n            if (index !== -1) {\n              menuItems.value[index] = { ...savedPlato };\n              showNotification('Plato actualizado exitosamente', 'success');\n            }\n          } else {\n            // Agregar el nuevo plato a la lista\n            menuItems.value.push({ ...savedPlato });\n            showNotification('Plato creado exitosamente', 'success');\n          }\n\n          // Guardar la lista completa\n          await saveMenuItems(menuItems.value);\n          \n          // Limpiar el formulario\n          clearMenuForm();\n          \n        } catch (error) {\n          console.error('❌ Error al guardar en la base de datos:', error);\n          showNotification(`Error al guardar el plato: ${error.message || 'Intente nuevamente'}`, 'error');\n        }\n      } catch (error) {\n        console.error('❌ Error general en saveMenuItem:', error);\n        showNotification(`Error inesperado: ${error.message || 'Intente nuevamente'}`, 'error');\n      }\n    };\n\n    const clearMenuForm = () => {\n      newItem.value = {\n        name: '',\n        description: '',\n        price: 0,\n        includesDrink: false,\n        availableQuantity: 0,\n        image: '',\n        id: null\n      };\n      isEditing.value = false;\n      editingIndex.value = -1;\n    };\n\n    const editMenuItem = (index) => {\n      newItem.value = { ...menuItems.value[index] };\n      isEditing.value = true;\n      editingIndex.value = index;\n      showMenuForm.value = true;\n    };\n\n    const deleteMenuItem = async (index) => {\n      try {\n        const item = menuItems.value[index];\n        \n        if (!item) {\n          console.error('Error: Elemento del menú no encontrado en el índice', index);\n          await alert('Error: No se encontró el elemento a eliminar');\n          return;\n        }\n        \n        // Confirmar eliminación\n        if (!confirm(`¿Estás seguro de que deseas eliminar \"${item.name || 'este plato'}\" del menú?`)) {\n          return;\n        }\n        \n        // Eliminar del backend MySQL directamente\n        try {\n          console.log(`Eliminando plato con ID: ${item.id} del servidor MySQL`);\n          const response = await fetch(`http://localhost:3000/direct-delete?id=${encodeURIComponent(item.id)}`, {\n            method: 'GET',\n            headers: {\n              'Cache-Control': 'no-cache'\n            }\n          });\n          \n          const result = await response.json();\n          console.log('Resultado de la eliminación directa:', result);\n          \n          if (!result.success) {\n            console.error('Error al eliminar plato del servidor:', result.message);\n            alert(`Error al eliminar plato: ${result.message}`);\n          }\n        } catch (serverError) {\n          console.error('Error al comunicarse con el servidor:', serverError);\n        }\n        \n        // Eliminar de IndexedDB\n        if (item.id) {\n          try {\n            console.log(`Llamando a deleteMenuItemFromDB para ID: ${item.id}`);\n            const deleteResult = await deleteMenuItemFromDB(item.id);\n            console.log(`Resultado de la eliminación de IndexedDB: ${deleteResult}`);\n          } catch (deleteError) {\n            console.error('Error al eliminar item del almacén local:', deleteError);\n          }\n        }\n        \n        // Eliminar de la lista local\n        menuItems.value.splice(index, 1);\n        \n        // Mostrar notificación de éxito\n        showNotification('Plato eliminado correctamente', 'success');\n        \n      } catch (error) {\n        console.error('Error al eliminar elemento del menú:', error);\n        showNotification('Error al eliminar el plato', 'error');\n      }\n    };\n\n    const sellMenuItem = async (index) => {\n      try {\n        const item = menuItems.value[index];\n        \n        // Validar disponibilidad\n        if (!item.availableQuantity || item.availableQuantity <= 0) {\n          showNotification('Este plato está agotado', 'error');\n          return;\n        }\n\n        const confirmed = await confirm(\n          `¿Desea vender una unidad de \"${item.name}\"?\\nDisponibles: ${item.availableQuantity}`\n        );\n\n        if (confirmed) {\n          try {\n            const newQuantity = item.availableQuantity - 1;\n            \n            // Actualizar en la base de datos\n            await updateItemAvailability(item.id, newQuantity);\n            \n            // Actualizar en el estado local\n            item.availableQuantity = newQuantity;\n            \n            // Registrar la venta\n            const currentDate = new Date().toISOString();\n            const soldItem = soldItems.value.find(sold => sold.name === item.name);\n            \n            if (soldItem) {\n              soldItem.quantity += 1;\n              soldItem.date = currentDate;\n            } else {\n              soldItems.value.push({\n                name: item.name,\n                quantity: 1,\n                price: item.price,\n                includesDrink: item.includesDrink,\n                date: currentDate\n              });\n            }\n            \n            // Guardar items vendidos\n            await saveSoldItems(soldItems.value);\n            \n            showNotification(`Se ha vendido una unidad de ${item.name}`, 'success');\n            \n            if (newQuantity <= 5) {\n              showNotification(`¡Atención! Quedan solo ${newQuantity} unidades de ${item.name}`, 'warning');\n            }\n          } catch (error) {\n            console.error('Error al procesar la venta:', error);\n            showNotification('Error al procesar la venta. Por favor, intente nuevamente.', 'error');\n          }\n        }\n      } catch (error) {\n        console.error('Error al procesar la venta:', error);\n        showNotification('Error al procesar la venta. Por favor, intente nuevamente.', 'error');\n      }\n    };\n\n    // Métodos para platos especiales\n    const toggleSpecialMenuForm = () => {\n      showSpecialMenuForm.value = !showSpecialMenuForm.value;\n      if (!showSpecialMenuForm.value) {\n        clearSpecialMenuForm();\n      }\n    };\n\n    const onSpecialImageChange = async (event) => {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = async (e) => {\n          const compressedImage = await compressImage(e.target.result);\n          newSpecialItem.value.image = compressedImage;\n        };\n        reader.readAsDataURL(file);\n      }\n    };\n\n    const saveSpecialMenuItem = async () => {\n      try {\n        if (!newSpecialItem.value.name || !newSpecialItem.value.price) {\n          showNotification('El nombre y el precio son obligatorios', 'error');\n          return;\n        }\n        \n        if (!newSpecialItem.value.id) {\n          newSpecialItem.value.id = Date.now() + Math.random().toString(36).substring(2, 10);\n        }\n        \n        // Marcar como plato especial\n        newSpecialItem.value.isSpecial = true;\n        \n        try {\n          console.log('📝 Datos del plato especial antes de guardar:', newSpecialItem.value);\n          \n          // Guardar en la base de datos\n          const savedPlato = await guardarPlato(newSpecialItem.value);\n          console.log('✅ Plato especial guardado correctamente:', savedPlato);\n          \n          if (isEditingSpecial.value) {\n            // Actualizar el plato existente en la lista\n            const index = specialMenuItems.value.findIndex(item => item.id === savedPlato.id);\n            if (index !== -1) {\n              specialMenuItems.value[index] = { ...savedPlato };\n              showNotification('Plato especial actualizado exitosamente', 'success');\n            }\n            isEditingSpecial.value = false;\n            editingSpecialIndex.value = -1;\n          } else {\n            const existingItem = specialMenuItems.value.find(item => \n              item.name.toLowerCase() === savedPlato.name.toLowerCase()\n            );\n            \n            if (existingItem) {\n              const confirmed = await confirm(\n                `Ya existe un plato especial llamado \"${savedPlato.name}\". ¿Desea actualizarlo?`,\n                { title: 'Actualizar plato especial existente' }\n              );\n              \n              if (confirmed) {\n                const index = specialMenuItems.value.findIndex(item => item.id === existingItem.id);\n                if (index !== -1) {\n                  // Conservar el ID original pero actualizar los demás datos\n                  const updatedPlato = {\n                    ...savedPlato,\n                    id: existingItem.id\n                  };\n                  \n                  // Actualizar en la base de datos\n                  await guardarPlato(updatedPlato);\n                  \n                  // Actualizar en la lista local\n                  specialMenuItems.value[index] = { ...updatedPlato };\n                  showNotification('Plato especial actualizado exitosamente', 'success');\n                }\n              } else {\n                return;\n              }\n            } else {\n              // Agregar el nuevo plato a la lista\n              specialMenuItems.value.push({ ...savedPlato });\n              showNotification('Plato especial creado exitosamente', 'success');\n            }\n          }\n          \n          // Guardar todos los elementos\n          await saveMenuItems([...menuItems.value, ...specialMenuItems.value]);\n          \n          // Limpiar el formulario\n          clearSpecialMenuForm();\n        } catch (error) {\n          console.error('❌ Error al guardar plato especial:', error);\n          showNotification(`Error al guardar el plato especial: ${error.message || 'Intente nuevamente'}`, 'error');\n        }\n      } catch (error) {\n        console.error('❌ Error general en saveSpecialMenuItem:', error);\n        showNotification(`Error inesperado: ${error.message || 'Intente nuevamente'}`, 'error');\n      }\n    };\n\n    const clearSpecialMenuForm = () => {\n      newSpecialItem.value = {\n        name: '',\n        description: '',\n        price: 0,\n        includesDrink: false,\n        availableQuantity: 0,\n        image: '',\n        id: null\n      };\n      isEditingSpecial.value = false;\n      editingSpecialIndex.value = -1;\n    };\n\n    const editSpecialMenuItem = (index) => {\n      newSpecialItem.value = { ...specialMenuItems.value[index] };\n      isEditingSpecial.value = true;\n      editingSpecialIndex.value = index;\n      showSpecialMenuForm.value = true;\n    };\n\n    const deleteSpecialMenuItem = async (index) => {\n      try {\n        const item = specialMenuItems.value[index];\n        \n        if (!item) {\n          console.error('Error: Elemento del menú especial no encontrado en el índice', index);\n          await alert('Error: No se encontró el elemento a eliminar');\n          return;\n        }\n        \n        // Confirmar eliminación\n        if (!confirm(`¿Estás seguro de que deseas eliminar \"${item.name || 'este plato'}\" del menú especial?`)) {\n          return;\n        }\n        \n        // Eliminar del backend MySQL directamente\n        try {\n          console.log(`Eliminando plato con ID: ${item.id} del servidor MySQL`);\n          const response = await fetch(`http://localhost:3000/direct-delete?id=${encodeURIComponent(item.id)}`, {\n            method: 'GET',\n            headers: {\n              'Cache-Control': 'no-cache'\n            }\n          });\n          \n          const result = await response.json();\n          console.log('Resultado de la eliminación directa:', result);\n          \n          if (!result.success) {\n            console.error('Error al eliminar plato del servidor:', result.message);\n            alert(`Error al eliminar plato: ${result.message}`);\n          }\n        } catch (serverError) {\n          console.error('Error al comunicarse con el servidor:', serverError);\n        }\n        \n        // Eliminar de IndexedDB\n        if (item.id) {\n          try {\n            console.log(`Llamando a deleteMenuItemFromDB para ID: ${item.id}`);\n            const deleteResult = await deleteMenuItemFromDB(item.id);\n            console.log(`Resultado de la eliminación de IndexedDB: ${deleteResult}`);\n          } catch (deleteError) {\n            console.error('Error al eliminar item del almacén local:', deleteError);\n          }\n        }\n        \n        // Eliminar de la lista local\n        specialMenuItems.value.splice(index, 1);\n        \n        // Mostrar notificación de éxito\n        showNotification('Plato eliminado correctamente', 'success');\n        \n      } catch (error) {\n        console.error('Error al eliminar elemento del menú especial:', error);\n        showNotification('Error al eliminar el plato', 'error');\n      }\n    };\n\n    const sellSpecialMenuItem = async (index) => {\n      try {\n        const item = specialMenuItems.value[index];\n        \n        // Validar disponibilidad\n        if (!item.availableQuantity || item.availableQuantity <= 0) {\n          showNotification('Este plato especial está agotado', 'error');\n          return;\n        }\n\n        const confirmed = await confirm(\n          `¿Desea vender una unidad de \"${item.name}\"?\\nDisponibles: ${item.availableQuantity}`\n        );\n\n        if (confirmed) {\n          try {\n            const newQuantity = item.availableQuantity - 1;\n            \n            // Actualizar en la base de datos\n            await updateItemAvailability(item.id, newQuantity);\n            \n            // Actualizar en el estado local\n            item.availableQuantity = newQuantity;\n            \n            // Registrar la venta\n            const currentDate = new Date().toISOString();\n            const soldItem = soldItems.value.find(sold => sold.name === item.name);\n            \n            if (soldItem) {\n              soldItem.quantity += 1;\n              soldItem.date = currentDate;\n            } else {\n              soldItems.value.push({\n                name: item.name,\n                quantity: 1,\n                price: item.price,\n                includesDrink: item.includesDrink,\n                date: currentDate\n              });\n            }\n            \n            // Guardar items vendidos\n            await saveSoldItems(soldItems.value);\n            \n            showNotification(`Se ha vendido una unidad de ${item.name}`, 'success');\n            \n            if (newQuantity <= 5) {\n              showNotification(`¡Atención! Quedan solo ${newQuantity} unidades de ${item.name}`, 'warning');\n            }\n          } catch (error) {\n            console.error('Error al procesar la venta:', error);\n            showNotification('Error al procesar la venta. Por favor, intente nuevamente.', 'error');\n          }\n        }\n      } catch (error) {\n        console.error('Error al procesar la venta:', error);\n        showNotification('Error al procesar la venta. Por favor, intente nuevamente.', 'error');\n      }\n    };\n\n    // Métodos para compartir\n    const shareByWhatsApp = async () => {\n      try {\n        await alert('Procesando imágenes para compartir...');\n        \n        const totalItems = menuItems.value.length + specialMenuItems.value.length;\n        if (totalItems > 30) {\n          await alert('El menú tiene demasiados elementos. Por favor, seleccione menos platos para compartir.');\n          return;\n        }\n        \n        // Combinar platos regulares y especiales\n        const itemsToShare = [\n          ...menuItems.value.map(item => ({\n            ...item,\n            isSpecial: false\n          })),\n          ...specialMenuItems.value.map(item => ({\n            ...item,\n            isSpecial: true\n          }))\n        ];\n        \n        console.log(`Preparando para compartir ${itemsToShare.length} elementos...`);\n        console.log('Items regulares:', menuItems.value.length);\n        console.log('Items especiales:', specialMenuItems.value.length);\n        \n        const menuId = await saveMenu(itemsToShare);\n        const url = `${window.location.origin}/menu/${menuId}`;\n        shareLink.value = url;\n        \n        const message = formatShareLinkMessage(url, businessInfo.value.name);\n        const whatsappUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(message)}`;\n        window.open(whatsappUrl, '_blank');\n      } catch (error) {\n        console.error('Error al compartir por WhatsApp:', error);\n        await alert(`Error al compartir el menú: ${error.message || 'Error desconocido'}. Por favor, intenta reducir el tamaño de las imágenes o eliminar algunos ítems.`);\n      }\n    };\n\n    const copyLink = async () => {\n      try {\n        const loadingMessage = 'Procesando imágenes para compartir...';\n        showCopiedMessage.value = true;\n        \n        const totalItems = menuItems.value.length + specialMenuItems.value.length;\n        if (totalItems > 30) {\n          await alert('El menú tiene demasiados elementos. Por favor, seleccione menos platos para compartir.');\n          showCopiedMessage.value = false;\n          return;\n        }\n        \n        // Combinar platos regulares y especiales\n        const itemsToShare = [\n          ...menuItems.value.map(item => ({\n            ...item,\n            isSpecial: false\n          })),\n          ...specialMenuItems.value.map(item => ({\n            ...item,\n            isSpecial: true\n          }))\n        ];\n        \n        const menuId = await saveMenu(itemsToShare);\n        const url = `${window.location.origin}/menu/${menuId}`;\n        shareLink.value = url;\n        \n        try {\n          await copyToClipboard(url);\n          showCopiedMessage.value = true;\n          setTimeout(() => {\n            showCopiedMessage.value = false;\n          }, 3000);\n        } catch (clipboardError) {\n          console.error('Error al copiar al portapapeles:', clipboardError);\n          await alert('No se pudo copiar automáticamente. Por favor, copia manualmente este enlace: ' + url);\n        }\n      } catch (error) {\n        console.error('Error al generar enlace para compartir:', error);\n        showCopiedMessage.value = false;\n        await alert(`Error al generar el enlace: ${error.message || 'Error desconocido'}. Por favor, intenta reducir el tamaño de las imágenes o eliminar algunos ítems.`);\n      }\n    };\n\n    // Computados\n    const totalSales = computed(() => {\n      if (!soldItems.value || !Array.isArray(soldItems.value)) return 0;\n      return soldItems.value.reduce((total, item) => {\n        const price = Number(item.price) || 0;\n        const quantity = Number(item.quantity) || 0;\n        return total + (price * quantity);\n      }, 0);\n    });\n\n    const filteredSoldItems = computed(() => {\n      if (!soldItems.value || !Array.isArray(soldItems.value)) return [];\n      \n      let items = [...soldItems.value];\n      \n      // Filtrar por término de búsqueda\n      if (searchTerm.value) {\n        const term = searchTerm.value.toLowerCase().trim();\n        items = items.filter(item => {\n          if (item && typeof item === 'object') {\n            const name = String(item.name || '').toLowerCase();\n            return name.includes(term);\n          }\n          return false;\n        });\n      }\n      \n      // Filtrar por categoría\n      if (categoryFilter.value) {\n        if (categoryFilter.value === 'drinks') {\n          items = items.filter(item => item && item.includesDrink === true);\n        } else if (categoryFilter.value === 'nodrinks') {\n          items = items.filter(item => item && item.includesDrink === false);\n        }\n      }\n      \n      // Ordenar según el criterio seleccionado\n      if (sortBy.value) {\n        switch (sortBy.value) {\n          case 'name':\n            items.sort((a, b) => {\n              if (!a || !a.name) return 1;\n              if (!b || !b.name) return -1;\n              return a.name.localeCompare(b.name);\n            });\n            break;\n          case 'quantity-desc':\n            items.sort((a, b) => {\n              const qtyA = (a && typeof a.quantity === 'number') ? a.quantity : 0;\n              const qtyB = (b && typeof b.quantity === 'number') ? b.quantity : 0;\n              return qtyB - qtyA;\n            });\n            break;\n          case 'quantity-asc':\n            items.sort((a, b) => {\n              const qtyA = (a && typeof a.quantity === 'number') ? a.quantity : 0;\n              const qtyB = (b && typeof b.quantity === 'number') ? b.quantity : 0;\n              return qtyA - qtyB;\n            });\n            break;\n          case 'price-desc':\n            items.sort((a, b) => {\n              const priceA = (a && typeof a.price === 'number') ? a.price : 0;\n              const priceB = (b && typeof b.price === 'number') ? b.price : 0;\n              return priceB - priceA;\n            });\n            break;\n          case 'price-asc':\n            items.sort((a, b) => {\n              const priceA = (a && typeof a.price === 'number') ? a.price : 0;\n              const priceB = (b && typeof b.price === 'number') ? b.price : 0;\n              return priceA - priceB;\n            });\n            break;\n          case 'date-desc':\n            items.sort((a, b) => {\n              const dateA = a && a.date ? new Date(a.date) : new Date(0);\n              const dateB = b && b.date ? new Date(b.date) : new Date(0);\n              return dateB - dateA;\n            });\n            break;\n          case 'date-asc':\n            items.sort((a, b) => {\n              const dateA = a && a.date ? new Date(a.date) : new Date(0);\n              const dateB = b && b.date ? new Date(b.date) : new Date(0);\n              return dateA - dateB;\n            });\n            break;\n          default:\n            break;\n        }\n      }\n      \n      return items;\n    });\n\n    const formatPrice = (price) => {\n      if (isNaN(Number(price))) return '0,00';\n      const fixed = Number(price).toFixed(2);\n      const [intPart, decPart] = fixed.split('.');\n      const formattedIntPart = intPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.');\n      return `${formattedIntPart},${decPart}`;\n    };\n    \n    const formatDate = (dateStr) => {\n      if (!dateStr) return 'N/A';\n      const date = new Date(dateStr);\n      if (isNaN(date.getTime())) return 'Fecha inválida';\n      return new Intl.DateTimeFormat('es-ES', {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      }).format(date);\n    };\n\n    const filterInventoryItems = computed(() => {\n      return (items) => {\n        if (!items || !Array.isArray(items)) {\n          console.warn('filterInventoryItems recibió un valor no array:', items);\n          return [];\n        }\n        if (searchTerm.value) {\n          const term = searchTerm.value.toLowerCase().trim();\n          \n          items = items.filter(item => {\n            if (item && typeof item === 'object') {\n              const name = String(item.name || '').toLowerCase();\n              return name.includes(term);\n            }\n            return false;\n          });\n        }\n        if (categoryFilter.value) {\n          if (categoryFilter.value === 'drinks') {\n            items = items.filter(item => item && item.includesDrink === true);\n          } else if (categoryFilter.value === 'nodrinks') {\n            items = items.filter(item => item && item.includesDrink === false);\n          }\n        }\n        if (sortBy.value) {\n          switch (sortBy.value) {\n            case 'name':\n              items.sort((a, b) => {\n                const nameA = (a && a.name) ? a.name.toLowerCase() : '';\n                const nameB = (b && b.name) ? b.name.toLowerCase() : '';\n                return nameA.localeCompare(nameB);\n              });\n              break;\n            case 'quantity-desc':\n              items.sort((a, b) => {\n                const qtyA = (a && typeof a.quantity === 'number') ? a.quantity : 0;\n                const qtyB = (b && typeof b.quantity === 'number') ? b.quantity : 0;\n                return qtyB - qtyA;\n              });\n              break;\n            case 'quantity-asc':\n              items.sort((a, b) => {\n                const qtyA = (a && typeof a.quantity === 'number') ? a.quantity : 0;\n                const qtyB = (b && typeof b.quantity === 'number') ? b.quantity : 0;\n                return qtyA - qtyB;\n              });\n              break;\n            case 'price-desc':\n              items.sort((a, b) => {\n                const priceA = (a && typeof a.price === 'number') ? a.price : 0;\n                const priceB = (b && typeof b.price === 'number') ? b.price : 0;\n                return priceB - priceA;\n              });\n              break;\n            case 'price-asc':\n              items.sort((a, b) => {\n                const priceA = (a && typeof a.price === 'number') ? a.price : 0;\n                const priceB = (b && typeof b.price === 'number') ? b.price : 0;\n                return priceA - priceB;\n              });\n              break;\n            case 'date-desc':\n              items.sort((a, b) => {\n                const dateA = a && a.date ? new Date(a.date) : new Date(0);\n                const dateB = b && b.date ? new Date(b.date) : new Date(0);\n                return dateB - dateA;\n              });\n              break;\n            case 'date-asc':\n              items.sort((a, b) => {\n                const dateA = a && a.date ? new Date(a.date) : new Date(0);\n                const dateB = b && b.date ? new Date(b.date) : new Date(0);\n                return dateA - dateB;\n              });\n              break;\n            default:\n              break;\n          }\n        }\n        return items;\n      };\n    });\n\n    const exportToExcel = () => {\n      // Crear un array con los datos a exportar\n      const data = [\n        ['Nombre del Plato', 'Categoría', 'Cantidad Vendida', 'Precio por Unidad', 'Fecha de Venta', 'Subtotal', 'Acciones'],\n        ...filteredSoldItems.value.map(item => [\n          item.name,\n          item.includesDrink ? 'Con refresco' : 'Sin refresco',\n          item.quantity,\n          `$${formatPrice(item.price)}`,\n          formatDate(item.date),\n          `$${formatPrice(item.quantity * item.price)}`,\n          ''\n        ]),\n        ['', '', '', '', '', 'Total', `$${formatPrice(totalSales.value)}`]\n      ];\n\n      // Crear un libro de Excel y una hoja de cálculo\n      const ws = XLSX.utils.aoa_to_sheet(data);\n      const wb = XLSX.utils.book_new();\n      XLSX.utils.book_append_sheet(wb, ws, 'Ventas');\n\n      // Generar el archivo Excel y descargarlo\n      const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\n      const blob = new Blob([excelBuffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\n      saveAs(blob, `ventas_${new Date().toLocaleDateString()}.xlsx`);\n    };\n\n    const exportToPDF = () => {\n      // Crear un nuevo documento PDF\n      const doc = new jsPDF();\n      \n      // Añadir título\n      doc.setFontSize(18);\n      doc.text('Reporte de Ventas', 14, 22);\n      doc.setFontSize(11);\n      doc.text(`Fecha: ${new Date().toLocaleDateString()}`, 14, 32);\n\n      // Crear la tabla con los datos\n      const tableData = filteredSoldItems.value.map(item => [\n        item.name,\n        item.includesDrink ? 'Con refresco' : 'Sin refresco',\n        item.quantity,\n        `$${formatPrice(item.price)}`,\n        formatDate(item.date),\n        `$${formatPrice(item.quantity * item.price)}`\n      ]);\n\n      // Añadir la tabla\n      doc.autoTable({\n        head: [['Nombre del Plato', 'Categoría', 'Cantidad Vendida', 'Precio por Unidad', 'Fecha de Venta', 'Subtotal']],\n        body: tableData,\n        foot: [['', '', '', '', 'Total', `$${formatPrice(totalSales.value)}`]],\n        startY: 40,\n        theme: 'striped',\n        headStyles: { fillColor: [76, 175, 80] },\n        footStyles: { fillColor: [240, 240, 240], textColor: [0, 0, 0], fontStyle: 'bold' }\n      });\n\n      // Guardar el PDF de exportación\n      doc.save(`ventas_${new Date().toLocaleDateString()}.pdf`);\n    };\n\n    const returnSoldItem = async (item) => {\n      try {\n        // Buscar el plato en el menú para incrementar su stock\n        const menuItem = menuItems.value.find(mi => mi.name === item.name) || \n                         specialMenuItems.value.find(smi => smi.name === item.name);\n        \n        if (!menuItem) {\n          showNotification('No se encontró el plato en el inventario actual', 'error');\n          return;\n        }\n        \n        const confirmed = await confirm(\n          `¿Desea devolver una unidad de \"${item.name}\" al stock?`\n        );\n        \n        if (confirmed) {\n          // Incrementar el stock del plato\n          const newQuantity = (menuItem.availableQuantity || 0) + 1;\n          \n          // Actualizar en la base de datos\n          await updateItemAvailability(menuItem.id, newQuantity);\n          \n          // Actualizar en el estado local\n          menuItem.availableQuantity = newQuantity;\n          \n          // Reducir la cantidad vendida\n          if (item.quantity > 1) {\n            item.quantity -= 1;\n          } else {\n            // Si solo queda 1, eliminar el item de la lista\n            const index = soldItems.value.findIndex(si => si.name === item.name);\n            if (index !== -1) {\n              soldItems.value.splice(index, 1);\n            }\n          }\n          \n          // Guardar items vendidos actualizados\n          await saveSoldItems(soldItems.value);\n          \n          showNotification(`Se ha devuelto una unidad de ${item.name} al stock`, 'success');\n        }\n      } catch (error) {\n        console.error('Error al devolver plato al stock:', error);\n        showNotification('Error al procesar la devolución. Por favor, intente nuevamente.', 'error');\n      }\n    };\n\n    const canClearList = computed(() => {\n      if (soldItems.value.length === 0) return false;\n      \n      // Encontrar la fecha de venta más reciente\n      const mostRecentDate = soldItems.value.reduce((latest, item) => {\n        const itemDate = new Date(item.date);\n        return itemDate > latest ? itemDate : latest;\n      }, new Date(0));\n      \n      // Calcular si han pasado 24 horas\n      const now = new Date();\n      const hoursPassed = (now - mostRecentDate) / (1000 * 60 * 60);\n      \n      return hoursPassed >= 24;\n    });\n\n    const clearListTooltip = computed(() => {\n      if (soldItems.value.length === 0) {\n        return 'No hay platos vendidos para borrar';\n      }\n      \n      if (canClearList.value) {\n        return 'Borrar todos los platos vendidos';\n      } else {\n        // Encontrar la fecha de venta más reciente\n        const mostRecentDate = soldItems.value.reduce((latest, item) => {\n          const itemDate = new Date(item.date);\n          return itemDate > latest ? itemDate : latest;\n        }, new Date(0));\n        \n        // Calcular tiempo restante\n        const now = new Date();\n        const hoursPassed = (now - mostRecentDate) / (1000 * 60 * 60);\n        const hoursRemaining = Math.ceil(24 - hoursPassed);\n        \n        return `Debe esperar ${hoursRemaining} horas más para borrar la lista`;\n      }\n    });\n\n    const clearAllSoldItems = async () => {\n      if (!canClearList.value) {\n        showNotification('Debe esperar 24 horas desde la última venta para borrar la lista', 'error');\n        return;\n      }\n      \n      const confirmed = await confirm(\n        '¿Está seguro de que desea borrar toda la lista de platos vendidos? Esta acción no se puede deshacer.'\n      );\n      \n      if (confirmed) {\n        try {\n          // Vaciar la lista de platos vendidos\n          soldItems.value = [];\n          \n          // Guardar en la base de datos\n          await saveSoldItems([]);\n          \n          showNotification('Lista de platos vendidos borrada exitosamente', 'success');\n        } catch (error) {\n          console.error('Error al borrar la lista de platos vendidos:', error);\n          showNotification('Error al borrar la lista. Por favor, intente nuevamente.', 'error');\n        }\n      }\n    };\n\n    // Función para mostrar notificaciones\n    const showNotification = (message, type) => {\n      notification.value = {\n        show: true,\n        message,\n        type\n      };\n      \n      setTimeout(() => {\n        notification.value.show = false;\n      }, 3000); // 3 segundos como acordado\n    };\n\n    const checkAvailabilityToast = async (itemId) => {\n      try {\n        // Buscar el item en ambos menús\n        const item = menuItems.value.find(i => i.id === itemId) || \n                    specialMenuItems.value.find(i => i.id === itemId);\n        \n        if (item) {\n          if (item.availableQuantity > 5) {\n            showNotification(`Disponible: ${item.availableQuantity} unidades`, 'success');\n          } else if (item.availableQuantity > 0) {\n            showNotification(`¡Quedan solo ${item.availableQuantity} unidades!`, 'warning');\n          } else {\n            showNotification('Producto agotado', 'error');\n          }\n        }\n      } catch (error) {\n        console.error('Error al verificar disponibilidad:', error);\n      }\n    };\n\n    // Añadir propiedad isEmployee\n    const isEmployee = computed(() => {\n      return hasRole('Empleado') && !hasRole('Administrador') && !hasRole('Superadministrador');\n    });\n\n    const removeDuplicates = (array) => {\n      return [...new Set(array)];\n    };\n\n    return {\n      businessInfo,\n      showBusinessForm,\n      toggleBusinessForm,\n      onLogoChange,\n      saveBusinessInfo,\n      clearBusinessForm,\n      paymentInfo,\n      showPaymentForm,\n      togglePaymentForm,\n      onQRImageChange,\n      onNequiImageChange,\n      savePaymentInfo,\n      clearPaymentForm,\n      newItem,\n      menuItems,\n      showMenuForm,\n      isEditing,\n      toggleMenuForm,\n      onImageChange,\n      saveMenuItem,\n      clearMenuForm,\n      editMenuItem,\n      deleteMenuItem,\n      sellMenuItem,\n      soldItems,\n      totalSales,\n      searchTerm,\n      sortBy,\n      categoryFilter,\n      selectedChartType,\n      shareLink,\n      showCopiedMessage,\n      shareByWhatsApp,\n      copyLink,\n      exportToExcel,\n      exportToPDF,\n      filteredSoldItems,\n      migrationStatus,\n      chartError,\n      handleChartError,\n      notification,\n      newSpecialItem,\n      specialMenuItems,\n      showSpecialMenuForm,\n      isEditingSpecial,\n      editingSpecialIndex,\n      toggleSpecialMenuForm,\n      onSpecialImageChange,\n      saveSpecialMenuItem,\n      clearSpecialMenuForm,\n      editSpecialMenuItem,\n      deleteSpecialMenuItem,\n      sellSpecialMenuItem,\n      toast,\n      showNotification,\n      checkAvailabilityToast,\n      isEmployee,\n      filterInventoryItems,\n      returnSoldItem,\n      canClearList,\n      clearListTooltip,\n      clearAllSoldItems,\n      removeDuplicates\n    };\n  }\n};\n</script>\n\n<style scoped>\n.menu-container {\n  padding: 20px;\n}\n\nsection {\n  margin-bottom: 40px;\n  padding: 20px;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  background-color: #fff;\n}\n\nh2 {\n  color: #333;\n  font-size: 24px;\n  margin-bottom: 20px;\n  border-bottom: 2px solid #4CAF50;\n  padding-bottom: 10px;\n}\n\n.toggle-button {\n  background-color: #4CAF50;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  padding: 10px 15px;\n  margin-bottom: 20px;\n  cursor: pointer;\n  font-weight: bold;\n}\n\n.toggle-button:hover {\n  background-color: #45a049;\n}\n\nform {\n  display: grid;\n  gap: 15px;\n}\n\nlabel {\n  font-weight: bold;\n}\n\ninput, textarea, select {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 14px;\n}\n\n.button-group {\n  display: flex;\n  gap: 10px;\n  margin-top: 15px;\n}\n\n.save-button {\n  background-color: #007bff;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  padding: 10px 15px;\n  cursor: pointer;\n  flex: 1;\n}\n\n.save-button:hover {\n  background-color: #0056b3;\n}\n\n.clear-button {\n  background-color: #dc3545;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  padding: 10px 15px;\n  cursor: pointer;\n  flex: 1;\n}\n\n.clear-button:hover {\n  background-color: #c82333;\n}\n\n.business-preview {\n  margin-top: 20px;\n  padding: 15px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  background-color: #f9f9f9;\n}\n\n/* Mejoras a la lista de platos */\n.menu-items-list, .menu-special-items-list {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 20px;\n  margin-top: 20px;\n}\n\n.menu-item-card {\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  background-color: #f9f9f9;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  display: flex;\n  flex-direction: column;\n}\n\n.menu-item-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 5px 15px rgba(0,0,0,0.2);\n}\n\n.menu-item-image-container {\n  width: 100%;\n  height: 200px;\n  position: relative;\n  overflow: hidden;\n  background-color: #f0f0f0;\n}\n\n.menu-item-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transition: transform 0.5s ease;\n}\n\n.menu-item-card:hover .menu-item-image {\n  transform: scale(1.05);\n}\n\n.no-image-placeholder {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: #999;\n  font-style: italic;\n}\n\n.menu-item-details {\n  padding: 15px;\n  flex-grow: 1;\n}\n\n.menu-item-details h3 {\n  margin-top: 0;\n  color: #333;\n  font-size: 18px;\n}\n\n.menu-item-actions {\n  display: flex;\n  gap: 10px;\n  padding: 0 15px 15px;\n}\n\n.edit-button, .sell-button, .delete-button {\n  flex: 1;\n  padding: 8px 12px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: bold;\n  transition: background-color 0.3s;\n}\n\n.edit-button {\n  background-color: #ffc107;\n  color: #333;\n}\n\n.edit-button:hover {\n  background-color: #e0a800;\n}\n\n.sell-button {\n  background-color: #28a745;\n  color: white;\n}\n\n.sell-button:hover {\n  background-color: #218838;\n}\n\n.delete-button {\n  background-color: #dc3545;\n  color: white;\n}\n\n.delete-button:hover {\n  background-color: #c82333;\n}\n\n/* Mejoras a la sección de inventario */\n.inventory-section {\n  margin-top: 30px;\n}\n\n.inventory-controls {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 15px;\n  margin-bottom: 20px;\n  align-items: center;\n}\n\n.inventory-search-container {\n  flex: 1;\n  min-width: 200px;\n}\n\n.inventory-search-input {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n}\n\n.inventory-filters {\n  display: flex;\n  gap: 10px;\n}\n\n.inventory-filter {\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  background-color: white;\n}\n\n.inventory-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.export-button {\n  padding: 8px 12px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  font-weight: bold;\n}\n\n.excel {\n  background-color: #217346;\n  color: white;\n}\n\n.excel:hover {\n  background-color: #1a5c38;\n}\n\n.pdf {\n  background-color: #f40f02;\n  color: white;\n}\n\n.pdf:hover {\n  background-color: #d30902;\n}\n\n.clear-all-button {\n  padding: 8px 12px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  font-weight: bold;\n  background-color: #dc3545;\n  color: white;\n}\n\n.clear-all-button:hover {\n  background-color: #c82333;\n}\n\n.clear-all-button:disabled {\n  background-color: #6c757d;\n  cursor: not-allowed;\n  opacity: 0.7;\n}\n\n.return-button {\n  background-color: #17a2b8;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  padding: 6px 10px;\n  cursor: pointer;\n  font-size: 16px;\n  transition: background-color 0.3s;\n}\n\n.return-button:hover {\n  background-color: #138496;\n}\n\n.action-icon {\n  font-size: 16px;\n}\n\n.sales-chart-container {\n  margin: 20px 0;\n  height: 300px;\n  background-color: #f9f9f9;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.inventory-table {\n  overflow-x: auto;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n}\n\nth, td {\n  padding: 15px;\n  text-align: left;\n}\n\nthead {\n  background-color: #4CAF50;\n  color: white;\n}\n\nthead th {\n  font-weight: 600;\n}\n\ntbody tr:hover {\n  background-color: #f1f1f1;\n}\n\n.alternate-row {\n  background-color: #f9f9f9;\n}\n\ntfoot {\n  background-color: #e9e9e9;\n  font-weight: bold;\n}\n\ntfoot td {\n  padding: 12px 15px;\n}\n\n.share-buttons {\n  display: flex;\n  gap: 15px;\n  margin-top: 20px;\n}\n\n.whatsapp-button, .copy-button {\n  flex: 1;\n  padding: 12px 15px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n}\n\n.whatsapp-button {\n  background-color: #25D366;\n  color: white;\n}\n\n.whatsapp-button:hover {\n  background-color: #128C7E;\n}\n\n.copy-button {\n  background-color: #6c757d;\n  color: white;\n}\n\n.copy-button:hover {\n  background-color: #5a6268;\n}\n\n.emoji {\n  font-size: 1.2em;\n  margin-right: 8px;\n}\n\n.copied-message {\n  color: #28a745;\n  margin-top: 10px;\n}\n\n.share-link {\n  margin-top: 15px;\n  padding: 10px;\n  background-color: #f8f9fa;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  word-break: break-all;\n}\n\n.migration-status {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  background-color: #ffeb3b;\n  color: #333;\n  padding: 15px 20px;\n  border-radius: 6px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n  z-index: 1000;\n  max-width: 300px;\n  transition: all 0.3s ease;\n}\n\n.migration-status.completed {\n  background-color: #4CAF50;\n  color: white;\n}\n\n.migration-message {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.loading-spinner {\n  display: inline-block;\n  width: 18px;\n  height: 18px;\n  border: 3px solid rgba(0, 0, 0, 0.1);\n  border-top-color: #333;\n  animation: spin 1s ease-in-out infinite;\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* Estilos para notificaciones */\n.notification {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  padding: 15px 20px;\n  border-radius: 4px;\n  color: white;\n  font-weight: bold;\n  z-index: 1001;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  min-width: 300px;\n  max-width: 500px;\n  animation: slide-in 0.3s ease-out;\n}\n\n.notification.success {\n  background-color: #4CAF50;\n}\n\n.notification.error {\n  background-color: #f44336;\n}\n\n.notification-close {\n  background: transparent;\n  border: none;\n  color: white;\n  font-size: 20px;\n  margin-left: 15px;\n  cursor: pointer;\n  padding: 0 5px;\n}\n\n@keyframes slide-in {\n  from {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n\n/* Estilos del toast */\n.toast-notification {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  padding: 15px 20px;\n  border-radius: 8px;\n  color: white;\n  z-index: 1000;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  animation: fadeIn 0.3s, fadeOut 0.3s 2.7s;\n}\n\n.toast-notification.success {\n  background-color: #4CAF50;\n}\n\n.toast-notification.error {\n  background-color: #f44336;\n}\n\n.toast-notification.warning {\n  background-color: #ff9800;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(-20px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n@keyframes fadeOut {\n  from { opacity: 1; transform: translateY(0); }\n  to { opacity: 0; transform: translateY(-20px); }\n}\n\n/* Estilos del tooltip */\n.tooltip-container {\n  position: relative;\n}\n\n.tooltip {\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  padding: 8px 12px;\n  background-color: #333;\n  color: white;\n  border-radius: 6px;\n  font-size: 14px;\n  white-space: nowrap;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.3s, visibility 0.3s;\n}\n\n.tooltip::after {\n  content: '';\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  border: 6px solid transparent;\n  border-top-color: #333;\n}\n\n.tooltip-visible {\n  opacity: 1;\n  visibility: visible;\n}\n\n.action-button:hover .tooltip {\n  opacity: 1;\n  visibility: visible;\n}\n\n/* Añadir estilos para botones deshabilitados */\n.toggle-button:disabled {\n  background-color: #cccccc;\n  color: #666666;\n  cursor: not-allowed;\n  opacity: 0.7;\n}\n</style>"],"mappings":";;SACEA,mBAAA,SAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}