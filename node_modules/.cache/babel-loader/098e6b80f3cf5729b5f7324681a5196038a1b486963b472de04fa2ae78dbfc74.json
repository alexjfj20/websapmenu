{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport { ref, computed, onMounted } from 'vue';\nimport { saveMenu } from '../services/menuService';\nimport { formatShareLinkMessage } from '../utils/messageFormatter';\nimport SalesChartComponent from './SalesChartComponent.vue';\nimport { saveAs } from 'file-saver';\nimport * as XLSX from 'xlsx';\nimport { jsPDF } from 'jspdf';\nimport 'jspdf-autotable';\nimport { getMenuItems, saveMenuItems, getBusinessInfo, saveBusinessInfo, getSoldItems, saveSoldItems, deleteMenuItem, migrateFromLocalStorage, compressImage } from '../services/storageService';\nexport default {\n  name: 'MenuComponent',\n  components: {\n    SalesChartComponent\n  },\n  setup() {\n    // Estado para información del negocio\n    const businessInfo = ref({\n      name: '',\n      description: '',\n      contact: '',\n      address: '',\n      logo: ''\n    });\n    const showBusinessForm = ref(false);\n\n    // Estado para platos del menú\n    const newItem = ref({\n      name: '',\n      description: '',\n      price: 0,\n      includesDrink: false,\n      availableQuantity: 0,\n      image: '',\n      id: null\n    });\n    const menuItems = ref([]);\n    const showMenuForm = ref(false);\n    const isEditing = ref(false);\n    const editingIndex = ref(-1);\n\n    // Estado para ventas e inventario\n    const soldItems = ref([]);\n    const searchTerm = ref('');\n    const sortBy = ref('');\n    const categoryFilter = ref('');\n    const selectedChartType = ref('bar');\n\n    // Estado para compartir\n    const shareLink = ref('');\n    const showCopiedMessage = ref(false);\n\n    // Estado para mostrar progreso de migración\n    const migrationStatus = ref({\n      inProgress: false,\n      completed: false,\n      message: ''\n    });\n\n    // Cargar datos guardados\n    onMounted(async () => {\n      try {\n        // Primero intentar cargar desde IndexedDB\n        const dbBusinessInfo = await getBusinessInfo();\n        if (dbBusinessInfo && dbBusinessInfo.name) {\n          businessInfo.value = dbBusinessInfo;\n        } else {\n          // Si no hay datos en IndexedDB, intentar migrar desde localStorage\n          const hasLocalData = localStorage.getItem('businessInfo') || localStorage.getItem('menuItems') || localStorage.getItem('soldItems');\n          if (hasLocalData) {\n            migrationStatus.value.inProgress = true;\n            migrationStatus.value.message = 'Migrando datos desde localStorage a IndexedDB...';\n            const migrationResult = await migrateFromLocalStorage();\n            if (migrationResult) {\n              migrationStatus.value.completed = true;\n              migrationStatus.value.message = 'Migración completada exitosamente';\n\n              // Recargar datos desde IndexedDB\n              businessInfo.value = await getBusinessInfo();\n              menuItems.value = await getMenuItems();\n              soldItems.value = (await getSoldItems()) || [];\n            } else {\n              migrationStatus.value.message = 'Error en la migración de datos';\n            }\n            migrationStatus.value.inProgress = false;\n          }\n        }\n\n        // Cargar menú y ventas desde IndexedDB\n        if (!menuItems.value.length) {\n          menuItems.value = (await getMenuItems()) || [];\n        }\n        if (!soldItems.value.length) {\n          soldItems.value = (await getSoldItems()) || [];\n        }\n      } catch (error) {\n        console.error('Error al cargar datos:', error);\n      }\n    });\n\n    // Métodos para información del negocio\n    const toggleBusinessForm = () => {\n      showBusinessForm.value = !showBusinessForm.value;\n    };\n    const onLogoChange = async event => {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = async e => {\n          // Comprimir la imagen antes de guardarla\n          const compressedLogo = await compressImage(e.target.result);\n          businessInfo.value.logo = compressedLogo;\n        };\n        reader.readAsDataURL(file);\n      }\n    };\n    const saveBusinessInfo = async () => {\n      try {\n        await saveBusinessInfo(businessInfo.value);\n        alert('Información del negocio guardada con éxito!');\n      } catch (error) {\n        console.error('Error al guardar información del negocio:', error);\n        alert('Error al guardar la información. Por favor, intenta nuevamente.');\n      }\n    };\n    const clearBusinessForm = () => {\n      if (confirm('¿Estás seguro de querer limpiar el formulario?')) {\n        businessInfo.value = {\n          name: '',\n          description: '',\n          contact: '',\n          address: '',\n          logo: ''\n        };\n      }\n    };\n\n    // Métodos para platos del menú\n    const toggleMenuForm = () => {\n      showMenuForm.value = !showMenuForm.value;\n      if (!showMenuForm.value) {\n        clearMenuForm();\n      }\n    };\n    const onImageChange = async event => {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = async e => {\n          // Comprimir la imagen antes de guardarla\n          const compressedImage = await compressImage(e.target.result);\n          newItem.value.image = compressedImage;\n        };\n        reader.readAsDataURL(file);\n      }\n    };\n    const saveMenuItem = async () => {\n      try {\n        if (!newItem.value.id) {\n          newItem.value.id = Date.now() + Math.random().toString(36).substring(2, 10);\n        }\n        if (isEditing.value) {\n          // Actualizar plato existente\n          const index = menuItems.value.findIndex(item => item.id === newItem.value.id);\n          if (index !== -1) {\n            menuItems.value[index] = {\n              ...newItem.value\n            };\n          }\n          isEditing.value = false;\n          editingIndex.value = -1;\n          alert('Plato actualizado con éxito!');\n        } else {\n          // Crear nuevo plato\n          menuItems.value.push({\n            ...newItem.value\n          });\n          alert('Plato creado con éxito!');\n        }\n\n        // Guardar en IndexedDB\n        await saveMenuItems(menuItems.value);\n\n        // Limpiar formulario\n        clearMenuForm();\n      } catch (error) {\n        console.error('Error al guardar el plato:', error);\n        alert('Error al guardar el plato. Por favor, intenta nuevamente.');\n      }\n    };\n    const editMenuItem = index => {\n      newItem.value = {\n        ...menuItems.value[index]\n      };\n      isEditing.value = true;\n      editingIndex.value = index;\n      showMenuForm.value = true;\n    };\n    const deleteMenuItem = async index => {\n      if (confirm('¿Estás seguro de querer eliminar este plato?')) {\n        try {\n          const item = menuItems.value[index];\n\n          // Agregar a vendidos antes de eliminar (simulación)\n          const soldItem = soldItems.value.find(sold => sold.name === item.name);\n          if (soldItem) {\n            soldItem.quantity += 1;\n          } else {\n            soldItems.value.push({\n              name: item.name,\n              quantity: 1,\n              price: item.price,\n              includesDrink: item.includesDrink\n            });\n          }\n\n          // Guardar vendidos en IndexedDB\n          await saveSoldItems(soldItems.value);\n\n          // Eliminar del menú en IndexedDB\n          if (item.id) {\n            await deleteMenuItem(item.id);\n          }\n\n          // Eliminar del array local\n          menuItems.value.splice(index, 1);\n        } catch (error) {\n          console.error('Error al eliminar el plato:', error);\n          alert('Error al eliminar el plato. Por favor, intenta nuevamente.');\n        }\n      }\n    };\n    const sellMenuItem = async index => {\n      try {\n        const item = menuItems.value[index];\n\n        // Verificar si hay unidades disponibles\n        if (item.availableQuantity <= 0) {\n          alert('No hay unidades disponibles de este plato.');\n          return;\n        }\n\n        // Reducir la cantidad disponible\n        item.availableQuantity--;\n\n        // Actualizar lista de platos vendidos\n        const soldItem = soldItems.value.find(sold => sold.name === item.name);\n        if (soldItem) {\n          soldItem.quantity += 1;\n        } else {\n          soldItems.value.push({\n            name: item.name,\n            quantity: 1,\n            price: item.price,\n            includesDrink: item.includesDrink\n          });\n        }\n\n        // Guardar cambios en IndexedDB\n        await saveMenuItems(menuItems.value);\n        await saveSoldItems(soldItems.value);\n      } catch (error) {\n        console.error('Error al vender el plato:', error);\n        alert('Error al procesar la venta. Por favor, intenta nuevamente.');\n      }\n    };\n    const clearMenuForm = () => {\n      newItem.value = {\n        name: '',\n        description: '',\n        price: 0,\n        includesDrink: false,\n        availableQuantity: 0,\n        image: '',\n        id: null\n      };\n      isEditing.value = false;\n      editingIndex.value = -1;\n    };\n\n    // Métodos para compartir\n    const shareByWhatsApp = () => {\n      const menuId = saveMenu(menuItems.value);\n      const url = `${window.location.origin}/menu/${menuId}`;\n      shareLink.value = url;\n      const message = formatShareLinkMessage(url, businessInfo.value.name);\n      const whatsappUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(message)}`;\n      window.open(whatsappUrl, '_blank');\n    };\n    const copyLink = () => {\n      const menuId = saveMenu(menuItems.value);\n      const url = `${window.location.origin}/menu/${menuId}`;\n      shareLink.value = url;\n      navigator.clipboard.writeText(url).then(() => {\n        showCopiedMessage.value = true;\n        setTimeout(() => {\n          showCopiedMessage.value = false;\n        }, 3000);\n      }).catch(err => {\n        console.error('Error al copiar:', err);\n        alert('No se pudo copiar el enlace. Por favor, inténtalo de nuevo.');\n      });\n    };\n\n    // Computados\n    const totalSales = computed(() => {\n      return soldItems.value.reduce((total, item) => {\n        return total + item.quantity * item.price;\n      }, 0);\n    });\n\n    // Formateo de precios\n    const formatPrice = price => {\n      return price.toFixed(2);\n    };\n\n    // Filtrado de platos vendidos\n    const filteredSoldItems = computed(() => {\n      let items = soldItems.value;\n\n      // Filtrar por término de búsqueda\n      if (searchTerm.value) {\n        const term = searchTerm.value.toLowerCase();\n        items = items.filter(item => item.name.toLowerCase().includes(term));\n      }\n\n      // Filtrar por categoría\n      if (categoryFilter.value) {\n        if (categoryFilter.value === 'drinks') {\n          items = items.filter(item => item.includesDrink);\n        } else if (categoryFilter.value === 'nodrinks') {\n          items = items.filter(item => !item.includesDrink);\n        }\n      }\n\n      // Ordenar según el criterio seleccionado\n      if (sortBy.value) {\n        items = [...items]; // Crear una copia para no mutar el original\n\n        switch (sortBy.value) {\n          case 'name':\n            items.sort((a, b) => a.name.localeCompare(b.name));\n            break;\n          case 'quantity-desc':\n            items.sort((a, b) => b.quantity - a.quantity);\n            break;\n          case 'quantity-asc':\n            items.sort((a, b) => a.quantity - b.quantity);\n            break;\n          case 'price-desc':\n            items.sort((a, b) => b.price - a.price);\n            break;\n          case 'price-asc':\n            items.sort((a, b) => a.price - b.price);\n            break;\n          default:\n            break;\n        }\n      }\n      return items;\n    });\n\n    // Exportar datos\n    const exportToExcel = () => {\n      // Crear un array con los datos a exportar\n      const data = [['Nombre del Plato', 'Categoría', 'Cantidad Vendida', 'Precio por Unidad', 'Subtotal'], ...filteredSoldItems.value.map(item => [item.name, item.includesDrink ? 'Con refresco' : 'Sin refresco', item.quantity, `$${formatPrice(item.price)}`, `$${formatPrice(item.quantity * item.price)}`]), ['', '', '', 'Total', `$${formatPrice(totalSales.value)}`]];\n\n      // Crear un libro de Excel y una hoja de cálculo\n      const ws = XLSX.utils.aoa_to_sheet(data);\n      const wb = XLSX.utils.book_new();\n      XLSX.utils.book_append_sheet(wb, ws, 'Ventas');\n\n      // Generar el archivo Excel y descargarlo\n      const excelBuffer = XLSX.write(wb, {\n        bookType: 'xlsx',\n        type: 'array'\n      });\n      const blob = new Blob([excelBuffer], {\n        type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n      });\n      saveAs(blob, `ventas_${new Date().toLocaleDateString()}.xlsx`);\n    };\n    const exportToPDF = () => {\n      // Crear un nuevo documento PDF\n      const doc = new jsPDF();\n\n      // Añadir título\n      doc.setFontSize(18);\n      doc.text('Reporte de Ventas', 14, 22);\n      doc.setFontSize(11);\n      doc.text(`Fecha: ${new Date().toLocaleDateString()}`, 14, 32);\n\n      // Crear la tabla con los datos\n      const tableData = filteredSoldItems.value.map(item => [item.name, item.includesDrink ? 'Con refresco' : 'Sin refresco', item.quantity, `$${formatPrice(item.price)}`, `$${formatPrice(item.quantity * item.price)}`]);\n\n      // Añadir la tabla\n      doc.autoTable({\n        head: [['Nombre del Plato', 'Categoría', 'Cantidad Vendida', 'Precio por Unidad', 'Subtotal']],\n        body: tableData,\n        foot: [['', '', '', 'Total', `$${formatPrice(totalSales.value)}`]],\n        startY: 40,\n        theme: 'striped',\n        headStyles: {\n          fillColor: [76, 175, 80]\n        },\n        footStyles: {\n          fillColor: [240, 240, 240],\n          textColor: [0, 0, 0],\n          fontStyle: 'bold'\n        }\n      });\n\n      // Guardar el PDF de exportación\n      doc.save(`ventas_${new Date().toLocaleDateString()}.pdf`);\n    };\n    return {\n      // Negocio\n      businessInfo,\n      showBusinessForm,\n      toggleBusinessForm,\n      onLogoChange,\n      saveBusinessInfo,\n      clearBusinessForm,\n      // Menú\n      newItem,\n      menuItems,\n      showMenuForm,\n      isEditing,\n      toggleMenuForm,\n      onImageChange,\n      saveMenuItem,\n      editMenuItem,\n      deleteMenuItem,\n      sellMenuItem,\n      clearMenuForm,\n      // Ventas\n      soldItems,\n      totalSales,\n      searchTerm,\n      sortBy,\n      categoryFilter,\n      filteredSoldItems,\n      formatPrice,\n      selectedChartType,\n      // Métodos de exportación\n      exportToExcel,\n      exportToPDF,\n      // Compartir\n      shareLink,\n      showCopiedMessage,\n      shareByWhatsApp,\n      copyLink,\n      // Estado de migración\n      migrationStatus\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","saveMenu","formatShareLinkMessage","SalesChartComponent","saveAs","XLSX","jsPDF","getMenuItems","saveMenuItems","getBusinessInfo","saveBusinessInfo","getSoldItems","saveSoldItems","deleteMenuItem","migrateFromLocalStorage","compressImage","name","components","setup","businessInfo","description","contact","address","logo","showBusinessForm","newItem","price","includesDrink","availableQuantity","image","id","menuItems","showMenuForm","isEditing","editingIndex","soldItems","searchTerm","sortBy","categoryFilter","selectedChartType","shareLink","showCopiedMessage","migrationStatus","inProgress","completed","message","dbBusinessInfo","value","hasLocalData","localStorage","getItem","migrationResult","length","error","console","toggleBusinessForm","onLogoChange","event","file","target","files","reader","FileReader","onload","e","compressedLogo","result","readAsDataURL","alert","clearBusinessForm","confirm","toggleMenuForm","clearMenuForm","onImageChange","compressedImage","saveMenuItem","Date","now","Math","random","toString","substring","index","findIndex","item","push","editMenuItem","soldItem","find","sold","quantity","splice","sellMenuItem","shareByWhatsApp","menuId","url","window","location","origin","whatsappUrl","encodeURIComponent","open","copyLink","navigator","clipboard","writeText","then","setTimeout","catch","err","totalSales","reduce","total","formatPrice","toFixed","filteredSoldItems","items","term","toLowerCase","filter","includes","sort","a","b","localeCompare","exportToExcel","data","map","ws","utils","aoa_to_sheet","wb","book_new","book_append_sheet","excelBuffer","write","bookType","type","blob","Blob","toLocaleDateString","exportToPDF","doc","setFontSize","text","tableData","autoTable","head","body","foot","startY","theme","headStyles","fillColor","footStyles","textColor","fontStyle","save"],"sources":["F:\\Driver google\\VUE.JS-2\\temp\\websap\\src\\components\\MenuComponent.vue"],"sourcesContent":["<template>\r\n  <div class=\"menu-container\">\r\n    <!-- Mensaje de migración de datos -->\r\n    <div v-if=\"migrationStatus.inProgress || migrationStatus.completed\" class=\"migration-status\" :class=\"{ 'completed': migrationStatus.completed }\">\r\n      <div class=\"migration-message\">\r\n        <span v-if=\"migrationStatus.inProgress\" class=\"loading-spinner\"></span>\r\n        {{ migrationStatus.message }}\r\n      </div>\r\n    </div>\r\n  \r\n    <!-- SECCIÓN 1: INFORMACIÓN DEL NEGOCIO -->\r\n    <section class=\"business-info-section\">\r\n      <h2>Información del Negocio</h2>\r\n      <button @click=\"toggleBusinessForm\" class=\"toggle-button\">\r\n        {{ showBusinessForm ? 'Ocultar Formulario' : 'Mostrar Formulario' }}\r\n      </button>\r\n\r\n      <div v-if=\"showBusinessForm\" class=\"business-form\">\r\n        <form @submit.prevent=\"saveBusinessInfo\">\r\n          <div>\r\n            <label for=\"business-name\">Nombre del Restaurante:</label>\r\n            <input type=\"text\" id=\"business-name\" v-model=\"businessInfo.name\" required>\r\n          </div>\r\n          <div>\r\n            <label for=\"business-description\">Descripción:</label>\r\n            <textarea id=\"business-description\" v-model=\"businessInfo.description\"></textarea>\r\n          </div>\r\n          <div>\r\n            <label for=\"business-contact\">Contacto:</label>\r\n            <input type=\"text\" id=\"business-contact\" v-model=\"businessInfo.contact\">\r\n          </div>\r\n          <div>\r\n            <label for=\"business-address\">Dirección:</label>\r\n            <input type=\"text\" id=\"business-address\" v-model=\"businessInfo.address\">\r\n          </div>\r\n          <div>\r\n            <label for=\"business-logo\">Logo:</label>\r\n            <input type=\"file\" id=\"business-logo\" @change=\"onLogoChange\">\r\n            <img v-if=\"businessInfo.logo\" :src=\"businessInfo.logo\" alt=\"Logo\" style=\"max-width: 100px; margin-top: 10px;\">\r\n          </div>\r\n          <div class=\"button-group\">\r\n            <button type=\"submit\" class=\"save-button\">Guardar</button>\r\n            <button type=\"button\" @click=\"clearBusinessForm\" class=\"clear-button\">Limpiar</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <div v-if=\"businessInfo.name\" class=\"business-preview\">\r\n        <h3>Información Guardada</h3>\r\n        <img v-if=\"businessInfo.logo\" :src=\"businessInfo.logo\" alt=\"Logo\" style=\"max-width: 100px;\">\r\n        <h4>{{ businessInfo.name }}</h4>\r\n        <p>{{ businessInfo.description }}</p>\r\n        <p><strong>Contacto:</strong> {{ businessInfo.contact }}</p>\r\n        <p><strong>Dirección:</strong> {{ businessInfo.address }}</p>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- SECCIÓN 2: MENÚ DEL RESTAURANTE -->\r\n    <section class=\"menu-section\">\r\n      <h2>Menú del Restaurante</h2>\r\n      <button @click=\"toggleMenuForm\" class=\"toggle-button\">\r\n        {{ showMenuForm ? 'Ocultar Formulario' : 'Mostrar Formulario' }}\r\n      </button>\r\n\r\n      <!-- Formulario para agregar/editar platos -->\r\n      <div v-if=\"showMenuForm\" class=\"menu-form\">\r\n        <form @submit.prevent=\"saveMenuItem\">\r\n          <div>\r\n            <label for=\"item-name\">Nombre del plato:</label>\r\n            <input type=\"text\" id=\"item-name\" v-model=\"newItem.name\" required>\r\n          </div>\r\n          <div>\r\n            <label for=\"item-description\">Descripción del plato:</label>\r\n            <textarea id=\"item-description\" v-model=\"newItem.description\"></textarea>\r\n          </div>\r\n          <div>\r\n            <label for=\"item-price\">Precio:</label>\r\n            <input type=\"number\" id=\"item-price\" v-model.number=\"newItem.price\" min=\"0\" step=\"0.01\" required>\r\n          </div>\r\n          <div>\r\n            <label for=\"item-drinks\">Incluye refresco:</label>\r\n            <select id=\"item-drinks\" v-model=\"newItem.includesDrink\">\r\n              <option :value=\"true\">Sí</option>\r\n              <option :value=\"false\">No</option>\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label for=\"item-quantity\">Cantidad disponible:</label>\r\n            <input type=\"number\" id=\"item-quantity\" v-model.number=\"newItem.availableQuantity\" min=\"0\" required>\r\n          </div>\r\n          <div>\r\n            <label for=\"item-image\">Imagen del plato:</label>\r\n            <input type=\"file\" id=\"item-image\" @change=\"onImageChange\">\r\n            <img v-if=\"newItem.image\" :src=\"newItem.image\" alt=\"Imagen del plato\" style=\"max-width: 100px; margin-top: 10px;\">\r\n          </div>\r\n          <div class=\"button-group\">\r\n            <button type=\"submit\" class=\"save-button\">{{ isEditing ? 'Actualizar' : 'Crear' }}</button>\r\n            <button type=\"button\" @click=\"clearMenuForm\" class=\"clear-button\">Cancelar</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <!-- Lista de platos -->\r\n      <div class=\"menu-items-list\">\r\n        <div v-for=\"(item, index) in menuItems\" :key=\"index\" class=\"menu-item-card\">\r\n          <div class=\"menu-item-image-container\">\r\n            <img v-if=\"item.image\" :src=\"item.image\" alt=\"Plato\" class=\"menu-item-image\">\r\n            <div v-else class=\"no-image-placeholder\">Sin imagen</div>\r\n          </div>\r\n          <div class=\"menu-item-details\">\r\n            <h3>{{ item.name }}</h3>\r\n            <p>{{ item.description }}</p>\r\n            <p><strong>Precio:</strong> ${{ item.price }}</p>\r\n            <p><strong>Incluye refresco:</strong> {{ item.includesDrink ? 'Sí' : 'No' }}</p>\r\n            <p><strong>Disponibles:</strong> {{ item.availableQuantity }}</p>\r\n          </div>\r\n          <div class=\"menu-item-actions\">\r\n            <button @click=\"editMenuItem(index)\" class=\"edit-button\">Editar</button>\r\n            <button @click=\"sellMenuItem(index)\" class=\"sell-button\">Vender</button>\r\n            <button @click=\"deleteMenuItem(index)\" class=\"delete-button\">Eliminar</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- SECCIÓN 3: INVENTARIO DE PLATOS VENDIDOS -->\r\n    <section class=\"inventory-section\">\r\n      <h2>Inventario de Platos Vendidos</h2>\r\n      \r\n      <div class=\"inventory-controls\">\r\n        <div class=\"inventory-search-container\">\r\n          <input \r\n            v-model=\"searchTerm\" \r\n            placeholder=\"Buscar plato...\" \r\n            class=\"inventory-search-input\"\r\n          />\r\n        </div>\r\n        \r\n        <div class=\"inventory-filters\">\r\n          <select v-model=\"sortBy\" class=\"inventory-filter\">\r\n            <option value=\"\">Ordenar por</option>\r\n            <option value=\"name\">Nombre</option>\r\n            <option value=\"quantity-desc\">Más vendidos</option>\r\n            <option value=\"quantity-asc\">Menos vendidos</option>\r\n            <option value=\"price-desc\">Mayor precio</option>\r\n            <option value=\"price-asc\">Menor precio</option>\r\n          </select>\r\n          \r\n          <select v-model=\"categoryFilter\" class=\"inventory-filter\">\r\n            <option value=\"\">Todas las categorías</option>\r\n            <option value=\"drinks\">Con refresco</option>\r\n            <option value=\"nodrinks\">Sin refresco</option>\r\n          </select>\r\n        </div>\r\n        \r\n        <div class=\"inventory-actions\">\r\n          <button @click=\"exportToExcel\" class=\"export-button excel\">\r\n            <span class=\"action-icon\">📊</span> Exportar a Excel\r\n          </button>\r\n          <button @click=\"exportToPDF\" class=\"export-button pdf\">\r\n            <span class=\"action-icon\">📄</span> Exportar a PDF\r\n          </button>\r\n          <select v-model=\"selectedChartType\" class=\"inventory-filter\">\r\n            <option value=\"bar\">Gráfico de barras</option>\r\n            <option value=\"line\">Gráfico de líneas</option>\r\n            <option value=\"none\">Sin gráfico</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- Gráfico de ventas -->\r\n      <SalesChartComponent \r\n        v-if=\"selectedChartType !== 'none' && filteredSoldItems.length > 0\" \r\n        :chart-type=\"selectedChartType\" \r\n        :items=\"filteredSoldItems\"\r\n        class=\"sales-chart\"\r\n      />\r\n      \r\n      <div class=\"inventory-table\">\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Nombre del Plato</th>\r\n              <th>Categoría</th>\r\n              <th>Cantidad Vendida</th>\r\n              <th>Precio por Unidad</th>\r\n              <th>Subtotal</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"(item, index) in filteredSoldItems\" :key=\"index\" :class=\"{ 'alternate-row': index % 2 !== 0 }\">\r\n              <td>{{ item.name }}</td>\r\n              <td>{{ item.includesDrink ? 'Con refresco' : 'Sin refresco' }}</td>\r\n              <td>{{ item.quantity }}</td>\r\n              <td>${{ formatPrice(item.price) }}</td>\r\n              <td>${{ formatPrice(item.quantity * item.price) }}</td>\r\n            </tr>\r\n          </tbody>\r\n          <tfoot>\r\n            <tr>\r\n              <td colspan=\"4\"><strong>Total Ventas</strong></td>\r\n              <td><strong>${{ formatPrice(totalSales) }}</strong></td>\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- SECCIÓN 4: COMPARTIR MENU -->\r\n    <section class=\"share-section\">\r\n      <h2>Compartir Menú</h2>\r\n      <div class=\"share-buttons\">\r\n        <button @click=\"shareByWhatsApp\" class=\"whatsapp-button\">\r\n          <span class=\"emoji\">📱</span> Compartir en WhatsApp\r\n        </button>\r\n        <button @click=\"copyLink\" class=\"copy-button\">\r\n          <span class=\"emoji\">📋</span> Copiar Enlace\r\n        </button>\r\n      </div>\r\n      <p v-if=\"showCopiedMessage\" class=\"copied-message\">¡Enlace copiado al portapapeles!</p>\r\n      <p v-if=\"shareLink\" class=\"share-link\">\r\n        Enlace para compartir: <a :href=\"shareLink\" target=\"_blank\">{{ shareLink }}</a>\r\n      </p>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted } from 'vue';\r\nimport { saveMenu } from '../services/menuService';\r\nimport { formatShareLinkMessage } from '../utils/messageFormatter';\r\nimport SalesChartComponent from './SalesChartComponent.vue';\r\nimport { saveAs } from 'file-saver';\r\nimport * as XLSX from 'xlsx';\r\nimport { jsPDF } from 'jspdf';\r\nimport 'jspdf-autotable';\r\nimport { \r\n  getMenuItems, \r\n  saveMenuItems, \r\n  getBusinessInfo, \r\n  saveBusinessInfo, \r\n  getSoldItems, \r\n  saveSoldItems,\r\n  deleteMenuItem,\r\n  migrateFromLocalStorage,\r\n  compressImage\r\n} from '../services/storageService';\r\n\r\nexport default {\r\n  name: 'MenuComponent',\r\n  components: {\r\n    SalesChartComponent\r\n  },\r\n  setup() {\r\n    // Estado para información del negocio\r\n    const businessInfo = ref({\r\n      name: '',\r\n      description: '',\r\n      contact: '',\r\n      address: '',\r\n      logo: ''\r\n    });\r\n    const showBusinessForm = ref(false);\r\n\r\n    // Estado para platos del menú\r\n    const newItem = ref({\r\n      name: '',\r\n      description: '',\r\n      price: 0,\r\n      includesDrink: false,\r\n      availableQuantity: 0,\r\n      image: '',\r\n      id: null\r\n    });\r\n    const menuItems = ref([]);\r\n    const showMenuForm = ref(false);\r\n    const isEditing = ref(false);\r\n    const editingIndex = ref(-1);\r\n\r\n    // Estado para ventas e inventario\r\n    const soldItems = ref([]);\r\n    const searchTerm = ref('');\r\n    const sortBy = ref('');\r\n    const categoryFilter = ref('');\r\n    const selectedChartType = ref('bar');\r\n\r\n    // Estado para compartir\r\n    const shareLink = ref('');\r\n    const showCopiedMessage = ref(false);\r\n    \r\n    // Estado para mostrar progreso de migración\r\n    const migrationStatus = ref({\r\n      inProgress: false,\r\n      completed: false,\r\n      message: ''\r\n    });\r\n\r\n    // Cargar datos guardados\r\n    onMounted(async () => {\r\n      try {\r\n        // Primero intentar cargar desde IndexedDB\r\n        const dbBusinessInfo = await getBusinessInfo();\r\n        if (dbBusinessInfo && dbBusinessInfo.name) {\r\n          businessInfo.value = dbBusinessInfo;\r\n        } else {\r\n          // Si no hay datos en IndexedDB, intentar migrar desde localStorage\r\n          const hasLocalData = localStorage.getItem('businessInfo') || \r\n                             localStorage.getItem('menuItems') ||\r\n                             localStorage.getItem('soldItems');\r\n          \r\n          if (hasLocalData) {\r\n            migrationStatus.value.inProgress = true;\r\n            migrationStatus.value.message = 'Migrando datos desde localStorage a IndexedDB...';\r\n            \r\n            const migrationResult = await migrateFromLocalStorage();\r\n            \r\n            if (migrationResult) {\r\n              migrationStatus.value.completed = true;\r\n              migrationStatus.value.message = 'Migración completada exitosamente';\r\n              \r\n              // Recargar datos desde IndexedDB\r\n              businessInfo.value = await getBusinessInfo();\r\n              menuItems.value = await getMenuItems();\r\n              soldItems.value = await getSoldItems() || [];\r\n            } else {\r\n              migrationStatus.value.message = 'Error en la migración de datos';\r\n            }\r\n            \r\n            migrationStatus.value.inProgress = false;\r\n          }\r\n        }\r\n\r\n        // Cargar menú y ventas desde IndexedDB\r\n        if (!menuItems.value.length) {\r\n          menuItems.value = await getMenuItems() || [];\r\n        }\r\n\r\n        if (!soldItems.value.length) {\r\n          soldItems.value = await getSoldItems() || [];\r\n        }\r\n      } catch (error) {\r\n        console.error('Error al cargar datos:', error);\r\n      }\r\n    });\r\n\r\n    // Métodos para información del negocio\r\n    const toggleBusinessForm = () => {\r\n      showBusinessForm.value = !showBusinessForm.value;\r\n    };\r\n\r\n    const onLogoChange = async (event) => {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        const reader = new FileReader();\r\n        reader.onload = async (e) => {\r\n          // Comprimir la imagen antes de guardarla\r\n          const compressedLogo = await compressImage(e.target.result);\r\n          businessInfo.value.logo = compressedLogo;\r\n        };\r\n        reader.readAsDataURL(file);\r\n      }\r\n    };\r\n\r\n    const saveBusinessInfo = async () => {\r\n      try {\r\n        await saveBusinessInfo(businessInfo.value);\r\n        alert('Información del negocio guardada con éxito!');\r\n      } catch (error) {\r\n        console.error('Error al guardar información del negocio:', error);\r\n        alert('Error al guardar la información. Por favor, intenta nuevamente.');\r\n      }\r\n    };\r\n\r\n    const clearBusinessForm = () => {\r\n      if (confirm('¿Estás seguro de querer limpiar el formulario?')) {\r\n        businessInfo.value = {\r\n          name: '',\r\n          description: '',\r\n          contact: '',\r\n          address: '',\r\n          logo: ''\r\n        };\r\n      }\r\n    };\r\n\r\n    // Métodos para platos del menú\r\n    const toggleMenuForm = () => {\r\n      showMenuForm.value = !showMenuForm.value;\r\n      if (!showMenuForm.value) {\r\n        clearMenuForm();\r\n      }\r\n    };\r\n\r\n    const onImageChange = async (event) => {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        const reader = new FileReader();\r\n        reader.onload = async (e) => {\r\n          // Comprimir la imagen antes de guardarla\r\n          const compressedImage = await compressImage(e.target.result);\r\n          newItem.value.image = compressedImage;\r\n        };\r\n        reader.readAsDataURL(file);\r\n      }\r\n    };\r\n\r\n    const saveMenuItem = async () => {\r\n      try {\r\n        if (!newItem.value.id) {\r\n          newItem.value.id = Date.now() + Math.random().toString(36).substring(2, 10);\r\n        }\r\n        \r\n        if (isEditing.value) {\r\n          // Actualizar plato existente\r\n          const index = menuItems.value.findIndex(item => item.id === newItem.value.id);\r\n          if (index !== -1) {\r\n            menuItems.value[index] = { ...newItem.value };\r\n          }\r\n          isEditing.value = false;\r\n          editingIndex.value = -1;\r\n          alert('Plato actualizado con éxito!');\r\n        } else {\r\n          // Crear nuevo plato\r\n          menuItems.value.push({ ...newItem.value });\r\n          alert('Plato creado con éxito!');\r\n        }\r\n        \r\n        // Guardar en IndexedDB\r\n        await saveMenuItems(menuItems.value);\r\n        \r\n        // Limpiar formulario\r\n        clearMenuForm();\r\n      } catch (error) {\r\n        console.error('Error al guardar el plato:', error);\r\n        alert('Error al guardar el plato. Por favor, intenta nuevamente.');\r\n      }\r\n    };\r\n\r\n    const editMenuItem = (index) => {\r\n      newItem.value = { ...menuItems.value[index] };\r\n      isEditing.value = true;\r\n      editingIndex.value = index;\r\n      showMenuForm.value = true;\r\n    };\r\n\r\n    const deleteMenuItem = async (index) => {\r\n      if (confirm('¿Estás seguro de querer eliminar este plato?')) {\r\n        try {\r\n          const item = menuItems.value[index];\r\n          \r\n          // Agregar a vendidos antes de eliminar (simulación)\r\n          const soldItem = soldItems.value.find(sold => sold.name === item.name);\r\n          \r\n          if (soldItem) {\r\n            soldItem.quantity += 1;\r\n          } else {\r\n            soldItems.value.push({\r\n              name: item.name,\r\n              quantity: 1,\r\n              price: item.price,\r\n              includesDrink: item.includesDrink\r\n            });\r\n          }\r\n          \r\n          // Guardar vendidos en IndexedDB\r\n          await saveSoldItems(soldItems.value);\r\n          \r\n          // Eliminar del menú en IndexedDB\r\n          if (item.id) {\r\n            await deleteMenuItem(item.id);\r\n          }\r\n          \r\n          // Eliminar del array local\r\n          menuItems.value.splice(index, 1);\r\n        } catch (error) {\r\n          console.error('Error al eliminar el plato:', error);\r\n          alert('Error al eliminar el plato. Por favor, intenta nuevamente.');\r\n        }\r\n      }\r\n    };\r\n\r\n    const sellMenuItem = async (index) => {\r\n      try {\r\n        const item = menuItems.value[index];\r\n        \r\n        // Verificar si hay unidades disponibles\r\n        if (item.availableQuantity <= 0) {\r\n          alert('No hay unidades disponibles de este plato.');\r\n          return;\r\n        }\r\n        \r\n        // Reducir la cantidad disponible\r\n        item.availableQuantity--;\r\n        \r\n        // Actualizar lista de platos vendidos\r\n        const soldItem = soldItems.value.find(sold => sold.name === item.name);\r\n        \r\n        if (soldItem) {\r\n          soldItem.quantity += 1;\r\n        } else {\r\n          soldItems.value.push({\r\n            name: item.name,\r\n            quantity: 1,\r\n            price: item.price,\r\n            includesDrink: item.includesDrink\r\n          });\r\n        }\r\n        \r\n        // Guardar cambios en IndexedDB\r\n        await saveMenuItems(menuItems.value);\r\n        await saveSoldItems(soldItems.value);\r\n      } catch (error) {\r\n        console.error('Error al vender el plato:', error);\r\n        alert('Error al procesar la venta. Por favor, intenta nuevamente.');\r\n      }\r\n    };\r\n\r\n    const clearMenuForm = () => {\r\n      newItem.value = {\r\n        name: '',\r\n        description: '',\r\n        price: 0,\r\n        includesDrink: false,\r\n        availableQuantity: 0,\r\n        image: '',\r\n        id: null\r\n      };\r\n      isEditing.value = false;\r\n      editingIndex.value = -1;\r\n    };\r\n\r\n    // Métodos para compartir\r\n    const shareByWhatsApp = () => {\r\n      const menuId = saveMenu(menuItems.value);\r\n      const url = `${window.location.origin}/menu/${menuId}`;\r\n      shareLink.value = url;\r\n      \r\n      const message = formatShareLinkMessage(url, businessInfo.value.name);\r\n      const whatsappUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(message)}`;\r\n      window.open(whatsappUrl, '_blank');\r\n    };\r\n\r\n    const copyLink = () => {\r\n      const menuId = saveMenu(menuItems.value);\r\n      const url = `${window.location.origin}/menu/${menuId}`;\r\n      shareLink.value = url;\r\n      \r\n      navigator.clipboard.writeText(url)\r\n        .then(() => {\r\n          showCopiedMessage.value = true;\r\n          setTimeout(() => {\r\n            showCopiedMessage.value = false;\r\n          }, 3000);\r\n        })\r\n        .catch(err => {\r\n          console.error('Error al copiar:', err);\r\n          alert('No se pudo copiar el enlace. Por favor, inténtalo de nuevo.');\r\n        });\r\n    };\r\n\r\n    // Computados\r\n    const totalSales = computed(() => {\r\n      return soldItems.value.reduce((total, item) => {\r\n        return total + (item.quantity * item.price);\r\n      }, 0);\r\n    });\r\n\r\n    // Formateo de precios\r\n    const formatPrice = (price) => {\r\n      return price.toFixed(2);\r\n    };\r\n    \r\n    // Filtrado de platos vendidos\r\n    const filteredSoldItems = computed(() => {\r\n      let items = soldItems.value;\r\n      \r\n      // Filtrar por término de búsqueda\r\n      if (searchTerm.value) {\r\n        const term = searchTerm.value.toLowerCase();\r\n        items = items.filter(item => item.name.toLowerCase().includes(term));\r\n      }\r\n      \r\n      // Filtrar por categoría\r\n      if (categoryFilter.value) {\r\n        if (categoryFilter.value === 'drinks') {\r\n          items = items.filter(item => item.includesDrink);\r\n        } else if (categoryFilter.value === 'nodrinks') {\r\n          items = items.filter(item => !item.includesDrink);\r\n        }\r\n      }\r\n      \r\n      // Ordenar según el criterio seleccionado\r\n      if (sortBy.value) {\r\n        items = [...items]; // Crear una copia para no mutar el original\r\n        \r\n        switch (sortBy.value) {\r\n          case 'name':\r\n            items.sort((a, b) => a.name.localeCompare(b.name));\r\n            break;\r\n          case 'quantity-desc':\r\n            items.sort((a, b) => b.quantity - a.quantity);\r\n            break;\r\n          case 'quantity-asc':\r\n            items.sort((a, b) => a.quantity - b.quantity);\r\n            break;\r\n          case 'price-desc':\r\n            items.sort((a, b) => b.price - a.price);\r\n            break;\r\n          case 'price-asc':\r\n            items.sort((a, b) => a.price - b.price);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n      \r\n      return items;\r\n    });\r\n\r\n    // Exportar datos\r\n    const exportToExcel = () => {\r\n      // Crear un array con los datos a exportar\r\n      const data = [\r\n        ['Nombre del Plato', 'Categoría', 'Cantidad Vendida', 'Precio por Unidad', 'Subtotal'],\r\n        ...filteredSoldItems.value.map(item => [\r\n          item.name,\r\n          item.includesDrink ? 'Con refresco' : 'Sin refresco',\r\n          item.quantity,\r\n          `$${formatPrice(item.price)}`,\r\n          `$${formatPrice(item.quantity * item.price)}`\r\n        ]),\r\n        ['', '', '', 'Total', `$${formatPrice(totalSales.value)}`]\r\n      ];\r\n\r\n      // Crear un libro de Excel y una hoja de cálculo\r\n      const ws = XLSX.utils.aoa_to_sheet(data);\r\n      const wb = XLSX.utils.book_new();\r\n      XLSX.utils.book_append_sheet(wb, ws, 'Ventas');\r\n\r\n      // Generar el archivo Excel y descargarlo\r\n      const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\r\n      const blob = new Blob([excelBuffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\r\n      saveAs(blob, `ventas_${new Date().toLocaleDateString()}.xlsx`);\r\n    };\r\n\r\n    const exportToPDF = () => {\r\n      // Crear un nuevo documento PDF\r\n      const doc = new jsPDF();\r\n      \r\n      // Añadir título\r\n      doc.setFontSize(18);\r\n      doc.text('Reporte de Ventas', 14, 22);\r\n      doc.setFontSize(11);\r\n      doc.text(`Fecha: ${new Date().toLocaleDateString()}`, 14, 32);\r\n\r\n      // Crear la tabla con los datos\r\n      const tableData = filteredSoldItems.value.map(item => [\r\n        item.name,\r\n        item.includesDrink ? 'Con refresco' : 'Sin refresco',\r\n        item.quantity,\r\n        `$${formatPrice(item.price)}`,\r\n        `$${formatPrice(item.quantity * item.price)}`\r\n      ]);\r\n\r\n      // Añadir la tabla\r\n      doc.autoTable({\r\n        head: [['Nombre del Plato', 'Categoría', 'Cantidad Vendida', 'Precio por Unidad', 'Subtotal']],\r\n        body: tableData,\r\n        foot: [['', '', '', 'Total', `$${formatPrice(totalSales.value)}`]],\r\n        startY: 40,\r\n        theme: 'striped',\r\n        headStyles: { fillColor: [76, 175, 80] },\r\n        footStyles: { fillColor: [240, 240, 240], textColor: [0, 0, 0], fontStyle: 'bold' }\r\n      });\r\n\r\n      // Guardar el PDF de exportación\r\n      doc.save(`ventas_${new Date().toLocaleDateString()}.pdf`);\r\n    };\r\n\r\n    return {\r\n      // Negocio\r\n      businessInfo,\r\n      showBusinessForm,\r\n      toggleBusinessForm,\r\n      onLogoChange,\r\n      saveBusinessInfo,\r\n      clearBusinessForm,\r\n\r\n      // Menú\r\n      newItem,\r\n      menuItems,\r\n      showMenuForm,\r\n      isEditing,\r\n      toggleMenuForm,\r\n      onImageChange,\r\n      saveMenuItem,\r\n      editMenuItem,\r\n      deleteMenuItem,\r\n      sellMenuItem,\r\n      clearMenuForm,\r\n\r\n      // Ventas\r\n      soldItems,\r\n      totalSales,\r\n      searchTerm,\r\n      sortBy,\r\n      categoryFilter,\r\n      filteredSoldItems,\r\n      formatPrice,\r\n      selectedChartType,\r\n      \r\n      // Métodos de exportación\r\n      exportToExcel,\r\n      exportToPDF,\r\n\r\n      // Compartir\r\n      shareLink,\r\n      showCopiedMessage,\r\n      shareByWhatsApp,\r\n      copyLink,\r\n      \r\n      // Estado de migración\r\n      migrationStatus\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.menu-container {\r\n  padding: 20px;\r\n}\r\n\r\nsection {\r\n  margin-bottom: 40px;\r\n  padding: 20px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  background-color: #fff;\r\n}\r\n\r\nh2 {\r\n  color: #333;\r\n  font-size: 24px;\r\n  margin-bottom: 20px;\r\n  border-bottom: 2px solid #4CAF50;\r\n  padding-bottom: 10px;\r\n}\r\n\r\n.toggle-button {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  padding: 10px 15px;\r\n  margin-bottom: 20px;\r\n  cursor: pointer;\r\n  font-weight: bold;\r\n}\r\n\r\n.toggle-button:hover {\r\n  background-color: #45a049;\r\n}\r\n\r\nform {\r\n  display: grid;\r\n  gap: 15px;\r\n}\r\n\r\nlabel {\r\n  font-weight: bold;\r\n}\r\n\r\ninput, textarea, select {\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n}\r\n\r\n.button-group {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-top: 15px;\r\n}\r\n\r\n.save-button {\r\n  background-color: #007bff;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  padding: 10px 15px;\r\n  cursor: pointer;\r\n  flex: 1;\r\n}\r\n\r\n.save-button:hover {\r\n  background-color: #0056b3;\r\n}\r\n\r\n.clear-button {\r\n  background-color: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  padding: 10px 15px;\r\n  cursor: pointer;\r\n  flex: 1;\r\n}\r\n\r\n.clear-button:hover {\r\n  background-color: #c82333;\r\n}\r\n\r\n.business-preview {\r\n  margin-top: 20px;\r\n  padding: 15px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  background-color: #f9f9f9;\r\n}\r\n\r\n/* Mejoras a la lista de platos */\r\n.menu-items-list {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n  gap: 20px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.menu-item-card {\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  background-color: #f9f9f9;\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.menu-item-card:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0 5px 15px rgba(0,0,0,0.2);\r\n}\r\n\r\n.menu-item-image-container {\r\n  width: 100%;\r\n  height: 200px;\r\n  position: relative;\r\n  overflow: hidden;\r\n  background-color: #f0f0f0;\r\n}\r\n\r\n.menu-item-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n  transition: transform 0.5s ease;\r\n}\r\n\r\n.menu-item-card:hover .menu-item-image {\r\n  transform: scale(1.05);\r\n}\r\n\r\n.no-image-placeholder {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  color: #999;\r\n  font-style: italic;\r\n}\r\n\r\n.menu-item-details {\r\n  padding: 15px;\r\n  flex-grow: 1;\r\n}\r\n\r\n.menu-item-details h3 {\r\n  margin-top: 0;\r\n  color: #333;\r\n  font-size: 18px;\r\n}\r\n\r\n.menu-item-actions {\r\n  display: flex;\r\n  gap: 10px;\r\n  padding: 0 15px 15px;\r\n}\r\n\r\n.edit-button, .sell-button, .delete-button {\r\n  flex: 1;\r\n  padding: 8px 12px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-weight: bold;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.edit-button {\r\n  background-color: #ffc107;\r\n  color: #212529;\r\n}\r\n\r\n.edit-button:hover {\r\n  background-color: #e0a800;\r\n}\r\n\r\n.sell-button {\r\n  background-color: #28a745;\r\n  color: white;\r\n}\r\n\r\n.sell-button:hover {\r\n  background-color: #218838;\r\n}\r\n\r\n.delete-button {\r\n  background-color: #dc3545;\r\n  color: white;\r\n}\r\n\r\n.delete-button:hover {\r\n  background-color: #c82333;\r\n}\r\n\r\n/* Mejoras a la sección de inventario */\r\n.inventory-section {\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.inventory-controls {\r\n  margin-bottom: 20px;\r\n  display: grid;\r\n  gap: 15px;\r\n  grid-template-columns: 1fr;\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .inventory-controls {\r\n    grid-template-columns: repeat(3, 1fr);\r\n  }\r\n}\r\n\r\n.inventory-search-input {\r\n  width: 100%;\r\n  padding: 10px 15px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 16px;\r\n  box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);\r\n}\r\n\r\n.inventory-filters, \r\n.inventory-actions {\r\n  display: flex;\r\n  gap: 10px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.inventory-filter {\r\n  flex: 1;\r\n  min-width: 150px;\r\n  padding: 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  background-color: white;\r\n}\r\n\r\n.export-button {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8px;\r\n  padding: 10px 15px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.export-button.excel {\r\n  background-color: #1D6F42;\r\n  color: white;\r\n}\r\n\r\n.export-button.excel:hover {\r\n  background-color: #165235;\r\n}\r\n\r\n.export-button.pdf {\r\n  background-color: #F40F02;\r\n  color: white;\r\n}\r\n\r\n.export-button.pdf:hover {\r\n  background-color: #C90C02;\r\n}\r\n\r\n.action-icon {\r\n  font-size: 18px;\r\n}\r\n\r\n.sales-chart {\r\n  margin-bottom: 20px;\r\n  background-color: white;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\r\n}\r\n\r\n.inventory-table {\r\n  overflow-x: auto;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\nth, td {\r\n  padding: 15px;\r\n  text-align: left;\r\n}\r\n\r\nthead {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n}\r\n\r\nthead th {\r\n  font-weight: 600;\r\n}\r\n\r\ntbody tr:hover {\r\n  background-color: #f1f1f1;\r\n}\r\n\r\n.alternate-row {\r\n  background-color: #f9f9f9;\r\n}\r\n\r\ntfoot {\r\n  background-color: #e9e9e9;\r\n  font-weight: bold;\r\n}\r\n\r\ntfoot td {\r\n  padding: 12px 15px;\r\n}\r\n\r\n/* Mejoras a la sección de inventario */\r\n.inventory-section {\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.inventory-controls {\r\n  margin-bottom: 20px;\r\n  display: grid;\r\n  gap: 15px;\r\n  grid-template-columns: 1fr;\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .inventory-controls {\r\n    grid-template-columns: repeat(3, 1fr);\r\n  }\r\n}\r\n\r\n.inventory-search-input {\r\n  width: 100%;\r\n  padding: 10px 15px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 16px;\r\n  box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);\r\n}\r\n\r\n.inventory-filters, \r\n.inventory-actions {\r\n  display: flex;\r\n  gap: 10px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.inventory-filter {\r\n  flex: 1;\r\n  min-width: 150px;\r\n  padding: 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  background-color: white;\r\n}\r\n\r\n.export-button {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8px;\r\n  padding: 10px 15px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.export-button.excel {\r\n  background-color: #1D6F42;\r\n  color: white;\r\n}\r\n\r\n.export-button.excel:hover {\r\n  background-color: #165235;\r\n}\r\n\r\n.export-button.pdf {\r\n  background-color: #F40F02;\r\n  color: white;\r\n}\r\n\r\n.export-button.pdf:hover {\r\n  background-color: #C90C02;\r\n}\r\n\r\n.action-icon {\r\n  font-size: 18px;\r\n}\r\n\r\n.sales-chart {\r\n  margin-bottom: 20px;\r\n  background-color: white;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\r\n}\r\n\r\n.inventory-table {\r\n  overflow-x: auto;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\nth, td {\r\n  padding: 15px;\r\n  text-align: left;\r\n}\r\n\r\nthead {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n}\r\n\r\nthead th {\r\n  font-weight: 600;\r\n}\r\n\r\ntbody tr:hover {\r\n  background-color: #f1f1f1;\r\n}\r\n\r\n.alternate-row {\r\n  background-color: #f9f9f9;\r\n}\r\n\r\ntfoot {\r\n  background-color: #e9e9e9;\r\n  font-weight: bold;\r\n}\r\n\r\ntfoot td {\r\n  padding: 12px 15px;\r\n}\r\n\r\n.share-buttons {\r\n  display: flex;\r\n  gap: 15px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.whatsapp-button, .copy-button {\r\n  flex: 1;\r\n  padding: 12px 15px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-weight: bold;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.whatsapp-button {\r\n  background-color: #25D366;\r\n  color: white;\r\n}\r\n\r\n.whatsapp-button:hover {\r\n  background-color: #128C7E;\r\n}\r\n\r\n.copy-button {\r\n  background-color: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.copy-button:hover {\r\n  background-color: #5a6268;\r\n}\r\n\r\n.emoji {\r\n  font-size: 1.2em;\r\n  margin-right: 8px;\r\n}\r\n\r\n.copied-message {\r\n  color: #28a745;\r\n  margin-top: 10px;\r\n}\r\n\r\n.share-link {\r\n  margin-top: 15px;\r\n  padding: 10px;\r\n  background-color: #f8f9fa;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  word-break: break-all;\r\n}\r\n\r\n.migration-status {\r\n  position: fixed;\r\n  top: 20px;\r\n  right: 20px;\r\n  background-color: #ffeb3b;\r\n  color: #333;\r\n  padding: 15px 20px;\r\n  border-radius: 6px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\r\n  z-index: 1000;\r\n  max-width: 300px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.migration-status.completed {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n}\r\n\r\n.migration-message {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.loading-spinner {\r\n  display: inline-block;\r\n  width: 18px;\r\n  height: 18px;\r\n  border: 3px solid rgba(0, 0, 0, 0.1);\r\n  border-radius: 50%;\r\n  border-top-color: #333;\r\n  animation: spin 1s ease-in-out infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}