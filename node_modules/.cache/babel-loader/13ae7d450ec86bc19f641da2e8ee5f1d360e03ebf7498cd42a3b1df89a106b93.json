{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport { ref, onMounted, computed } from 'vue';\nimport { getBusinessInfo, saveBusinessInfo, getMenuItems, saveMenuItem, deleteMenuItem, updateItemAvailability } from '../services/storageService';\nexport default {\n  name: 'MenuComponent',\n  setup() {\n    // Estado para información del negocio\n    const businessInfo = ref({\n      id: 'business_info_1',\n      name: '',\n      description: '',\n      address: '',\n      contact: '',\n      logo: '',\n      paymentInfo: {\n        qrTitle: '',\n        qrImage: '',\n        nequiNumber: '',\n        nequiImage: ''\n      }\n    });\n    const showBusinessForm = ref(false);\n\n    // Estado para información de pago\n    const paymentInfo = ref({\n      qrTitle: '',\n      qrImage: '',\n      nequiNumber: '',\n      nequiImage: ''\n    });\n    const showPaymentForm = ref(false);\n\n    // Estado para gestión de inventario\n    const inventoryItems = ref([]);\n    const inventoryFilter = ref('');\n    const categoryFilter = ref('');\n    const showInventorySection = ref(false);\n    const showInventoryForm = ref(false);\n    const editingItem = ref(false);\n    const currentItem = ref({\n      id: '',\n      name: '',\n      description: '',\n      price: 0,\n      availableQuantity: 0,\n      category: ''\n    });\n\n    // Propiedad computada para filtrar items de inventario\n    const filteredInventoryItems = computed(() => {\n      const filter = inventoryFilter.value.toLowerCase();\n      const category = categoryFilter.value;\n      return inventoryItems.value.filter(item => {\n        const name = item.name.toLowerCase();\n        const categoryMatch = category === '' || item.category === category;\n        return name.includes(filter) && categoryMatch;\n      });\n    });\n\n    // Estado para categorías\n    const categories = ref([]);\n    const showCategoriesSection = ref(false);\n    const newCategory = ref({\n      name: '',\n      description: ''\n    });\n    const showAddCategoryForm = ref(false);\n\n    // Estado para notificaciones\n    const notification = ref({\n      show: false,\n      message: '',\n      type: 'success',\n      timeout: null\n    });\n\n    // Estado para indicadores de carga\n    const loading = ref({\n      businessInfo: false,\n      paymentInfo: false,\n      inventory: false,\n      categories: false\n    });\n\n    // Cargar datos al montar el componente\n    onMounted(async () => {\n      try {\n        // Cargar información del negocio desde IndexedDB\n        const storedBusinessInfo = await getBusinessInfo();\n        if (storedBusinessInfo) {\n          businessInfo.value = storedBusinessInfo;\n\n          // Si hay información de pago, cargarla en el estado correspondiente\n          if (storedBusinessInfo.paymentInfo) {\n            paymentInfo.value = {\n              qrTitle: storedBusinessInfo.paymentInfo.qrTitle || '',\n              qrImage: storedBusinessInfo.paymentInfo.qrImage || '',\n              nequiNumber: storedBusinessInfo.paymentInfo.nequiNumber || '',\n              nequiImage: storedBusinessInfo.paymentInfo.nequiImage || ''\n            };\n          }\n        }\n\n        // Cargar inventario y categorías\n        try {\n          const items = await getMenuItems();\n          if (items && items.length > 0) {\n            // Filtrar solo los elementos que son platos (no categorías)\n            inventoryItems.value = items.filter(item => !item.isCategory);\n          }\n\n          // Extraer categorías de los items (en este caso, asumimos que las categorías están marcadas con isCategory=true)\n          // o podemos usar una lista predefinida si no hay categorías en la base de datos\n          const cats = items ? items.filter(item => item.isCategory) : [];\n          if (cats && cats.length > 0) {\n            categories.value = cats;\n          } else {\n            // Categorías predefinidas si no hay ninguna en la base de datos\n            categories.value = [{\n              id: 'category_1',\n              name: 'Principal',\n              description: 'Platos principales'\n            }, {\n              id: 'category_2',\n              name: 'Entradas',\n              description: 'Entradas y aperitivos'\n            }, {\n              id: 'category_3',\n              name: 'Postres',\n              description: 'Postres y dulces'\n            }, {\n              id: 'category_4',\n              name: 'Bebidas',\n              description: 'Bebidas y refrescos'\n            }];\n          }\n        } catch (loadError) {\n          console.error('Error al cargar inventario y categorías:', loadError);\n          // No mostrar error al usuario, solo registrar en consola\n        }\n        console.log('Datos cargados correctamente');\n      } catch (error) {\n        console.error('Error al cargar datos:', error);\n        notification.value = {\n          show: true,\n          message: 'Error al cargar datos. Por favor, intente nuevamente.',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    });\n\n    // Función para sincronizar con el backend con manejo adecuado de conexiones\n    const syncWithBackend = async (data, type) => {\n      try {\n        const {\n          syncBusinessInfoWithBackend\n        } = await import('../services/menuService');\n\n        // Añadir metadatos para ayudar al backend a gestionar las conexiones eficientemente\n        const syncData = {\n          ...data,\n          syncType: type,\n          timestamp: new Date().toISOString(),\n          // Añadir un identificador único para cada solicitud\n          requestId: `sync_${type}_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`\n        };\n\n        // Realizar la sincronización\n        const result = await syncBusinessInfoWithBackend(syncData);\n        if (result && result.success) {\n          console.log(`Sincronización de ${type} completada con éxito`);\n          return {\n            success: true\n          };\n        } else {\n          console.error(`Error en sincronización de ${type}:`, result);\n          return {\n            success: false,\n            message: result?.message || `Error al sincronizar ${type}`\n          };\n        }\n      } catch (error) {\n        console.error(`Error en sincronización de ${type}:`, error);\n        return {\n          success: false,\n          message: error.message || `Error al sincronizar ${type}`\n        };\n      }\n    };\n\n    // Métodos para información del negocio\n    const toggleBusinessForm = () => {\n      showBusinessForm.value = !showBusinessForm.value;\n    };\n    const onLogoChange = event => {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = e => {\n          businessInfo.value.logo = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      }\n    };\n    const saveBusinessInfo = async () => {\n      try {\n        if (notification.value.timeout) {\n          clearTimeout(notification.value.timeout);\n        }\n\n        // Validar campos obligatorios\n        if (!businessInfo.value.name || businessInfo.value.name.trim() === '') {\n          notification.value = {\n            show: true,\n            message: 'El nombre del negocio es obligatorio',\n            type: 'error',\n            timeout: setTimeout(() => {\n              notification.value.show = false;\n            }, 3000)\n          };\n          return;\n        }\n\n        // Mostrar indicador de carga\n        loading.value.businessInfo = true;\n        await saveBusinessInfo(businessInfo.value);\n\n        // Sincronizar con el backend\n        try {\n          const syncResult = await syncWithBackend(businessInfo.value, 'business_info');\n          if (!syncResult.success) {\n            console.error('Error al sincronizar información del negocio:', syncResult.message);\n            notification.value = {\n              show: true,\n              message: 'Error al sincronizar información del negocio',\n              type: 'error',\n              timeout: setTimeout(() => {\n                notification.value.show = false;\n              }, 3000)\n            };\n          }\n        } catch (syncError) {\n          console.error('Error al sincronizar información del negocio:', syncError);\n          // No mostrar error al usuario, solo registrar en consola\n        }\n\n        // Ocultar indicador de carga\n        loading.value.businessInfo = false;\n        notification.value = {\n          show: true,\n          message: 'Información del negocio guardada con éxito!',\n          type: 'success',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      } catch (error) {\n        // Ocultar indicador de carga en caso de error\n        loading.value.businessInfo = false;\n        console.error('Error al guardar información del negocio:', error);\n        notification.value = {\n          show: true,\n          message: 'Error al guardar información del negocio',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    };\n    const clearBusinessForm = () => {\n      businessInfo.value = {\n        id: 'business_info_1',\n        name: '',\n        description: '',\n        address: '',\n        contact: '',\n        logo: '',\n        paymentInfo: {\n          qrTitle: '',\n          qrImage: '',\n          nequiNumber: '',\n          nequiImage: ''\n        }\n      };\n    };\n\n    // Métodos para información de pago\n    const togglePaymentForm = () => {\n      showPaymentForm.value = !showPaymentForm.value;\n    };\n    const onQRImageChange = event => {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = e => {\n          paymentInfo.value.qrImage = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      }\n    };\n    const onNequiImageChange = event => {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = e => {\n          paymentInfo.value.nequiImage = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      }\n    };\n    const savePaymentInfo = async () => {\n      try {\n        if (notification.value.timeout) {\n          clearTimeout(notification.value.timeout);\n        }\n\n        // Mostrar indicador de carga\n        loading.value.paymentInfo = true;\n        if (!businessInfo.value.paymentInfo) {\n          businessInfo.value.paymentInfo = {};\n        }\n        businessInfo.value.paymentInfo.qrTitle = paymentInfo.value.qrTitle;\n        businessInfo.value.paymentInfo.qrImage = paymentInfo.value.qrImage;\n        businessInfo.value.paymentInfo.nequiNumber = paymentInfo.value.nequiNumber;\n        businessInfo.value.paymentInfo.nequiImage = paymentInfo.value.nequiImage;\n        await saveBusinessInfo(businessInfo.value);\n\n        // Sincronizar con el backend\n        try {\n          const syncResult = await syncWithBackend(businessInfo.value, 'payment_info');\n          if (!syncResult.success) {\n            console.error('Error al sincronizar información de pago:', syncResult.message);\n            notification.value = {\n              show: true,\n              message: 'Error al sincronizar información de pago',\n              type: 'error',\n              timeout: setTimeout(() => {\n                notification.value.show = false;\n              }, 3000)\n            };\n          }\n        } catch (syncError) {\n          console.error('Error al sincronizar información de pago:', syncError);\n          // No mostrar error al usuario, solo registrar en consola\n        }\n\n        // Ocultar indicador de carga\n        loading.value.paymentInfo = false;\n        notification.value = {\n          show: true,\n          message: 'Información de pago guardada con éxito!',\n          type: 'success',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      } catch (error) {\n        // Ocultar indicador de carga en caso de error\n        loading.value.paymentInfo = false;\n        console.error('Error al guardar información de pago:', error);\n        notification.value = {\n          show: true,\n          message: 'Error al guardar información de pago',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    };\n    const clearPaymentForm = () => {\n      paymentInfo.value = {\n        qrTitle: '',\n        qrImage: '',\n        nequiNumber: '',\n        nequiImage: ''\n      };\n    };\n\n    // Métodos para gestión de inventario\n    const toggleInventorySection = () => {\n      showInventorySection.value = !showInventorySection.value;\n    };\n    const editInventoryItem = async item => {\n      try {\n        // Aquí se implementaría un modal o formulario para editar el item\n        console.log('Editando item:', item);\n\n        // Simulación de edición (en una implementación real, esto sería un formulario)\n        const updatedItem = {\n          ...item,\n          updatedAt: new Date().toISOString()\n        };\n\n        // Actualizar el item en el array local\n        const index = inventoryItems.value.findIndex(i => i.id === item.id);\n        if (index !== -1) {\n          inventoryItems.value[index] = updatedItem;\n        }\n\n        // Guardar en IndexedDB\n        await saveMenuItem(updatedItem);\n\n        // Sincronizar con el backend\n        try {\n          const syncResult = await syncWithBackend(updatedItem, 'inventory_item');\n          if (!syncResult.success) {\n            console.error('Error al sincronizar item de inventario:', syncResult.message);\n            notification.value = {\n              show: true,\n              message: 'Item actualizado localmente, pero hubo un error al sincronizar con el servidor',\n              type: 'warning',\n              timeout: setTimeout(() => {\n                notification.value.show = false;\n              }, 3000)\n            };\n          }\n        } catch (syncError) {\n          console.error('Error al sincronizar item de inventario:', syncError);\n          notification.value = {\n            show: true,\n            message: 'Item actualizado localmente, pero hubo un error al sincronizar con el servidor',\n            type: 'warning',\n            timeout: setTimeout(() => {\n              notification.value.show = false;\n            }, 3000)\n          };\n        }\n        notification.value = {\n          show: true,\n          message: 'Item actualizado con éxito!',\n          type: 'success',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      } catch (error) {\n        console.error('Error al editar item:', error);\n        notification.value = {\n          show: true,\n          message: 'Error al actualizar el item',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    };\n    const toggleItemAvailability = async item => {\n      try {\n        // Cambiar la disponibilidad del item\n        const updatedItem = {\n          ...item,\n          availableQuantity: item.availableQuantity > 0 ? 0 : 10,\n          updatedAt: new Date().toISOString()\n        };\n\n        // Actualizar el item en el array local\n        const index = inventoryItems.value.findIndex(i => i.id === item.id);\n        if (index !== -1) {\n          inventoryItems.value[index] = updatedItem;\n        }\n\n        // Guardar en IndexedDB\n        await saveMenuItem(updatedItem);\n\n        // Sincronizar con el backend\n        try {\n          const syncResult = await syncWithBackend(updatedItem, 'inventory_item');\n          if (!syncResult.success) {\n            console.error('Error al sincronizar disponibilidad del item:', syncResult.message);\n            notification.value = {\n              show: true,\n              message: 'Disponibilidad actualizada localmente, pero hubo un error al sincronizar con el servidor',\n              type: 'warning',\n              timeout: setTimeout(() => {\n                notification.value.show = false;\n              }, 3000)\n            };\n          }\n        } catch (syncError) {\n          console.error('Error al sincronizar disponibilidad del item:', syncError);\n          notification.value = {\n            show: true,\n            message: 'Disponibilidad actualizada localmente, pero hubo un error al sincronizar con el servidor',\n            type: 'warning',\n            timeout: setTimeout(() => {\n              notification.value.show = false;\n            }, 3000)\n          };\n        }\n        notification.value = {\n          show: true,\n          message: `Item ${updatedItem.availableQuantity > 0 ? 'disponible' : 'no disponible'} actualizado con éxito!`,\n          type: 'success',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      } catch (error) {\n        console.error('Error al cambiar disponibilidad:', error);\n        notification.value = {\n          show: true,\n          message: 'Error al actualizar la disponibilidad',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    };\n    const saveInventoryItem = async item => {\n      try {\n        if (notification.value.timeout) {\n          clearTimeout(notification.value.timeout);\n        }\n\n        // Mostrar indicador de carga\n        loading.value.inventory = true;\n\n        // Validar campos obligatorios\n        if (!item.name || item.name.trim() === '') {\n          loading.value.inventory = false;\n          notification.value = {\n            show: true,\n            message: 'El nombre del item es obligatorio',\n            type: 'error',\n            timeout: setTimeout(() => {\n              notification.value.show = false;\n            }, 3000)\n          };\n          return;\n        }\n        if (!item.price || isNaN(item.price) || item.price <= 0) {\n          loading.value.inventory = false;\n          notification.value = {\n            show: true,\n            message: 'El precio debe ser un número mayor que cero',\n            type: 'error',\n            timeout: setTimeout(() => {\n              notification.value.show = false;\n            }, 3000)\n          };\n          return;\n        }\n\n        // Actualizar la lista local\n        const index = inventoryItems.value.findIndex(i => i.id === item.id);\n        if (index !== -1) {\n          inventoryItems.value[index] = {\n            ...item\n          };\n        } else {\n          inventoryItems.value.push({\n            ...item\n          });\n        }\n\n        // Guardar en IndexedDB\n        await saveMenuItem(item);\n\n        // Sincronizar con el backend\n        try {\n          const syncResult = await syncWithBackend(item, 'inventory_item');\n          if (!syncResult.success) {\n            console.error('Error al sincronizar item de inventario:', syncResult.message);\n            loading.value.inventory = false;\n            notification.value = {\n              show: true,\n              message: 'Item guardado localmente, pero hubo un error al sincronizar con el servidor',\n              type: 'warning',\n              timeout: setTimeout(() => {\n                notification.value.show = false;\n              }, 3000)\n            };\n            return;\n          }\n        } catch (syncError) {\n          console.error('Error al sincronizar item de inventario:', syncError);\n          loading.value.inventory = false;\n          notification.value = {\n            show: true,\n            message: 'Item guardado localmente, pero hubo un error al sincronizar con el servidor',\n            type: 'warning',\n            timeout: setTimeout(() => {\n              notification.value.show = false;\n            }, 3000)\n          };\n          return;\n        }\n\n        // Ocultar indicador de carga\n        loading.value.inventory = false;\n        notification.value = {\n          show: true,\n          message: 'Item guardado con éxito!',\n          type: 'success',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n\n        // Limpiar el formulario y cerrar el modal\n        clearInventoryForm();\n        showInventoryForm.value = false;\n      } catch (error) {\n        // Ocultar indicador de carga en caso de error\n        loading.value.inventory = false;\n        console.error('Error al guardar item:', error);\n        notification.value = {\n          show: true,\n          message: 'Error al guardar el item',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    };\n\n    // Métodos para categorías\n    const toggleCategoriesSection = () => {\n      showCategoriesSection.value = !showCategoriesSection.value;\n    };\n    const editCategory = category => {\n      console.log('Editar categoría:', category);\n    };\n    const deleteCategory = async category => {\n      try {\n        if (notification.value.timeout) {\n          clearTimeout(notification.value.timeout);\n        }\n        if (confirm(`¿Está seguro de eliminar la categoría ${category.name}?`)) {\n          // Eliminar de la lista local\n          categories.value = categories.value.filter(c => c.id !== category.id);\n\n          // Eliminar de IndexedDB\n          await deleteMenuItem(category.id);\n\n          // Sincronizar con el backend\n          try {\n            const syncResult = await syncWithBackend({\n              categoryId: category.id\n            }, 'category_delete');\n            if (!syncResult.success) {\n              console.error('Error al sincronizar eliminación de categoría:', syncResult.message);\n              notification.value = {\n                show: true,\n                message: 'Categoría eliminada localmente, pero hubo un error al sincronizar con el servidor',\n                type: 'warning',\n                timeout: setTimeout(() => {\n                  notification.value.show = false;\n                }, 3000)\n              };\n            } else {\n              notification.value = {\n                show: true,\n                message: 'Categoría eliminada con éxito!',\n                type: 'success',\n                timeout: setTimeout(() => {\n                  notification.value.show = false;\n                }, 3000)\n              };\n            }\n          } catch (syncError) {\n            console.error('Error al sincronizar eliminación de categoría:', syncError);\n            notification.value = {\n              show: true,\n              message: 'Categoría eliminada localmente, pero hubo un error al sincronizar con el servidor',\n              type: 'warning',\n              timeout: setTimeout(() => {\n                notification.value.show = false;\n              }, 3000)\n            };\n          }\n        }\n      } catch (error) {\n        console.error('Error al eliminar categoría:', error);\n        notification.value = {\n          show: true,\n          message: 'Error al eliminar la categoría',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    };\n    const saveNewCategory = async () => {\n      try {\n        if (notification.value.timeout) {\n          clearTimeout(notification.value.timeout);\n        }\n\n        // Mostrar indicador de carga\n        loading.value.categories = true;\n\n        // Validar campos obligatorios\n        if (!newCategory.value.name || newCategory.value.name.trim() === '') {\n          loading.value.categories = false;\n          notification.value = {\n            show: true,\n            message: 'El nombre de la categoría es obligatorio',\n            type: 'error',\n            timeout: setTimeout(() => {\n              notification.value.show = false;\n            }, 3000)\n          };\n          return;\n        }\n\n        // Generar ID único para la nueva categoría\n        const newCategoryWithId = {\n          ...newCategory.value,\n          id: `category_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`,\n          isCategory: true\n        };\n\n        // Añadir a la lista local\n        categories.value.push(newCategoryWithId);\n\n        // Guardar en IndexedDB\n        await saveMenuItem({\n          ...newCategoryWithId,\n          isCategory: true\n        });\n\n        // Sincronizar con el backend\n        try {\n          const syncResult = await syncWithBackend(newCategoryWithId, 'category_update');\n          if (!syncResult.success) {\n            console.error('Error al sincronizar categoría:', syncResult.message);\n            loading.value.categories = false;\n            notification.value = {\n              show: true,\n              message: 'Categoría guardada localmente, pero hubo un error al sincronizar con el servidor',\n              type: 'warning',\n              timeout: setTimeout(() => {\n                notification.value.show = false;\n              }, 3000)\n            };\n            return;\n          }\n        } catch (syncError) {\n          console.error('Error al sincronizar categoría:', syncError);\n          loading.value.categories = false;\n          notification.value = {\n            show: true,\n            message: 'Categoría guardada localmente, pero hubo un error al sincronizar con el servidor',\n            type: 'warning',\n            timeout: setTimeout(() => {\n              notification.value.show = false;\n            }, 3000)\n          };\n          return;\n        }\n\n        // Ocultar indicador de carga\n        loading.value.categories = false;\n        notification.value = {\n          show: true,\n          message: 'Categoría guardada con éxito!',\n          type: 'success',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n\n        // Limpiar el formulario\n        clearCategoryForm();\n        showAddCategoryForm.value = false;\n      } catch (error) {\n        // Ocultar indicador de carga en caso de error\n        loading.value.categories = false;\n        console.error('Error al guardar categoría:', error);\n        notification.value = {\n          show: true,\n          message: 'Error al guardar la categoría',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    };\n    const clearCategoryForm = () => {\n      newCategory.value = {\n        name: '',\n        description: ''\n      };\n    };\n    const getCategoryName = categoryId => {\n      const category = categories.value.find(c => c.id === categoryId);\n      return category ? category.name : 'Sin categoría';\n    };\n    const onItemImageChange = event => {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = e => {\n          currentItem.value.image = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      }\n    };\n    const clearInventoryForm = () => {\n      currentItem.value = {\n        id: '',\n        name: '',\n        description: '',\n        price: 0,\n        availableQuantity: 0,\n        category: ''\n      };\n    };\n    return {\n      businessInfo,\n      showBusinessForm,\n      toggleBusinessForm,\n      onLogoChange,\n      saveBusinessInfo,\n      clearBusinessForm,\n      paymentInfo,\n      showPaymentForm,\n      togglePaymentForm,\n      onQRImageChange,\n      onNequiImageChange,\n      savePaymentInfo,\n      clearPaymentForm,\n      inventoryItems,\n      inventoryFilter,\n      categoryFilter,\n      showInventorySection,\n      toggleInventorySection,\n      editInventoryItem,\n      toggleItemAvailability,\n      filteredInventoryItems,\n      categories,\n      showCategoriesSection,\n      toggleCategoriesSection,\n      editCategory,\n      deleteCategory,\n      newCategory,\n      showAddCategoryForm,\n      saveNewCategory,\n      clearCategoryForm,\n      notification,\n      loading,\n      showInventoryForm,\n      editingItem,\n      currentItem,\n      onItemImageChange,\n      clearInventoryForm,\n      getCategoryName\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","getBusinessInfo","saveBusinessInfo","getMenuItems","saveMenuItem","deleteMenuItem","updateItemAvailability","name","setup","businessInfo","id","description","address","contact","logo","paymentInfo","qrTitle","qrImage","nequiNumber","nequiImage","showBusinessForm","showPaymentForm","inventoryItems","inventoryFilter","categoryFilter","showInventorySection","showInventoryForm","editingItem","currentItem","price","availableQuantity","category","filteredInventoryItems","filter","value","toLowerCase","item","categoryMatch","includes","categories","showCategoriesSection","newCategory","showAddCategoryForm","notification","show","message","type","timeout","loading","inventory","storedBusinessInfo","items","length","isCategory","cats","loadError","console","error","log","setTimeout","syncWithBackend","data","syncBusinessInfoWithBackend","syncData","syncType","timestamp","Date","toISOString","requestId","now","Math","random","toString","substring","result","success","toggleBusinessForm","onLogoChange","event","file","target","files","reader","FileReader","onload","e","readAsDataURL","clearTimeout","trim","syncResult","syncError","clearBusinessForm","togglePaymentForm","onQRImageChange","onNequiImageChange","savePaymentInfo","clearPaymentForm","toggleInventorySection","editInventoryItem","updatedItem","updatedAt","index","findIndex","i","toggleItemAvailability","saveInventoryItem","isNaN","push","clearInventoryForm","toggleCategoriesSection","editCategory","deleteCategory","confirm","c","categoryId","saveNewCategory","newCategoryWithId","clearCategoryForm","getCategoryName","find","onItemImageChange","image"],"sources":["F:\\Driver google\\VUE.JS-2\\VUE-JS\\websap\\src\\components\\MenuComponent.vue"],"sourcesContent":["<template>\n  <div class=\"menu-component\">\n    <!-- Sección de información del negocio -->\n    <div class=\"business-info-section\">\n      <h3>Información del Negocio</h3>\n      <button @click=\"toggleBusinessForm\" class=\"btn btn-primary\">\n        {{ showBusinessForm ? 'Cancelar' : 'Editar información' }}\n      </button>\n      \n      <div v-if=\"showBusinessForm\" class=\"business-form\">\n        <div class=\"form-group\">\n          <label>Nombre del negocio</label>\n          <input v-model=\"businessInfo.name\" type=\"text\" class=\"form-control\" />\n        </div>\n        <div class=\"form-group\">\n          <label>Descripción</label>\n          <textarea v-model=\"businessInfo.description\" class=\"form-control\"></textarea>\n        </div>\n        <div class=\"form-group\">\n          <label>Dirección</label>\n          <input v-model=\"businessInfo.address\" type=\"text\" class=\"form-control\" />\n        </div>\n        <div class=\"form-group\">\n          <label>Contacto</label>\n          <input v-model=\"businessInfo.contact\" type=\"text\" class=\"form-control\" />\n        </div>\n        <div class=\"form-group\">\n          <label>Logo</label>\n          <input type=\"file\" @change=\"onLogoChange\" accept=\"image/*\" />\n        </div>\n        <div class=\"form-actions\">\n          <button @click=\"saveBusinessInfo\" class=\"btn btn-success\" :disabled=\"loading.businessInfo\">\n            {{ loading.businessInfo ? 'Guardando...' : 'Guardar' }}\n          </button>\n          <button @click=\"clearBusinessForm\" class=\"btn btn-secondary\">\n            Limpiar\n          </button>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Sección de información de pago -->\n    <div class=\"payment-info-section\">\n      <h3>Forma de Pago</h3>\n      <button @click=\"togglePaymentForm\" class=\"btn btn-primary\">\n        {{ showPaymentForm ? 'Cancelar' : 'Editar información de pago' }}\n      </button>\n      \n      <div v-if=\"showPaymentForm\" class=\"payment-form\">\n        <div class=\"form-group\">\n          <label>Título QR</label>\n          <input v-model=\"paymentInfo.qrTitle\" type=\"text\" class=\"form-control\" />\n        </div>\n        <div class=\"form-group\">\n          <label>Imagen QR</label>\n          <input type=\"file\" @change=\"onQRImageChange\" accept=\"image/*\" />\n        </div>\n        <div class=\"form-group\">\n          <label>Número Nequi</label>\n          <input v-model=\"paymentInfo.nequiNumber\" type=\"text\" class=\"form-control\" />\n        </div>\n        <div class=\"form-group\">\n          <label>Imagen Nequi</label>\n          <input type=\"file\" @change=\"onNequiImageChange\" accept=\"image/*\" />\n        </div>\n        <div class=\"form-actions\">\n          <button @click=\"savePaymentInfo\" class=\"btn btn-success\" :disabled=\"loading.paymentInfo\">\n            {{ loading.paymentInfo ? 'Guardando...' : 'Guardar' }}\n          </button>\n          <button @click=\"clearPaymentForm\" class=\"btn btn-secondary\">Limpiar</button>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Sección de gestión de inventario -->\n    <div class=\"inventory-section\">\n      <h3>Gestión de Inventario</h3>\n      <button @click=\"toggleInventorySection\" class=\"btn btn-primary\">\n        {{ showInventorySection ? 'Ocultar inventario' : 'Mostrar inventario' }}\n      </button>\n      \n      <div v-if=\"showInventorySection\" class=\"inventory-content\">\n        <div class=\"inventory-filters\">\n          <input v-model=\"inventoryFilter\" type=\"text\" placeholder=\"Filtrar por nombre...\" class=\"form-control\" />\n          <select v-model=\"categoryFilter\" class=\"form-control\">\n            <option value=\"\">Todas las categorías</option>\n            <option v-for=\"category in categories\" :key=\"category.id\" :value=\"category.id\">\n              {{ category.name }}\n            </option>\n          </select>\n        </div>\n        \n        <div class=\"inventory-list\">\n          <div v-for=\"item in filteredInventoryItems\" :key=\"item.id\" class=\"inventory-item\">\n            <div class=\"item-info\">\n              <h4>{{ item.name }}</h4>\n              <p>{{ item.description }}</p>\n              <p>Precio: ${{ item.price }}</p>\n              <p>Disponible: {{ item.availableQuantity > 0 ? 'Sí' : 'No' }}</p>\n              <p>Cantidad: {{ item.availableQuantity }}</p>\n              <p v-if=\"item.category\">Categoría: {{ getCategoryName(item.category) }}</p>\n            </div>\n            <div class=\"item-actions\">\n              <button @click=\"editInventoryItem(item)\" class=\"btn btn-info\">Editar</button>\n              <button @click=\"toggleItemAvailability(item)\" class=\"btn\" :class=\"item.availableQuantity > 0 ? 'btn-warning' : 'btn-success'\">\n                {{ item.availableQuantity > 0 ? 'Marcar no disponible' : 'Marcar disponible' }}\n              </button>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Modal para añadir/editar item -->\n        <div v-if=\"showInventoryForm\" class=\"inventory-form-modal\">\n          <div class=\"inventory-form\">\n            <h3>{{ editingItem ? 'Editar' : 'Añadir' }} Item</h3>\n            <div class=\"form-group\">\n              <label>Nombre</label>\n              <input v-model=\"currentItem.name\" type=\"text\" class=\"form-control\" />\n            </div>\n            <div class=\"form-group\">\n              <label>Descripción</label>\n              <textarea v-model=\"currentItem.description\" class=\"form-control\"></textarea>\n            </div>\n            <div class=\"form-group\">\n              <label>Precio</label>\n              <input v-model.number=\"currentItem.price\" type=\"number\" class=\"form-control\" />\n            </div>\n            <div class=\"form-group\">\n              <label>Cantidad Disponible</label>\n              <input v-model.number=\"currentItem.availableQuantity\" type=\"number\" class=\"form-control\" />\n            </div>\n            <div class=\"form-group\">\n              <label>Categoría</label>\n              <select v-model=\"currentItem.category\" class=\"form-control\">\n                <option value=\"\">Sin categoría</option>\n                <option v-for=\"category in categories\" :key=\"category.id\" :value=\"category.id\">\n                  {{ category.name }}\n                </option>\n              </select>\n            </div>\n            <div class=\"form-group\">\n              <label>Imagen</label>\n              <input type=\"file\" @change=\"onItemImageChange\" accept=\"image/*\" />\n            </div>\n            <div class=\"form-actions\">\n              <button @click=\"saveInventoryItem(currentItem)\" class=\"btn btn-success\" :disabled=\"loading.inventory\">\n                {{ loading.inventory ? 'Guardando...' : 'Guardar' }}\n              </button>\n              <button @click=\"clearInventoryForm\" class=\"btn btn-secondary\">Cancelar</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Sección de categorías -->\n    <div class=\"categories-section\">\n      <h3>Categorías</h3>\n      <button @click=\"toggleCategoriesSection\" class=\"btn btn-primary\">\n        {{ showCategoriesSection ? 'Ocultar categorías' : 'Mostrar categorías' }}\n      </button>\n      \n      <div v-if=\"showCategoriesSection\" class=\"categories-content\">\n        <button @click=\"showAddCategoryForm = true\" class=\"btn btn-success\">Añadir Categoría</button>\n        \n        <div class=\"categories-list\">\n          <div v-for=\"category in categories\" :key=\"category.id\" class=\"category-item\">\n            <div class=\"category-info\">\n              <h4>{{ category.name }}</h4>\n              <p>{{ category.description }}</p>\n            </div>\n            <div class=\"category-actions\">\n              <button @click=\"editCategory(category)\" class=\"btn btn-info\">Editar</button>\n              <button @click=\"deleteCategory(category)\" class=\"btn btn-danger\">Eliminar</button>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Modal para añadir categoría -->\n        <div v-if=\"showAddCategoryForm\" class=\"category-form-modal\">\n          <div class=\"category-form\">\n            <h3>Añadir Categoría</h3>\n            <div class=\"form-group\">\n              <label>Nombre</label>\n              <input v-model=\"newCategory.name\" type=\"text\" class=\"form-control\" />\n            </div>\n            <div class=\"form-group\">\n              <label>Descripción</label>\n              <textarea v-model=\"newCategory.description\" class=\"form-control\"></textarea>\n            </div>\n            <div class=\"form-actions\">\n              <button @click=\"saveNewCategory\" class=\"btn btn-success\" :disabled=\"loading.categories\">\n                {{ loading.categories ? 'Guardando...' : 'Guardar' }}\n              </button>\n              <button @click=\"clearCategoryForm\" class=\"btn btn-secondary\">Cancelar</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Notificación -->\n    <div v-if=\"notification.show\" :class=\"['notification', notification.type]\">\n      {{ notification.message }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted, computed } from 'vue';\nimport { \n  getBusinessInfo, \n  saveBusinessInfo, \n  getMenuItems, \n  saveMenuItem, \n  deleteMenuItem, \n  updateItemAvailability \n} from '../services/storageService';\n\nexport default {\n  name: 'MenuComponent',\n  \n  setup() {\n    // Estado para información del negocio\n    const businessInfo = ref({\n      id: 'business_info_1',\n      name: '',\n      description: '',\n      address: '',\n      contact: '',\n      logo: '',\n      paymentInfo: {\n        qrTitle: '',\n        qrImage: '',\n        nequiNumber: '',\n        nequiImage: ''\n      }\n    });\n    \n    const showBusinessForm = ref(false);\n    \n    // Estado para información de pago\n    const paymentInfo = ref({\n      qrTitle: '',\n      qrImage: '',\n      nequiNumber: '',\n      nequiImage: ''\n    });\n    \n    const showPaymentForm = ref(false);\n    \n    // Estado para gestión de inventario\n    const inventoryItems = ref([]);\n    const inventoryFilter = ref('');\n    const categoryFilter = ref('');\n    const showInventorySection = ref(false);\n    const showInventoryForm = ref(false);\n    const editingItem = ref(false);\n    const currentItem = ref({\n      id: '',\n      name: '',\n      description: '',\n      price: 0,\n      availableQuantity: 0,\n      category: ''\n    });\n    \n    // Propiedad computada para filtrar items de inventario\n    const filteredInventoryItems = computed(() => {\n      const filter = inventoryFilter.value.toLowerCase();\n      const category = categoryFilter.value;\n      \n      return inventoryItems.value.filter(item => {\n        const name = item.name.toLowerCase();\n        const categoryMatch = category === '' || item.category === category;\n        \n        return name.includes(filter) && categoryMatch;\n      });\n    });\n    \n    // Estado para categorías\n    const categories = ref([]);\n    const showCategoriesSection = ref(false);\n    const newCategory = ref({\n      name: '',\n      description: ''\n    });\n    const showAddCategoryForm = ref(false);\n    \n    // Estado para notificaciones\n    const notification = ref({\n      show: false,\n      message: '',\n      type: 'success',\n      timeout: null\n    });\n    \n    // Estado para indicadores de carga\n    const loading = ref({\n      businessInfo: false,\n      paymentInfo: false,\n      inventory: false,\n      categories: false\n    });\n    \n    // Cargar datos al montar el componente\n    onMounted(async () => {\n      try {\n        // Cargar información del negocio desde IndexedDB\n        const storedBusinessInfo = await getBusinessInfo();\n        \n        if (storedBusinessInfo) {\n          businessInfo.value = storedBusinessInfo;\n          \n          // Si hay información de pago, cargarla en el estado correspondiente\n          if (storedBusinessInfo.paymentInfo) {\n            paymentInfo.value = {\n              qrTitle: storedBusinessInfo.paymentInfo.qrTitle || '',\n              qrImage: storedBusinessInfo.paymentInfo.qrImage || '',\n              nequiNumber: storedBusinessInfo.paymentInfo.nequiNumber || '',\n              nequiImage: storedBusinessInfo.paymentInfo.nequiImage || ''\n            };\n          }\n        }\n        \n        // Cargar inventario y categorías\n        try {\n          const items = await getMenuItems();\n          if (items && items.length > 0) {\n            // Filtrar solo los elementos que son platos (no categorías)\n            inventoryItems.value = items.filter(item => !item.isCategory);\n          }\n          \n          // Extraer categorías de los items (en este caso, asumimos que las categorías están marcadas con isCategory=true)\n          // o podemos usar una lista predefinida si no hay categorías en la base de datos\n          const cats = items ? items.filter(item => item.isCategory) : [];\n          if (cats && cats.length > 0) {\n            categories.value = cats;\n          } else {\n            // Categorías predefinidas si no hay ninguna en la base de datos\n            categories.value = [\n              { id: 'category_1', name: 'Principal', description: 'Platos principales' },\n              { id: 'category_2', name: 'Entradas', description: 'Entradas y aperitivos' },\n              { id: 'category_3', name: 'Postres', description: 'Postres y dulces' },\n              { id: 'category_4', name: 'Bebidas', description: 'Bebidas y refrescos' }\n            ];\n          }\n        } catch (loadError) {\n          console.error('Error al cargar inventario y categorías:', loadError);\n          // No mostrar error al usuario, solo registrar en consola\n        }\n        \n        console.log('Datos cargados correctamente');\n      } catch (error) {\n        console.error('Error al cargar datos:', error);\n        notification.value = {\n          show: true,\n          message: 'Error al cargar datos. Por favor, intente nuevamente.',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    });\n    \n    // Función para sincronizar con el backend con manejo adecuado de conexiones\n    const syncWithBackend = async (data, type) => {\n      try {\n        const { syncBusinessInfoWithBackend } = await import('../services/menuService');\n        \n        // Añadir metadatos para ayudar al backend a gestionar las conexiones eficientemente\n        const syncData = {\n          ...data,\n          syncType: type,\n          timestamp: new Date().toISOString(),\n          // Añadir un identificador único para cada solicitud\n          requestId: `sync_${type}_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`\n        };\n        \n        // Realizar la sincronización\n        const result = await syncBusinessInfoWithBackend(syncData);\n        \n        if (result && result.success) {\n          console.log(`Sincronización de ${type} completada con éxito`);\n          return { success: true };\n        } else {\n          console.error(`Error en sincronización de ${type}:`, result);\n          return { \n            success: false, \n            message: result?.message || `Error al sincronizar ${type}` \n          };\n        }\n      } catch (error) {\n        console.error(`Error en sincronización de ${type}:`, error);\n        return { \n          success: false, \n          message: error.message || `Error al sincronizar ${type}` \n        };\n      }\n    };\n    \n    // Métodos para información del negocio\n    const toggleBusinessForm = () => {\n      showBusinessForm.value = !showBusinessForm.value;\n    };\n    \n    const onLogoChange = (event) => {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          businessInfo.value.logo = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      }\n    };\n    \n    const saveBusinessInfo = async () => {\n      try {\n        if (notification.value.timeout) {\n          clearTimeout(notification.value.timeout);\n        }\n        \n        // Validar campos obligatorios\n        if (!businessInfo.value.name || businessInfo.value.name.trim() === '') {\n          notification.value = {\n            show: true,\n            message: 'El nombre del negocio es obligatorio',\n            type: 'error',\n            timeout: setTimeout(() => {\n              notification.value.show = false;\n            }, 3000)\n          };\n          return;\n        }\n        \n        // Mostrar indicador de carga\n        loading.value.businessInfo = true;\n        \n        await saveBusinessInfo(businessInfo.value);\n        \n        // Sincronizar con el backend\n        try {\n          const syncResult = await syncWithBackend(businessInfo.value, 'business_info');\n          if (!syncResult.success) {\n            console.error('Error al sincronizar información del negocio:', syncResult.message);\n            notification.value = {\n              show: true,\n              message: 'Error al sincronizar información del negocio',\n              type: 'error',\n              timeout: setTimeout(() => {\n                notification.value.show = false;\n              }, 3000)\n            };\n          }\n        } catch (syncError) {\n          console.error('Error al sincronizar información del negocio:', syncError);\n          // No mostrar error al usuario, solo registrar en consola\n        }\n        \n        // Ocultar indicador de carga\n        loading.value.businessInfo = false;\n        \n        notification.value = {\n          show: true,\n          message: 'Información del negocio guardada con éxito!',\n          type: 'success',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      } catch (error) {\n        // Ocultar indicador de carga en caso de error\n        loading.value.businessInfo = false;\n        \n        console.error('Error al guardar información del negocio:', error);\n        \n        notification.value = {\n          show: true,\n          message: 'Error al guardar información del negocio',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    };\n    \n    const clearBusinessForm = () => {\n      businessInfo.value = {\n        id: 'business_info_1',\n        name: '',\n        description: '',\n        address: '',\n        contact: '',\n        logo: '',\n        paymentInfo: {\n          qrTitle: '',\n          qrImage: '',\n          nequiNumber: '',\n          nequiImage: ''\n        }\n      };\n    };\n    \n    // Métodos para información de pago\n    const togglePaymentForm = () => {\n      showPaymentForm.value = !showPaymentForm.value;\n    };\n    \n    const onQRImageChange = (event) => {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          paymentInfo.value.qrImage = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      }\n    };\n    \n    const onNequiImageChange = (event) => {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          paymentInfo.value.nequiImage = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      }\n    };\n    \n    const savePaymentInfo = async () => {\n      try {\n        if (notification.value.timeout) {\n          clearTimeout(notification.value.timeout);\n        }\n        \n        // Mostrar indicador de carga\n        loading.value.paymentInfo = true;\n        \n        if (!businessInfo.value.paymentInfo) {\n          businessInfo.value.paymentInfo = {};\n        }\n        \n        businessInfo.value.paymentInfo.qrTitle = paymentInfo.value.qrTitle;\n        businessInfo.value.paymentInfo.qrImage = paymentInfo.value.qrImage;\n        businessInfo.value.paymentInfo.nequiNumber = paymentInfo.value.nequiNumber;\n        businessInfo.value.paymentInfo.nequiImage = paymentInfo.value.nequiImage;\n        \n        await saveBusinessInfo(businessInfo.value);\n        \n        // Sincronizar con el backend\n        try {\n          const syncResult = await syncWithBackend(businessInfo.value, 'payment_info');\n          if (!syncResult.success) {\n            console.error('Error al sincronizar información de pago:', syncResult.message);\n            notification.value = {\n              show: true,\n              message: 'Error al sincronizar información de pago',\n              type: 'error',\n              timeout: setTimeout(() => {\n                notification.value.show = false;\n              }, 3000)\n            };\n          }\n        } catch (syncError) {\n          console.error('Error al sincronizar información de pago:', syncError);\n          // No mostrar error al usuario, solo registrar en consola\n        }\n        \n        // Ocultar indicador de carga\n        loading.value.paymentInfo = false;\n        \n        notification.value = {\n          show: true,\n          message: 'Información de pago guardada con éxito!',\n          type: 'success',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      } catch (error) {\n        // Ocultar indicador de carga en caso de error\n        loading.value.paymentInfo = false;\n        \n        console.error('Error al guardar información de pago:', error);\n        \n        notification.value = {\n          show: true,\n          message: 'Error al guardar información de pago',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    };\n    \n    const clearPaymentForm = () => {\n      paymentInfo.value = {\n        qrTitle: '',\n        qrImage: '',\n        nequiNumber: '',\n        nequiImage: ''\n      };\n    };\n    \n    // Métodos para gestión de inventario\n    const toggleInventorySection = () => {\n      showInventorySection.value = !showInventorySection.value;\n    };\n    \n    const editInventoryItem = async (item) => {\n      try {\n        // Aquí se implementaría un modal o formulario para editar el item\n        console.log('Editando item:', item);\n        \n        // Simulación de edición (en una implementación real, esto sería un formulario)\n        const updatedItem = { ...item, updatedAt: new Date().toISOString() };\n        \n        // Actualizar el item en el array local\n        const index = inventoryItems.value.findIndex(i => i.id === item.id);\n        if (index !== -1) {\n          inventoryItems.value[index] = updatedItem;\n        }\n        \n        // Guardar en IndexedDB\n        await saveMenuItem(updatedItem);\n        \n        // Sincronizar con el backend\n        try {\n          const syncResult = await syncWithBackend(updatedItem, 'inventory_item');\n          if (!syncResult.success) {\n            console.error('Error al sincronizar item de inventario:', syncResult.message);\n            notification.value = {\n              show: true,\n              message: 'Item actualizado localmente, pero hubo un error al sincronizar con el servidor',\n              type: 'warning',\n              timeout: setTimeout(() => {\n                notification.value.show = false;\n              }, 3000)\n            };\n          }\n        } catch (syncError) {\n          console.error('Error al sincronizar item de inventario:', syncError);\n          notification.value = {\n            show: true,\n            message: 'Item actualizado localmente, pero hubo un error al sincronizar con el servidor',\n            type: 'warning',\n            timeout: setTimeout(() => {\n              notification.value.show = false;\n            }, 3000)\n          };\n        }\n        \n        notification.value = {\n          show: true,\n          message: 'Item actualizado con éxito!',\n          type: 'success',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      } catch (error) {\n        console.error('Error al editar item:', error);\n        notification.value = {\n          show: true,\n          message: 'Error al actualizar el item',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    };\n    \n    const toggleItemAvailability = async (item) => {\n      try {\n        // Cambiar la disponibilidad del item\n        const updatedItem = { \n          ...item, \n          availableQuantity: item.availableQuantity > 0 ? 0 : 10,\n          updatedAt: new Date().toISOString()\n        };\n        \n        // Actualizar el item en el array local\n        const index = inventoryItems.value.findIndex(i => i.id === item.id);\n        if (index !== -1) {\n          inventoryItems.value[index] = updatedItem;\n        }\n        \n        // Guardar en IndexedDB\n        await saveMenuItem(updatedItem);\n        \n        // Sincronizar con el backend\n        try {\n          const syncResult = await syncWithBackend(updatedItem, 'inventory_item');\n          if (!syncResult.success) {\n            console.error('Error al sincronizar disponibilidad del item:', syncResult.message);\n            notification.value = {\n              show: true,\n              message: 'Disponibilidad actualizada localmente, pero hubo un error al sincronizar con el servidor',\n              type: 'warning',\n              timeout: setTimeout(() => {\n                notification.value.show = false;\n              }, 3000)\n            };\n          }\n        } catch (syncError) {\n          console.error('Error al sincronizar disponibilidad del item:', syncError);\n          notification.value = {\n            show: true,\n            message: 'Disponibilidad actualizada localmente, pero hubo un error al sincronizar con el servidor',\n            type: 'warning',\n            timeout: setTimeout(() => {\n              notification.value.show = false;\n            }, 3000)\n          };\n        }\n        \n        notification.value = {\n          show: true,\n          message: `Item ${updatedItem.availableQuantity > 0 ? 'disponible' : 'no disponible'} actualizado con éxito!`,\n          type: 'success',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      } catch (error) {\n        console.error('Error al cambiar disponibilidad:', error);\n        notification.value = {\n          show: true,\n          message: 'Error al actualizar la disponibilidad',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    };\n    \n    const saveInventoryItem = async (item) => {\n      try {\n        if (notification.value.timeout) {\n          clearTimeout(notification.value.timeout);\n        }\n        \n        // Mostrar indicador de carga\n        loading.value.inventory = true;\n        \n        // Validar campos obligatorios\n        if (!item.name || item.name.trim() === '') {\n          loading.value.inventory = false;\n          notification.value = {\n            show: true,\n            message: 'El nombre del item es obligatorio',\n            type: 'error',\n            timeout: setTimeout(() => {\n              notification.value.show = false;\n            }, 3000)\n          };\n          return;\n        }\n        \n        if (!item.price || isNaN(item.price) || item.price <= 0) {\n          loading.value.inventory = false;\n          notification.value = {\n            show: true,\n            message: 'El precio debe ser un número mayor que cero',\n            type: 'error',\n            timeout: setTimeout(() => {\n              notification.value.show = false;\n            }, 3000)\n          };\n          return;\n        }\n        \n        // Actualizar la lista local\n        const index = inventoryItems.value.findIndex(i => i.id === item.id);\n        if (index !== -1) {\n          inventoryItems.value[index] = { ...item };\n        } else {\n          inventoryItems.value.push({ ...item });\n        }\n        \n        // Guardar en IndexedDB\n        await saveMenuItem(item);\n        \n        // Sincronizar con el backend\n        try {\n          const syncResult = await syncWithBackend(item, 'inventory_item');\n          if (!syncResult.success) {\n            console.error('Error al sincronizar item de inventario:', syncResult.message);\n            loading.value.inventory = false;\n            notification.value = {\n              show: true,\n              message: 'Item guardado localmente, pero hubo un error al sincronizar con el servidor',\n              type: 'warning',\n              timeout: setTimeout(() => {\n                notification.value.show = false;\n              }, 3000)\n            };\n            return;\n          }\n        } catch (syncError) {\n          console.error('Error al sincronizar item de inventario:', syncError);\n          loading.value.inventory = false;\n          notification.value = {\n            show: true,\n            message: 'Item guardado localmente, pero hubo un error al sincronizar con el servidor',\n            type: 'warning',\n            timeout: setTimeout(() => {\n              notification.value.show = false;\n            }, 3000)\n          };\n          return;\n        }\n        \n        // Ocultar indicador de carga\n        loading.value.inventory = false;\n        \n        notification.value = {\n          show: true,\n          message: 'Item guardado con éxito!',\n          type: 'success',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n        \n        // Limpiar el formulario y cerrar el modal\n        clearInventoryForm();\n        showInventoryForm.value = false;\n      } catch (error) {\n        // Ocultar indicador de carga en caso de error\n        loading.value.inventory = false;\n        \n        console.error('Error al guardar item:', error);\n        notification.value = {\n          show: true,\n          message: 'Error al guardar el item',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    };\n    \n    // Métodos para categorías\n    const toggleCategoriesSection = () => {\n      showCategoriesSection.value = !showCategoriesSection.value;\n    };\n    \n    const editCategory = (category) => {\n      console.log('Editar categoría:', category);\n    };\n    \n    const deleteCategory = async (category) => {\n      try {\n        if (notification.value.timeout) {\n          clearTimeout(notification.value.timeout);\n        }\n        \n        if (confirm(`¿Está seguro de eliminar la categoría ${category.name}?`)) {\n          // Eliminar de la lista local\n          categories.value = categories.value.filter(c => c.id !== category.id);\n          \n          // Eliminar de IndexedDB\n          await deleteMenuItem(category.id);\n          \n          // Sincronizar con el backend\n          try {\n            const syncResult = await syncWithBackend({ categoryId: category.id }, 'category_delete');\n            if (!syncResult.success) {\n              console.error('Error al sincronizar eliminación de categoría:', syncResult.message);\n              notification.value = {\n                show: true,\n                message: 'Categoría eliminada localmente, pero hubo un error al sincronizar con el servidor',\n                type: 'warning',\n                timeout: setTimeout(() => {\n                  notification.value.show = false;\n                }, 3000)\n              };\n            } else {\n              notification.value = {\n                show: true,\n                message: 'Categoría eliminada con éxito!',\n                type: 'success',\n                timeout: setTimeout(() => {\n                  notification.value.show = false;\n                }, 3000)\n              };\n            }\n          } catch (syncError) {\n            console.error('Error al sincronizar eliminación de categoría:', syncError);\n            notification.value = {\n              show: true,\n              message: 'Categoría eliminada localmente, pero hubo un error al sincronizar con el servidor',\n              type: 'warning',\n              timeout: setTimeout(() => {\n                notification.value.show = false;\n              }, 3000)\n            };\n          }\n        }\n      } catch (error) {\n        console.error('Error al eliminar categoría:', error);\n        notification.value = {\n          show: true,\n          message: 'Error al eliminar la categoría',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    };\n    \n    const saveNewCategory = async () => {\n      try {\n        if (notification.value.timeout) {\n          clearTimeout(notification.value.timeout);\n        }\n        \n        // Mostrar indicador de carga\n        loading.value.categories = true;\n        \n        // Validar campos obligatorios\n        if (!newCategory.value.name || newCategory.value.name.trim() === '') {\n          loading.value.categories = false;\n          notification.value = {\n            show: true,\n            message: 'El nombre de la categoría es obligatorio',\n            type: 'error',\n            timeout: setTimeout(() => {\n              notification.value.show = false;\n            }, 3000)\n          };\n          return;\n        }\n        \n        // Generar ID único para la nueva categoría\n        const newCategoryWithId = {\n          ...newCategory.value,\n          id: `category_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`,\n          isCategory: true\n        };\n        \n        // Añadir a la lista local\n        categories.value.push(newCategoryWithId);\n        \n        // Guardar en IndexedDB\n        await saveMenuItem({\n          ...newCategoryWithId,\n          isCategory: true\n        });\n        \n        // Sincronizar con el backend\n        try {\n          const syncResult = await syncWithBackend(newCategoryWithId, 'category_update');\n          if (!syncResult.success) {\n            console.error('Error al sincronizar categoría:', syncResult.message);\n            loading.value.categories = false;\n            notification.value = {\n              show: true,\n              message: 'Categoría guardada localmente, pero hubo un error al sincronizar con el servidor',\n              type: 'warning',\n              timeout: setTimeout(() => {\n                notification.value.show = false;\n              }, 3000)\n            };\n            return;\n          }\n        } catch (syncError) {\n          console.error('Error al sincronizar categoría:', syncError);\n          loading.value.categories = false;\n          notification.value = {\n            show: true,\n            message: 'Categoría guardada localmente, pero hubo un error al sincronizar con el servidor',\n            type: 'warning',\n            timeout: setTimeout(() => {\n              notification.value.show = false;\n            }, 3000)\n          };\n          return;\n        }\n        \n        // Ocultar indicador de carga\n        loading.value.categories = false;\n        \n        notification.value = {\n          show: true,\n          message: 'Categoría guardada con éxito!',\n          type: 'success',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n        \n        // Limpiar el formulario\n        clearCategoryForm();\n        showAddCategoryForm.value = false;\n      } catch (error) {\n        // Ocultar indicador de carga en caso de error\n        loading.value.categories = false;\n        \n        console.error('Error al guardar categoría:', error);\n        notification.value = {\n          show: true,\n          message: 'Error al guardar la categoría',\n          type: 'error',\n          timeout: setTimeout(() => {\n            notification.value.show = false;\n          }, 3000)\n        };\n      }\n    };\n    \n    const clearCategoryForm = () => {\n      newCategory.value = {\n        name: '',\n        description: ''\n      };\n    };\n    \n    const getCategoryName = (categoryId) => {\n      const category = categories.value.find(c => c.id === categoryId);\n      return category ? category.name : 'Sin categoría';\n    };\n    \n    const onItemImageChange = (event) => {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          currentItem.value.image = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      }\n    };\n    \n    const clearInventoryForm = () => {\n      currentItem.value = {\n        id: '',\n        name: '',\n        description: '',\n        price: 0,\n        availableQuantity: 0,\n        category: ''\n      };\n    };\n    \n    return {\n      businessInfo,\n      showBusinessForm,\n      toggleBusinessForm,\n      onLogoChange,\n      saveBusinessInfo,\n      clearBusinessForm,\n      paymentInfo,\n      showPaymentForm,\n      togglePaymentForm,\n      onQRImageChange,\n      onNequiImageChange,\n      savePaymentInfo,\n      clearPaymentForm,\n      inventoryItems,\n      inventoryFilter,\n      categoryFilter,\n      showInventorySection,\n      toggleInventorySection,\n      editInventoryItem,\n      toggleItemAvailability,\n      filteredInventoryItems,\n      categories,\n      showCategoriesSection,\n      toggleCategoriesSection,\n      editCategory,\n      deleteCategory,\n      newCategory,\n      showAddCategoryForm,\n      saveNewCategory,\n      clearCategoryForm,\n      notification,\n      loading,\n      showInventoryForm,\n      editingItem,\n      currentItem,\n      onItemImageChange,\n      clearInventoryForm,\n      getCategoryName\n    };\n  }\n};\n</script>\n\n<style scoped>\n.menu-component {\n  padding: 20px;\n}\n\n.business-info-section,\n.payment-info-section,\n.inventory-section,\n.categories-section {\n  margin-bottom: 30px;\n  padding: 20px;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\n.form-control {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n\n.form-actions {\n  margin-top: 20px;\n}\n\n.btn {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-right: 10px;\n}\n\n.btn-primary {\n  background-color: #007bff;\n  color: white;\n}\n\n.btn-success {\n  background-color: #28a745;\n  color: white;\n}\n\n.btn-secondary {\n  background-color: #6c757d;\n  color: white;\n}\n\n.notification {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  padding: 15px;\n  border-radius: 4px;\n  color: white;\n  z-index: 1000;\n}\n\n.success {\n  background-color: #28a745;\n}\n\n.error {\n  background-color: #dc3545;\n}\n</style>\n"],"mappings":";;;;AAiNA,SAASA,GAAG,EAAEC,SAAS,EAAEC,QAAO,QAAS,KAAK;AAC9C,SACEC,eAAe,EACfC,gBAAgB,EAChBC,YAAY,EACZC,YAAY,EACZC,cAAc,EACdC,sBAAqB,QAChB,4BAA4B;AAEnC,eAAe;EACbC,IAAI,EAAE,eAAe;EAErBC,KAAKA,CAAA,EAAG;IACN;IACA,MAAMC,YAAW,GAAIX,GAAG,CAAC;MACvBY,EAAE,EAAE,iBAAiB;MACrBH,IAAI,EAAE,EAAE;MACRI,WAAW,EAAE,EAAE;MACfC,OAAO,EAAE,EAAE;MACXC,OAAO,EAAE,EAAE;MACXC,IAAI,EAAE,EAAE;MACRC,WAAW,EAAE;QACXC,OAAO,EAAE,EAAE;QACXC,OAAO,EAAE,EAAE;QACXC,WAAW,EAAE,EAAE;QACfC,UAAU,EAAE;MACd;IACF,CAAC,CAAC;IAEF,MAAMC,gBAAe,GAAItB,GAAG,CAAC,KAAK,CAAC;;IAEnC;IACA,MAAMiB,WAAU,GAAIjB,GAAG,CAAC;MACtBkB,OAAO,EAAE,EAAE;MACXC,OAAO,EAAE,EAAE;MACXC,WAAW,EAAE,EAAE;MACfC,UAAU,EAAE;IACd,CAAC,CAAC;IAEF,MAAME,eAAc,GAAIvB,GAAG,CAAC,KAAK,CAAC;;IAElC;IACA,MAAMwB,cAAa,GAAIxB,GAAG,CAAC,EAAE,CAAC;IAC9B,MAAMyB,eAAc,GAAIzB,GAAG,CAAC,EAAE,CAAC;IAC/B,MAAM0B,cAAa,GAAI1B,GAAG,CAAC,EAAE,CAAC;IAC9B,MAAM2B,oBAAmB,GAAI3B,GAAG,CAAC,KAAK,CAAC;IACvC,MAAM4B,iBAAgB,GAAI5B,GAAG,CAAC,KAAK,CAAC;IACpC,MAAM6B,WAAU,GAAI7B,GAAG,CAAC,KAAK,CAAC;IAC9B,MAAM8B,WAAU,GAAI9B,GAAG,CAAC;MACtBY,EAAE,EAAE,EAAE;MACNH,IAAI,EAAE,EAAE;MACRI,WAAW,EAAE,EAAE;MACfkB,KAAK,EAAE,CAAC;MACRC,iBAAiB,EAAE,CAAC;MACpBC,QAAQ,EAAE;IACZ,CAAC,CAAC;;IAEF;IACA,MAAMC,sBAAqB,GAAIhC,QAAQ,CAAC,MAAM;MAC5C,MAAMiC,MAAK,GAAIV,eAAe,CAACW,KAAK,CAACC,WAAW,CAAC,CAAC;MAClD,MAAMJ,QAAO,GAAIP,cAAc,CAACU,KAAK;MAErC,OAAOZ,cAAc,CAACY,KAAK,CAACD,MAAM,CAACG,IAAG,IAAK;QACzC,MAAM7B,IAAG,GAAI6B,IAAI,CAAC7B,IAAI,CAAC4B,WAAW,CAAC,CAAC;QACpC,MAAME,aAAY,GAAIN,QAAO,KAAM,EAAC,IAAKK,IAAI,CAACL,QAAO,KAAMA,QAAQ;QAEnE,OAAOxB,IAAI,CAAC+B,QAAQ,CAACL,MAAM,KAAKI,aAAa;MAC/C,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACA,MAAME,UAAS,GAAIzC,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAM0C,qBAAoB,GAAI1C,GAAG,CAAC,KAAK,CAAC;IACxC,MAAM2C,WAAU,GAAI3C,GAAG,CAAC;MACtBS,IAAI,EAAE,EAAE;MACRI,WAAW,EAAE;IACf,CAAC,CAAC;IACF,MAAM+B,mBAAkB,GAAI5C,GAAG,CAAC,KAAK,CAAC;;IAEtC;IACA,MAAM6C,YAAW,GAAI7C,GAAG,CAAC;MACvB8C,IAAI,EAAE,KAAK;MACXC,OAAO,EAAE,EAAE;MACXC,IAAI,EAAE,SAAS;MACfC,OAAO,EAAE;IACX,CAAC,CAAC;;IAEF;IACA,MAAMC,OAAM,GAAIlD,GAAG,CAAC;MAClBW,YAAY,EAAE,KAAK;MACnBM,WAAW,EAAE,KAAK;MAClBkC,SAAS,EAAE,KAAK;MAChBV,UAAU,EAAE;IACd,CAAC,CAAC;;IAEF;IACAxC,SAAS,CAAC,YAAY;MACpB,IAAI;QACF;QACA,MAAMmD,kBAAiB,GAAI,MAAMjD,eAAe,CAAC,CAAC;QAElD,IAAIiD,kBAAkB,EAAE;UACtBzC,YAAY,CAACyB,KAAI,GAAIgB,kBAAkB;;UAEvC;UACA,IAAIA,kBAAkB,CAACnC,WAAW,EAAE;YAClCA,WAAW,CAACmB,KAAI,GAAI;cAClBlB,OAAO,EAAEkC,kBAAkB,CAACnC,WAAW,CAACC,OAAM,IAAK,EAAE;cACrDC,OAAO,EAAEiC,kBAAkB,CAACnC,WAAW,CAACE,OAAM,IAAK,EAAE;cACrDC,WAAW,EAAEgC,kBAAkB,CAACnC,WAAW,CAACG,WAAU,IAAK,EAAE;cAC7DC,UAAU,EAAE+B,kBAAkB,CAACnC,WAAW,CAACI,UAAS,IAAK;YAC3D,CAAC;UACH;QACF;;QAEA;QACA,IAAI;UACF,MAAMgC,KAAI,GAAI,MAAMhD,YAAY,CAAC,CAAC;UAClC,IAAIgD,KAAI,IAAKA,KAAK,CAACC,MAAK,GAAI,CAAC,EAAE;YAC7B;YACA9B,cAAc,CAACY,KAAI,GAAIiB,KAAK,CAAClB,MAAM,CAACG,IAAG,IAAK,CAACA,IAAI,CAACiB,UAAU,CAAC;UAC/D;;UAEA;UACA;UACA,MAAMC,IAAG,GAAIH,KAAI,GAAIA,KAAK,CAAClB,MAAM,CAACG,IAAG,IAAKA,IAAI,CAACiB,UAAU,IAAI,EAAE;UAC/D,IAAIC,IAAG,IAAKA,IAAI,CAACF,MAAK,GAAI,CAAC,EAAE;YAC3Bb,UAAU,CAACL,KAAI,GAAIoB,IAAI;UACzB,OAAO;YACL;YACAf,UAAU,CAACL,KAAI,GAAI,CACjB;cAAExB,EAAE,EAAE,YAAY;cAAEH,IAAI,EAAE,WAAW;cAAEI,WAAW,EAAE;YAAqB,CAAC,EAC1E;cAAED,EAAE,EAAE,YAAY;cAAEH,IAAI,EAAE,UAAU;cAAEI,WAAW,EAAE;YAAwB,CAAC,EAC5E;cAAED,EAAE,EAAE,YAAY;cAAEH,IAAI,EAAE,SAAS;cAAEI,WAAW,EAAE;YAAmB,CAAC,EACtE;cAAED,EAAE,EAAE,YAAY;cAAEH,IAAI,EAAE,SAAS;cAAEI,WAAW,EAAE;YAAsB,EACzE;UACH;QACF,EAAE,OAAO4C,SAAS,EAAE;UAClBC,OAAO,CAACC,KAAK,CAAC,0CAA0C,EAAEF,SAAS,CAAC;UACpE;QACF;QAEAC,OAAO,CAACE,GAAG,CAAC,8BAA8B,CAAC;MAC7C,EAAE,OAAOD,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9Cd,YAAY,CAACT,KAAI,GAAI;UACnBU,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE,uDAAuD;UAChEC,IAAI,EAAE,OAAO;UACbC,OAAO,EAAEY,UAAU,CAAC,MAAM;YACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;UACjC,CAAC,EAAE,IAAI;QACT,CAAC;MACH;IACF,CAAC,CAAC;;IAEF;IACA,MAAMgB,eAAc,GAAI,MAAAA,CAAOC,IAAI,EAAEf,IAAI,KAAK;MAC5C,IAAI;QACF,MAAM;UAAEgB;QAA4B,IAAI,MAAM,MAAM,CAAC,yBAAyB,CAAC;;QAE/E;QACA,MAAMC,QAAO,GAAI;UACf,GAAGF,IAAI;UACPG,QAAQ,EAAElB,IAAI;UACdmB,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;UACnC;UACAC,SAAS,EAAE,QAAQtB,IAAI,IAAIoB,IAAI,CAACG,GAAG,CAAC,CAAC,IAAIC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC;QACrF,CAAC;;QAED;QACA,MAAMC,MAAK,GAAI,MAAMZ,2BAA2B,CAACC,QAAQ,CAAC;QAE1D,IAAIW,MAAK,IAAKA,MAAM,CAACC,OAAO,EAAE;UAC5BnB,OAAO,CAACE,GAAG,CAAC,qBAAqBZ,IAAI,uBAAuB,CAAC;UAC7D,OAAO;YAAE6B,OAAO,EAAE;UAAK,CAAC;QAC1B,OAAO;UACLnB,OAAO,CAACC,KAAK,CAAC,8BAA8BX,IAAI,GAAG,EAAE4B,MAAM,CAAC;UAC5D,OAAO;YACLC,OAAO,EAAE,KAAK;YACd9B,OAAO,EAAE6B,MAAM,EAAE7B,OAAM,IAAK,wBAAwBC,IAAI;UAC1D,CAAC;QACH;MACF,EAAE,OAAOW,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CAAC,8BAA8BX,IAAI,GAAG,EAAEW,KAAK,CAAC;QAC3D,OAAO;UACLkB,OAAO,EAAE,KAAK;UACd9B,OAAO,EAAEY,KAAK,CAACZ,OAAM,IAAK,wBAAwBC,IAAI;QACxD,CAAC;MACH;IACF,CAAC;;IAED;IACA,MAAM8B,kBAAiB,GAAIA,CAAA,KAAM;MAC/BxD,gBAAgB,CAACc,KAAI,GAAI,CAACd,gBAAgB,CAACc,KAAK;IAClD,CAAC;IAED,MAAM2C,YAAW,GAAKC,KAAK,IAAK;MAC9B,MAAMC,IAAG,GAAID,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAClC,IAAIF,IAAI,EAAE;QACR,MAAMG,MAAK,GAAI,IAAIC,UAAU,CAAC,CAAC;QAC/BD,MAAM,CAACE,MAAK,GAAKC,CAAC,IAAK;UACrB5E,YAAY,CAACyB,KAAK,CAACpB,IAAG,GAAIuE,CAAC,CAACL,MAAM,CAACN,MAAM;QAC3C,CAAC;QACDQ,MAAM,CAACI,aAAa,CAACP,IAAI,CAAC;MAC5B;IACF,CAAC;IAED,MAAM7E,gBAAe,GAAI,MAAAA,CAAA,KAAY;MACnC,IAAI;QACF,IAAIyC,YAAY,CAACT,KAAK,CAACa,OAAO,EAAE;UAC9BwC,YAAY,CAAC5C,YAAY,CAACT,KAAK,CAACa,OAAO,CAAC;QAC1C;;QAEA;QACA,IAAI,CAACtC,YAAY,CAACyB,KAAK,CAAC3B,IAAG,IAAKE,YAAY,CAACyB,KAAK,CAAC3B,IAAI,CAACiF,IAAI,CAAC,MAAM,EAAE,EAAE;UACrE7C,YAAY,CAACT,KAAI,GAAI;YACnBU,IAAI,EAAE,IAAI;YACVC,OAAO,EAAE,sCAAsC;YAC/CC,IAAI,EAAE,OAAO;YACbC,OAAO,EAAEY,UAAU,CAAC,MAAM;cACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;YACjC,CAAC,EAAE,IAAI;UACT,CAAC;UACD;QACF;;QAEA;QACAI,OAAO,CAACd,KAAK,CAACzB,YAAW,GAAI,IAAI;QAEjC,MAAMP,gBAAgB,CAACO,YAAY,CAACyB,KAAK,CAAC;;QAE1C;QACA,IAAI;UACF,MAAMuD,UAAS,GAAI,MAAM7B,eAAe,CAACnD,YAAY,CAACyB,KAAK,EAAE,eAAe,CAAC;UAC7E,IAAI,CAACuD,UAAU,CAACd,OAAO,EAAE;YACvBnB,OAAO,CAACC,KAAK,CAAC,+CAA+C,EAAEgC,UAAU,CAAC5C,OAAO,CAAC;YAClFF,YAAY,CAACT,KAAI,GAAI;cACnBU,IAAI,EAAE,IAAI;cACVC,OAAO,EAAE,8CAA8C;cACvDC,IAAI,EAAE,OAAO;cACbC,OAAO,EAAEY,UAAU,CAAC,MAAM;gBACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;cACjC,CAAC,EAAE,IAAI;YACT,CAAC;UACH;QACF,EAAE,OAAO8C,SAAS,EAAE;UAClBlC,OAAO,CAACC,KAAK,CAAC,+CAA+C,EAAEiC,SAAS,CAAC;UACzE;QACF;;QAEA;QACA1C,OAAO,CAACd,KAAK,CAACzB,YAAW,GAAI,KAAK;QAElCkC,YAAY,CAACT,KAAI,GAAI;UACnBU,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE,6CAA6C;UACtDC,IAAI,EAAE,SAAS;UACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;YACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;UACjC,CAAC,EAAE,IAAI;QACT,CAAC;MACH,EAAE,OAAOa,KAAK,EAAE;QACd;QACAT,OAAO,CAACd,KAAK,CAACzB,YAAW,GAAI,KAAK;QAElC+C,OAAO,CAACC,KAAK,CAAC,2CAA2C,EAAEA,KAAK,CAAC;QAEjEd,YAAY,CAACT,KAAI,GAAI;UACnBU,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE,0CAA0C;UACnDC,IAAI,EAAE,OAAO;UACbC,OAAO,EAAEY,UAAU,CAAC,MAAM;YACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;UACjC,CAAC,EAAE,IAAI;QACT,CAAC;MACH;IACF,CAAC;IAED,MAAM+C,iBAAgB,GAAIA,CAAA,KAAM;MAC9BlF,YAAY,CAACyB,KAAI,GAAI;QACnBxB,EAAE,EAAE,iBAAiB;QACrBH,IAAI,EAAE,EAAE;QACRI,WAAW,EAAE,EAAE;QACfC,OAAO,EAAE,EAAE;QACXC,OAAO,EAAE,EAAE;QACXC,IAAI,EAAE,EAAE;QACRC,WAAW,EAAE;UACXC,OAAO,EAAE,EAAE;UACXC,OAAO,EAAE,EAAE;UACXC,WAAW,EAAE,EAAE;UACfC,UAAU,EAAE;QACd;MACF,CAAC;IACH,CAAC;;IAED;IACA,MAAMyE,iBAAgB,GAAIA,CAAA,KAAM;MAC9BvE,eAAe,CAACa,KAAI,GAAI,CAACb,eAAe,CAACa,KAAK;IAChD,CAAC;IAED,MAAM2D,eAAc,GAAKf,KAAK,IAAK;MACjC,MAAMC,IAAG,GAAID,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAClC,IAAIF,IAAI,EAAE;QACR,MAAMG,MAAK,GAAI,IAAIC,UAAU,CAAC,CAAC;QAC/BD,MAAM,CAACE,MAAK,GAAKC,CAAC,IAAK;UACrBtE,WAAW,CAACmB,KAAK,CAACjB,OAAM,GAAIoE,CAAC,CAACL,MAAM,CAACN,MAAM;QAC7C,CAAC;QACDQ,MAAM,CAACI,aAAa,CAACP,IAAI,CAAC;MAC5B;IACF,CAAC;IAED,MAAMe,kBAAiB,GAAKhB,KAAK,IAAK;MACpC,MAAMC,IAAG,GAAID,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAClC,IAAIF,IAAI,EAAE;QACR,MAAMG,MAAK,GAAI,IAAIC,UAAU,CAAC,CAAC;QAC/BD,MAAM,CAACE,MAAK,GAAKC,CAAC,IAAK;UACrBtE,WAAW,CAACmB,KAAK,CAACf,UAAS,GAAIkE,CAAC,CAACL,MAAM,CAACN,MAAM;QAChD,CAAC;QACDQ,MAAM,CAACI,aAAa,CAACP,IAAI,CAAC;MAC5B;IACF,CAAC;IAED,MAAMgB,eAAc,GAAI,MAAAA,CAAA,KAAY;MAClC,IAAI;QACF,IAAIpD,YAAY,CAACT,KAAK,CAACa,OAAO,EAAE;UAC9BwC,YAAY,CAAC5C,YAAY,CAACT,KAAK,CAACa,OAAO,CAAC;QAC1C;;QAEA;QACAC,OAAO,CAACd,KAAK,CAACnB,WAAU,GAAI,IAAI;QAEhC,IAAI,CAACN,YAAY,CAACyB,KAAK,CAACnB,WAAW,EAAE;UACnCN,YAAY,CAACyB,KAAK,CAACnB,WAAU,GAAI,CAAC,CAAC;QACrC;QAEAN,YAAY,CAACyB,KAAK,CAACnB,WAAW,CAACC,OAAM,GAAID,WAAW,CAACmB,KAAK,CAAClB,OAAO;QAClEP,YAAY,CAACyB,KAAK,CAACnB,WAAW,CAACE,OAAM,GAAIF,WAAW,CAACmB,KAAK,CAACjB,OAAO;QAClER,YAAY,CAACyB,KAAK,CAACnB,WAAW,CAACG,WAAU,GAAIH,WAAW,CAACmB,KAAK,CAAChB,WAAW;QAC1ET,YAAY,CAACyB,KAAK,CAACnB,WAAW,CAACI,UAAS,GAAIJ,WAAW,CAACmB,KAAK,CAACf,UAAU;QAExE,MAAMjB,gBAAgB,CAACO,YAAY,CAACyB,KAAK,CAAC;;QAE1C;QACA,IAAI;UACF,MAAMuD,UAAS,GAAI,MAAM7B,eAAe,CAACnD,YAAY,CAACyB,KAAK,EAAE,cAAc,CAAC;UAC5E,IAAI,CAACuD,UAAU,CAACd,OAAO,EAAE;YACvBnB,OAAO,CAACC,KAAK,CAAC,2CAA2C,EAAEgC,UAAU,CAAC5C,OAAO,CAAC;YAC9EF,YAAY,CAACT,KAAI,GAAI;cACnBU,IAAI,EAAE,IAAI;cACVC,OAAO,EAAE,0CAA0C;cACnDC,IAAI,EAAE,OAAO;cACbC,OAAO,EAAEY,UAAU,CAAC,MAAM;gBACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;cACjC,CAAC,EAAE,IAAI;YACT,CAAC;UACH;QACF,EAAE,OAAO8C,SAAS,EAAE;UAClBlC,OAAO,CAACC,KAAK,CAAC,2CAA2C,EAAEiC,SAAS,CAAC;UACrE;QACF;;QAEA;QACA1C,OAAO,CAACd,KAAK,CAACnB,WAAU,GAAI,KAAK;QAEjC4B,YAAY,CAACT,KAAI,GAAI;UACnBU,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE,yCAAyC;UAClDC,IAAI,EAAE,SAAS;UACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;YACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;UACjC,CAAC,EAAE,IAAI;QACT,CAAC;MACH,EAAE,OAAOa,KAAK,EAAE;QACd;QACAT,OAAO,CAACd,KAAK,CAACnB,WAAU,GAAI,KAAK;QAEjCyC,OAAO,CAACC,KAAK,CAAC,uCAAuC,EAAEA,KAAK,CAAC;QAE7Dd,YAAY,CAACT,KAAI,GAAI;UACnBU,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE,sCAAsC;UAC/CC,IAAI,EAAE,OAAO;UACbC,OAAO,EAAEY,UAAU,CAAC,MAAM;YACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;UACjC,CAAC,EAAE,IAAI;QACT,CAAC;MACH;IACF,CAAC;IAED,MAAMoD,gBAAe,GAAIA,CAAA,KAAM;MAC7BjF,WAAW,CAACmB,KAAI,GAAI;QAClBlB,OAAO,EAAE,EAAE;QACXC,OAAO,EAAE,EAAE;QACXC,WAAW,EAAE,EAAE;QACfC,UAAU,EAAE;MACd,CAAC;IACH,CAAC;;IAED;IACA,MAAM8E,sBAAqB,GAAIA,CAAA,KAAM;MACnCxE,oBAAoB,CAACS,KAAI,GAAI,CAACT,oBAAoB,CAACS,KAAK;IAC1D,CAAC;IAED,MAAMgE,iBAAgB,GAAI,MAAO9D,IAAI,IAAK;MACxC,IAAI;QACF;QACAoB,OAAO,CAACE,GAAG,CAAC,gBAAgB,EAAEtB,IAAI,CAAC;;QAEnC;QACA,MAAM+D,WAAU,GAAI;UAAE,GAAG/D,IAAI;UAAEgE,SAAS,EAAE,IAAIlC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;QAAE,CAAC;;QAEpE;QACA,MAAMkC,KAAI,GAAI/E,cAAc,CAACY,KAAK,CAACoE,SAAS,CAACC,CAAA,IAAKA,CAAC,CAAC7F,EAAC,KAAM0B,IAAI,CAAC1B,EAAE,CAAC;QACnE,IAAI2F,KAAI,KAAM,CAAC,CAAC,EAAE;UAChB/E,cAAc,CAACY,KAAK,CAACmE,KAAK,IAAIF,WAAW;QAC3C;;QAEA;QACA,MAAM/F,YAAY,CAAC+F,WAAW,CAAC;;QAE/B;QACA,IAAI;UACF,MAAMV,UAAS,GAAI,MAAM7B,eAAe,CAACuC,WAAW,EAAE,gBAAgB,CAAC;UACvE,IAAI,CAACV,UAAU,CAACd,OAAO,EAAE;YACvBnB,OAAO,CAACC,KAAK,CAAC,0CAA0C,EAAEgC,UAAU,CAAC5C,OAAO,CAAC;YAC7EF,YAAY,CAACT,KAAI,GAAI;cACnBU,IAAI,EAAE,IAAI;cACVC,OAAO,EAAE,gFAAgF;cACzFC,IAAI,EAAE,SAAS;cACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;gBACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;cACjC,CAAC,EAAE,IAAI;YACT,CAAC;UACH;QACF,EAAE,OAAO8C,SAAS,EAAE;UAClBlC,OAAO,CAACC,KAAK,CAAC,0CAA0C,EAAEiC,SAAS,CAAC;UACpE/C,YAAY,CAACT,KAAI,GAAI;YACnBU,IAAI,EAAE,IAAI;YACVC,OAAO,EAAE,gFAAgF;YACzFC,IAAI,EAAE,SAAS;YACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;cACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;YACjC,CAAC,EAAE,IAAI;UACT,CAAC;QACH;QAEAD,YAAY,CAACT,KAAI,GAAI;UACnBU,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE,6BAA6B;UACtCC,IAAI,EAAE,SAAS;UACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;YACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;UACjC,CAAC,EAAE,IAAI;QACT,CAAC;MACH,EAAE,OAAOa,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7Cd,YAAY,CAACT,KAAI,GAAI;UACnBU,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE,6BAA6B;UACtCC,IAAI,EAAE,OAAO;UACbC,OAAO,EAAEY,UAAU,CAAC,MAAM;YACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;UACjC,CAAC,EAAE,IAAI;QACT,CAAC;MACH;IACF,CAAC;IAED,MAAM4D,sBAAqB,GAAI,MAAOpE,IAAI,IAAK;MAC7C,IAAI;QACF;QACA,MAAM+D,WAAU,GAAI;UAClB,GAAG/D,IAAI;UACPN,iBAAiB,EAAEM,IAAI,CAACN,iBAAgB,GAAI,IAAI,IAAI,EAAE;UACtDsE,SAAS,EAAE,IAAIlC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;QACpC,CAAC;;QAED;QACA,MAAMkC,KAAI,GAAI/E,cAAc,CAACY,KAAK,CAACoE,SAAS,CAACC,CAAA,IAAKA,CAAC,CAAC7F,EAAC,KAAM0B,IAAI,CAAC1B,EAAE,CAAC;QACnE,IAAI2F,KAAI,KAAM,CAAC,CAAC,EAAE;UAChB/E,cAAc,CAACY,KAAK,CAACmE,KAAK,IAAIF,WAAW;QAC3C;;QAEA;QACA,MAAM/F,YAAY,CAAC+F,WAAW,CAAC;;QAE/B;QACA,IAAI;UACF,MAAMV,UAAS,GAAI,MAAM7B,eAAe,CAACuC,WAAW,EAAE,gBAAgB,CAAC;UACvE,IAAI,CAACV,UAAU,CAACd,OAAO,EAAE;YACvBnB,OAAO,CAACC,KAAK,CAAC,+CAA+C,EAAEgC,UAAU,CAAC5C,OAAO,CAAC;YAClFF,YAAY,CAACT,KAAI,GAAI;cACnBU,IAAI,EAAE,IAAI;cACVC,OAAO,EAAE,0FAA0F;cACnGC,IAAI,EAAE,SAAS;cACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;gBACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;cACjC,CAAC,EAAE,IAAI;YACT,CAAC;UACH;QACF,EAAE,OAAO8C,SAAS,EAAE;UAClBlC,OAAO,CAACC,KAAK,CAAC,+CAA+C,EAAEiC,SAAS,CAAC;UACzE/C,YAAY,CAACT,KAAI,GAAI;YACnBU,IAAI,EAAE,IAAI;YACVC,OAAO,EAAE,0FAA0F;YACnGC,IAAI,EAAE,SAAS;YACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;cACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;YACjC,CAAC,EAAE,IAAI;UACT,CAAC;QACH;QAEAD,YAAY,CAACT,KAAI,GAAI;UACnBU,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE,QAAQsD,WAAW,CAACrE,iBAAgB,GAAI,IAAI,YAAW,GAAI,eAAe,yBAAyB;UAC5GgB,IAAI,EAAE,SAAS;UACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;YACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;UACjC,CAAC,EAAE,IAAI;QACT,CAAC;MACH,EAAE,OAAOa,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;QACxDd,YAAY,CAACT,KAAI,GAAI;UACnBU,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE,uCAAuC;UAChDC,IAAI,EAAE,OAAO;UACbC,OAAO,EAAEY,UAAU,CAAC,MAAM;YACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;UACjC,CAAC,EAAE,IAAI;QACT,CAAC;MACH;IACF,CAAC;IAED,MAAM6D,iBAAgB,GAAI,MAAOrE,IAAI,IAAK;MACxC,IAAI;QACF,IAAIO,YAAY,CAACT,KAAK,CAACa,OAAO,EAAE;UAC9BwC,YAAY,CAAC5C,YAAY,CAACT,KAAK,CAACa,OAAO,CAAC;QAC1C;;QAEA;QACAC,OAAO,CAACd,KAAK,CAACe,SAAQ,GAAI,IAAI;;QAE9B;QACA,IAAI,CAACb,IAAI,CAAC7B,IAAG,IAAK6B,IAAI,CAAC7B,IAAI,CAACiF,IAAI,CAAC,MAAM,EAAE,EAAE;UACzCxC,OAAO,CAACd,KAAK,CAACe,SAAQ,GAAI,KAAK;UAC/BN,YAAY,CAACT,KAAI,GAAI;YACnBU,IAAI,EAAE,IAAI;YACVC,OAAO,EAAE,mCAAmC;YAC5CC,IAAI,EAAE,OAAO;YACbC,OAAO,EAAEY,UAAU,CAAC,MAAM;cACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;YACjC,CAAC,EAAE,IAAI;UACT,CAAC;UACD;QACF;QAEA,IAAI,CAACR,IAAI,CAACP,KAAI,IAAK6E,KAAK,CAACtE,IAAI,CAACP,KAAK,KAAKO,IAAI,CAACP,KAAI,IAAK,CAAC,EAAE;UACvDmB,OAAO,CAACd,KAAK,CAACe,SAAQ,GAAI,KAAK;UAC/BN,YAAY,CAACT,KAAI,GAAI;YACnBU,IAAI,EAAE,IAAI;YACVC,OAAO,EAAE,6CAA6C;YACtDC,IAAI,EAAE,OAAO;YACbC,OAAO,EAAEY,UAAU,CAAC,MAAM;cACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;YACjC,CAAC,EAAE,IAAI;UACT,CAAC;UACD;QACF;;QAEA;QACA,MAAMyD,KAAI,GAAI/E,cAAc,CAACY,KAAK,CAACoE,SAAS,CAACC,CAAA,IAAKA,CAAC,CAAC7F,EAAC,KAAM0B,IAAI,CAAC1B,EAAE,CAAC;QACnE,IAAI2F,KAAI,KAAM,CAAC,CAAC,EAAE;UAChB/E,cAAc,CAACY,KAAK,CAACmE,KAAK,IAAI;YAAE,GAAGjE;UAAK,CAAC;QAC3C,OAAO;UACLd,cAAc,CAACY,KAAK,CAACyE,IAAI,CAAC;YAAE,GAAGvE;UAAK,CAAC,CAAC;QACxC;;QAEA;QACA,MAAMhC,YAAY,CAACgC,IAAI,CAAC;;QAExB;QACA,IAAI;UACF,MAAMqD,UAAS,GAAI,MAAM7B,eAAe,CAACxB,IAAI,EAAE,gBAAgB,CAAC;UAChE,IAAI,CAACqD,UAAU,CAACd,OAAO,EAAE;YACvBnB,OAAO,CAACC,KAAK,CAAC,0CAA0C,EAAEgC,UAAU,CAAC5C,OAAO,CAAC;YAC7EG,OAAO,CAACd,KAAK,CAACe,SAAQ,GAAI,KAAK;YAC/BN,YAAY,CAACT,KAAI,GAAI;cACnBU,IAAI,EAAE,IAAI;cACVC,OAAO,EAAE,6EAA6E;cACtFC,IAAI,EAAE,SAAS;cACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;gBACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;cACjC,CAAC,EAAE,IAAI;YACT,CAAC;YACD;UACF;QACF,EAAE,OAAO8C,SAAS,EAAE;UAClBlC,OAAO,CAACC,KAAK,CAAC,0CAA0C,EAAEiC,SAAS,CAAC;UACpE1C,OAAO,CAACd,KAAK,CAACe,SAAQ,GAAI,KAAK;UAC/BN,YAAY,CAACT,KAAI,GAAI;YACnBU,IAAI,EAAE,IAAI;YACVC,OAAO,EAAE,6EAA6E;YACtFC,IAAI,EAAE,SAAS;YACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;cACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;YACjC,CAAC,EAAE,IAAI;UACT,CAAC;UACD;QACF;;QAEA;QACAI,OAAO,CAACd,KAAK,CAACe,SAAQ,GAAI,KAAK;QAE/BN,YAAY,CAACT,KAAI,GAAI;UACnBU,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE,0BAA0B;UACnCC,IAAI,EAAE,SAAS;UACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;YACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;UACjC,CAAC,EAAE,IAAI;QACT,CAAC;;QAED;QACAgE,kBAAkB,CAAC,CAAC;QACpBlF,iBAAiB,CAACQ,KAAI,GAAI,KAAK;MACjC,EAAE,OAAOuB,KAAK,EAAE;QACd;QACAT,OAAO,CAACd,KAAK,CAACe,SAAQ,GAAI,KAAK;QAE/BO,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9Cd,YAAY,CAACT,KAAI,GAAI;UACnBU,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE,0BAA0B;UACnCC,IAAI,EAAE,OAAO;UACbC,OAAO,EAAEY,UAAU,CAAC,MAAM;YACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;UACjC,CAAC,EAAE,IAAI;QACT,CAAC;MACH;IACF,CAAC;;IAED;IACA,MAAMiE,uBAAsB,GAAIA,CAAA,KAAM;MACpCrE,qBAAqB,CAACN,KAAI,GAAI,CAACM,qBAAqB,CAACN,KAAK;IAC5D,CAAC;IAED,MAAM4E,YAAW,GAAK/E,QAAQ,IAAK;MACjCyB,OAAO,CAACE,GAAG,CAAC,mBAAmB,EAAE3B,QAAQ,CAAC;IAC5C,CAAC;IAED,MAAMgF,cAAa,GAAI,MAAOhF,QAAQ,IAAK;MACzC,IAAI;QACF,IAAIY,YAAY,CAACT,KAAK,CAACa,OAAO,EAAE;UAC9BwC,YAAY,CAAC5C,YAAY,CAACT,KAAK,CAACa,OAAO,CAAC;QAC1C;QAEA,IAAIiE,OAAO,CAAC,yCAAyCjF,QAAQ,CAACxB,IAAI,GAAG,CAAC,EAAE;UACtE;UACAgC,UAAU,CAACL,KAAI,GAAIK,UAAU,CAACL,KAAK,CAACD,MAAM,CAACgF,CAAA,IAAKA,CAAC,CAACvG,EAAC,KAAMqB,QAAQ,CAACrB,EAAE,CAAC;;UAErE;UACA,MAAML,cAAc,CAAC0B,QAAQ,CAACrB,EAAE,CAAC;;UAEjC;UACA,IAAI;YACF,MAAM+E,UAAS,GAAI,MAAM7B,eAAe,CAAC;cAAEsD,UAAU,EAAEnF,QAAQ,CAACrB;YAAG,CAAC,EAAE,iBAAiB,CAAC;YACxF,IAAI,CAAC+E,UAAU,CAACd,OAAO,EAAE;cACvBnB,OAAO,CAACC,KAAK,CAAC,gDAAgD,EAAEgC,UAAU,CAAC5C,OAAO,CAAC;cACnFF,YAAY,CAACT,KAAI,GAAI;gBACnBU,IAAI,EAAE,IAAI;gBACVC,OAAO,EAAE,mFAAmF;gBAC5FC,IAAI,EAAE,SAAS;gBACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;kBACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;gBACjC,CAAC,EAAE,IAAI;cACT,CAAC;YACH,OAAO;cACLD,YAAY,CAACT,KAAI,GAAI;gBACnBU,IAAI,EAAE,IAAI;gBACVC,OAAO,EAAE,gCAAgC;gBACzCC,IAAI,EAAE,SAAS;gBACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;kBACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;gBACjC,CAAC,EAAE,IAAI;cACT,CAAC;YACH;UACF,EAAE,OAAO8C,SAAS,EAAE;YAClBlC,OAAO,CAACC,KAAK,CAAC,gDAAgD,EAAEiC,SAAS,CAAC;YAC1E/C,YAAY,CAACT,KAAI,GAAI;cACnBU,IAAI,EAAE,IAAI;cACVC,OAAO,EAAE,mFAAmF;cAC5FC,IAAI,EAAE,SAAS;cACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;gBACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;cACjC,CAAC,EAAE,IAAI;YACT,CAAC;UACH;QACF;MACF,EAAE,OAAOa,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;QACpDd,YAAY,CAACT,KAAI,GAAI;UACnBU,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE,gCAAgC;UACzCC,IAAI,EAAE,OAAO;UACbC,OAAO,EAAEY,UAAU,CAAC,MAAM;YACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;UACjC,CAAC,EAAE,IAAI;QACT,CAAC;MACH;IACF,CAAC;IAED,MAAMuE,eAAc,GAAI,MAAAA,CAAA,KAAY;MAClC,IAAI;QACF,IAAIxE,YAAY,CAACT,KAAK,CAACa,OAAO,EAAE;UAC9BwC,YAAY,CAAC5C,YAAY,CAACT,KAAK,CAACa,OAAO,CAAC;QAC1C;;QAEA;QACAC,OAAO,CAACd,KAAK,CAACK,UAAS,GAAI,IAAI;;QAE/B;QACA,IAAI,CAACE,WAAW,CAACP,KAAK,CAAC3B,IAAG,IAAKkC,WAAW,CAACP,KAAK,CAAC3B,IAAI,CAACiF,IAAI,CAAC,MAAM,EAAE,EAAE;UACnExC,OAAO,CAACd,KAAK,CAACK,UAAS,GAAI,KAAK;UAChCI,YAAY,CAACT,KAAI,GAAI;YACnBU,IAAI,EAAE,IAAI;YACVC,OAAO,EAAE,0CAA0C;YACnDC,IAAI,EAAE,OAAO;YACbC,OAAO,EAAEY,UAAU,CAAC,MAAM;cACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;YACjC,CAAC,EAAE,IAAI;UACT,CAAC;UACD;QACF;;QAEA;QACA,MAAMwE,iBAAgB,GAAI;UACxB,GAAG3E,WAAW,CAACP,KAAK;UACpBxB,EAAE,EAAE,YAAYwD,IAAI,CAACG,GAAG,CAAC,CAAC,IAAIC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;UAC1EpB,UAAU,EAAE;QACd,CAAC;;QAED;QACAd,UAAU,CAACL,KAAK,CAACyE,IAAI,CAACS,iBAAiB,CAAC;;QAExC;QACA,MAAMhH,YAAY,CAAC;UACjB,GAAGgH,iBAAiB;UACpB/D,UAAU,EAAE;QACd,CAAC,CAAC;;QAEF;QACA,IAAI;UACF,MAAMoC,UAAS,GAAI,MAAM7B,eAAe,CAACwD,iBAAiB,EAAE,iBAAiB,CAAC;UAC9E,IAAI,CAAC3B,UAAU,CAACd,OAAO,EAAE;YACvBnB,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAEgC,UAAU,CAAC5C,OAAO,CAAC;YACpEG,OAAO,CAACd,KAAK,CAACK,UAAS,GAAI,KAAK;YAChCI,YAAY,CAACT,KAAI,GAAI;cACnBU,IAAI,EAAE,IAAI;cACVC,OAAO,EAAE,kFAAkF;cAC3FC,IAAI,EAAE,SAAS;cACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;gBACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;cACjC,CAAC,EAAE,IAAI;YACT,CAAC;YACD;UACF;QACF,EAAE,OAAO8C,SAAS,EAAE;UAClBlC,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAEiC,SAAS,CAAC;UAC3D1C,OAAO,CAACd,KAAK,CAACK,UAAS,GAAI,KAAK;UAChCI,YAAY,CAACT,KAAI,GAAI;YACnBU,IAAI,EAAE,IAAI;YACVC,OAAO,EAAE,kFAAkF;YAC3FC,IAAI,EAAE,SAAS;YACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;cACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;YACjC,CAAC,EAAE,IAAI;UACT,CAAC;UACD;QACF;;QAEA;QACAI,OAAO,CAACd,KAAK,CAACK,UAAS,GAAI,KAAK;QAEhCI,YAAY,CAACT,KAAI,GAAI;UACnBU,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE,+BAA+B;UACxCC,IAAI,EAAE,SAAS;UACfC,OAAO,EAAEY,UAAU,CAAC,MAAM;YACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;UACjC,CAAC,EAAE,IAAI;QACT,CAAC;;QAED;QACAyE,iBAAiB,CAAC,CAAC;QACnB3E,mBAAmB,CAACR,KAAI,GAAI,KAAK;MACnC,EAAE,OAAOuB,KAAK,EAAE;QACd;QACAT,OAAO,CAACd,KAAK,CAACK,UAAS,GAAI,KAAK;QAEhCiB,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;QACnDd,YAAY,CAACT,KAAI,GAAI;UACnBU,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE,+BAA+B;UACxCC,IAAI,EAAE,OAAO;UACbC,OAAO,EAAEY,UAAU,CAAC,MAAM;YACxBhB,YAAY,CAACT,KAAK,CAACU,IAAG,GAAI,KAAK;UACjC,CAAC,EAAE,IAAI;QACT,CAAC;MACH;IACF,CAAC;IAED,MAAMyE,iBAAgB,GAAIA,CAAA,KAAM;MAC9B5E,WAAW,CAACP,KAAI,GAAI;QAClB3B,IAAI,EAAE,EAAE;QACRI,WAAW,EAAE;MACf,CAAC;IACH,CAAC;IAED,MAAM2G,eAAc,GAAKJ,UAAU,IAAK;MACtC,MAAMnF,QAAO,GAAIQ,UAAU,CAACL,KAAK,CAACqF,IAAI,CAACN,CAAA,IAAKA,CAAC,CAACvG,EAAC,KAAMwG,UAAU,CAAC;MAChE,OAAOnF,QAAO,GAAIA,QAAQ,CAACxB,IAAG,GAAI,eAAe;IACnD,CAAC;IAED,MAAMiH,iBAAgB,GAAK1C,KAAK,IAAK;MACnC,MAAMC,IAAG,GAAID,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAClC,IAAIF,IAAI,EAAE;QACR,MAAMG,MAAK,GAAI,IAAIC,UAAU,CAAC,CAAC;QAC/BD,MAAM,CAACE,MAAK,GAAKC,CAAC,IAAK;UACrBzD,WAAW,CAACM,KAAK,CAACuF,KAAI,GAAIpC,CAAC,CAACL,MAAM,CAACN,MAAM;QAC3C,CAAC;QACDQ,MAAM,CAACI,aAAa,CAACP,IAAI,CAAC;MAC5B;IACF,CAAC;IAED,MAAM6B,kBAAiB,GAAIA,CAAA,KAAM;MAC/BhF,WAAW,CAACM,KAAI,GAAI;QAClBxB,EAAE,EAAE,EAAE;QACNH,IAAI,EAAE,EAAE;QACRI,WAAW,EAAE,EAAE;QACfkB,KAAK,EAAE,CAAC;QACRC,iBAAiB,EAAE,CAAC;QACpBC,QAAQ,EAAE;MACZ,CAAC;IACH,CAAC;IAED,OAAO;MACLtB,YAAY;MACZW,gBAAgB;MAChBwD,kBAAkB;MAClBC,YAAY;MACZ3E,gBAAgB;MAChByF,iBAAiB;MACjB5E,WAAW;MACXM,eAAe;MACfuE,iBAAiB;MACjBC,eAAe;MACfC,kBAAkB;MAClBC,eAAe;MACfC,gBAAgB;MAChB1E,cAAc;MACdC,eAAe;MACfC,cAAc;MACdC,oBAAoB;MACpBwE,sBAAsB;MACtBC,iBAAiB;MACjBM,sBAAsB;MACtBxE,sBAAsB;MACtBO,UAAU;MACVC,qBAAqB;MACrBqE,uBAAuB;MACvBC,YAAY;MACZC,cAAc;MACdtE,WAAW;MACXC,mBAAmB;MACnByE,eAAe;MACfE,iBAAiB;MACjB1E,YAAY;MACZK,OAAO;MACPtB,iBAAiB;MACjBC,WAAW;MACXC,WAAW;MACX4F,iBAAiB;MACjBZ,kBAAkB;MAClBU;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}