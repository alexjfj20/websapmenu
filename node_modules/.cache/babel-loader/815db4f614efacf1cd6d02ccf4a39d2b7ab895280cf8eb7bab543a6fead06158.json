{"ast":null,"code":"import { ref } from 'vue';\nexport default {\n  name: 'DeletePlatoButton',\n  props: {\n    platoId: {\n      type: String,\n      required: true\n    },\n    platoName: {\n      type: String,\n      default: 'este plato'\n    }\n  },\n  emits: ['deleted', 'error'],\n  setup(props, {\n    emit\n  }) {\n    const isDeleting = ref(false);\n    const confirmDelete = async () => {\n      if (confirm(`¿Estás seguro de que deseas eliminar ${props.platoName}?`)) {\n        await deletePlato();\n      }\n    };\n    const deletePlato = async () => {\n      isDeleting.value = true;\n      try {\n        console.log(`Iniciando eliminación directa del plato ID: ${props.platoId}`);\n\n        // Usar fetch directamente para eliminar el plato\n        const response = await fetch('http://localhost:3000/api/sync/platos', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            id: props.platoId,\n            operation: 'delete'\n          })\n        });\n        console.log(`Respuesta del servidor: ${response.status}`);\n        if (response.ok) {\n          const data = await response.json();\n          console.log('Respuesta del servidor:', data);\n\n          // Notificar que el plato fue eliminado\n          emit('deleted', props.platoId);\n\n          // Mostrar mensaje de éxito\n          alert(`El plato \"${props.platoName}\" ha sido eliminado correctamente.`);\n        } else {\n          // Si hay un error, intentar eliminar directamente con el script\n          console.error(`Error al eliminar plato: ${response.status}`);\n          const errorText = await response.text();\n          console.error('Detalles del error:', errorText);\n\n          // Notificar el error\n          emit('error', {\n            id: props.platoId,\n            status: response.status,\n            message: errorText\n          });\n\n          // Sugerir usar el script directo\n          alert(`Error al eliminar el plato. Por favor, utiliza el script directo:\\n\\nnode delete-plato.js ${props.platoId}`);\n        }\n      } catch (error) {\n        console.error('Error al eliminar plato:', error);\n\n        // Notificar el error\n        emit('error', {\n          id: props.platoId,\n          message: error.message\n        });\n\n        // Sugerir usar el script directo\n        alert(`Error al eliminar el plato: ${error.message}\\n\\nPor favor, utiliza el script directo:\\n\\nnode delete-plato.js ${props.platoId}`);\n      } finally {\n        isDeleting.value = false;\n      }\n    };\n    return {\n      isDeleting,\n      confirmDelete\n    };\n  }\n};","map":{"version":3,"names":["ref","name","props","platoId","type","String","required","platoName","default","emits","setup","emit","isDeleting","confirmDelete","confirm","deletePlato","value","console","log","response","fetch","method","headers","body","JSON","stringify","id","operation","status","ok","data","json","alert","error","errorText","text","message"],"sources":["F:\\Driver google\\VUE.JS-2\\temp\\websap\\src\\components\\DeletePlatoButton.vue"],"sourcesContent":["// src/components/DeletePlatoButton.vue\n\n<template>\n  <button \n    @click=\"confirmDelete\" \n    class=\"delete-button\"\n    :disabled=\"isDeleting\"\n  >\n    {{ isDeleting ? 'Eliminando...' : 'Eliminar' }}\n  </button>\n</template>\n\n<script>\nimport { ref } from 'vue';\n\nexport default {\n  name: 'DeletePlatoButton',\n  \n  props: {\n    platoId: {\n      type: String,\n      required: true\n    },\n    platoName: {\n      type: String,\n      default: 'este plato'\n    }\n  },\n  \n  emits: ['deleted', 'error'],\n  \n  setup(props, { emit }) {\n    const isDeleting = ref(false);\n    \n    const confirmDelete = async () => {\n      if (confirm(`¿Estás seguro de que deseas eliminar ${props.platoName}?`)) {\n        await deletePlato();\n      }\n    };\n    \n    const deletePlato = async () => {\n      isDeleting.value = true;\n      \n      try {\n        console.log(`Iniciando eliminación directa del plato ID: ${props.platoId}`);\n        \n        // Usar fetch directamente para eliminar el plato\n        const response = await fetch('http://localhost:3000/api/sync/platos', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            id: props.platoId,\n            operation: 'delete'\n          })\n        });\n        \n        console.log(`Respuesta del servidor: ${response.status}`);\n        \n        if (response.ok) {\n          const data = await response.json();\n          console.log('Respuesta del servidor:', data);\n          \n          // Notificar que el plato fue eliminado\n          emit('deleted', props.platoId);\n          \n          // Mostrar mensaje de éxito\n          alert(`El plato \"${props.platoName}\" ha sido eliminado correctamente.`);\n        } else {\n          // Si hay un error, intentar eliminar directamente con el script\n          console.error(`Error al eliminar plato: ${response.status}`);\n          const errorText = await response.text();\n          console.error('Detalles del error:', errorText);\n          \n          // Notificar el error\n          emit('error', {\n            id: props.platoId,\n            status: response.status,\n            message: errorText\n          });\n          \n          // Sugerir usar el script directo\n          alert(`Error al eliminar el plato. Por favor, utiliza el script directo:\\n\\nnode delete-plato.js ${props.platoId}`);\n        }\n      } catch (error) {\n        console.error('Error al eliminar plato:', error);\n        \n        // Notificar el error\n        emit('error', {\n          id: props.platoId,\n          message: error.message\n        });\n        \n        // Sugerir usar el script directo\n        alert(`Error al eliminar el plato: ${error.message}\\n\\nPor favor, utiliza el script directo:\\n\\nnode delete-plato.js ${props.platoId}`);\n      } finally {\n        isDeleting.value = false;\n      }\n    };\n    \n    return {\n      isDeleting,\n      confirmDelete\n    };\n  }\n};\n</script>\n\n<style scoped>\n.delete-button {\n  background-color: #dc3545;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  padding: 6px 12px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\n.delete-button:hover {\n  background-color: #c82333;\n}\n\n.delete-button:disabled {\n  background-color: #6c757d;\n  cursor: not-allowed;\n}\n</style>\n"],"mappings":"AAaA,SAASA,GAAE,QAAS,KAAK;AAEzB,eAAe;EACbC,IAAI,EAAE,mBAAmB;EAEzBC,KAAK,EAAE;IACLC,OAAO,EAAE;MACPC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ,CAAC;IACDC,SAAS,EAAE;MACTH,IAAI,EAAEC,MAAM;MACZG,OAAO,EAAE;IACX;EACF,CAAC;EAEDC,KAAK,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC;EAE3BC,KAAKA,CAACR,KAAK,EAAE;IAAES;EAAK,CAAC,EAAE;IACrB,MAAMC,UAAS,GAAIZ,GAAG,CAAC,KAAK,CAAC;IAE7B,MAAMa,aAAY,GAAI,MAAAA,CAAA,KAAY;MAChC,IAAIC,OAAO,CAAC,wCAAwCZ,KAAK,CAACK,SAAS,GAAG,CAAC,EAAE;QACvE,MAAMQ,WAAW,CAAC,CAAC;MACrB;IACF,CAAC;IAED,MAAMA,WAAU,GAAI,MAAAA,CAAA,KAAY;MAC9BH,UAAU,CAACI,KAAI,GAAI,IAAI;MAEvB,IAAI;QACFC,OAAO,CAACC,GAAG,CAAC,+CAA+ChB,KAAK,CAACC,OAAO,EAAE,CAAC;;QAE3E;QACA,MAAMgB,QAAO,GAAI,MAAMC,KAAK,CAAC,uCAAuC,EAAE;UACpEC,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YACnBC,EAAE,EAAExB,KAAK,CAACC,OAAO;YACjBwB,SAAS,EAAE;UACb,CAAC;QACH,CAAC,CAAC;QAEFV,OAAO,CAACC,GAAG,CAAC,2BAA2BC,QAAQ,CAACS,MAAM,EAAE,CAAC;QAEzD,IAAIT,QAAQ,CAACU,EAAE,EAAE;UACf,MAAMC,IAAG,GAAI,MAAMX,QAAQ,CAACY,IAAI,CAAC,CAAC;UAClCd,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEY,IAAI,CAAC;;UAE5C;UACAnB,IAAI,CAAC,SAAS,EAAET,KAAK,CAACC,OAAO,CAAC;;UAE9B;UACA6B,KAAK,CAAC,aAAa9B,KAAK,CAACK,SAAS,oCAAoC,CAAC;QACzE,OAAO;UACL;UACAU,OAAO,CAACgB,KAAK,CAAC,4BAA4Bd,QAAQ,CAACS,MAAM,EAAE,CAAC;UAC5D,MAAMM,SAAQ,GAAI,MAAMf,QAAQ,CAACgB,IAAI,CAAC,CAAC;UACvClB,OAAO,CAACgB,KAAK,CAAC,qBAAqB,EAAEC,SAAS,CAAC;;UAE/C;UACAvB,IAAI,CAAC,OAAO,EAAE;YACZe,EAAE,EAAExB,KAAK,CAACC,OAAO;YACjByB,MAAM,EAAET,QAAQ,CAACS,MAAM;YACvBQ,OAAO,EAAEF;UACX,CAAC,CAAC;;UAEF;UACAF,KAAK,CAAC,6FAA6F9B,KAAK,CAACC,OAAO,EAAE,CAAC;QACrH;MACF,EAAE,OAAO8B,KAAK,EAAE;QACdhB,OAAO,CAACgB,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;;QAEhD;QACAtB,IAAI,CAAC,OAAO,EAAE;UACZe,EAAE,EAAExB,KAAK,CAACC,OAAO;UACjBiC,OAAO,EAAEH,KAAK,CAACG;QACjB,CAAC,CAAC;;QAEF;QACAJ,KAAK,CAAC,+BAA+BC,KAAK,CAACG,OAAO,qEAAqElC,KAAK,CAACC,OAAO,EAAE,CAAC;MACzI,UAAU;QACRS,UAAU,CAACI,KAAI,GAAI,KAAK;MAC1B;IACF,CAAC;IAED,OAAO;MACLJ,UAAU;MACVC;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}