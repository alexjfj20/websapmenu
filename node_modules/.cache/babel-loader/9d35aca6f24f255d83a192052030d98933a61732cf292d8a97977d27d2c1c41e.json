{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, withModifiers as _withModifiers, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login-container\"\n};\nconst _hoisted_2 = {\n  class: \"login-card\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"error-message\"\n};\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = [\"disabled\"];\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = [\"disabled\"];\nconst _hoisted_8 = [\"disabled\"];\nconst _hoisted_9 = {\n  key: 0,\n  class: \"loading-spinner\"\n};\nconst _hoisted_10 = {\n  class: \"login-options\"\n};\nconst _hoisted_11 = {\n  class: \"register-option\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[8] || (_cache[8] = _createElementVNode(\"h1\", null, \"Iniciar Sesión\", -1 /* HOISTED */)), $setup.errorMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _toDisplayString($setup.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $setup.handleLogin && $setup.handleLogin(...args), [\"prevent\"])),\n    class: \"login-form\"\n  }, [_createElementVNode(\"div\", _hoisted_4, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n    for: \"email\"\n  }, \"Correo Electrónico:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.credentials.email = $event),\n    required: \"\",\n    placeholder: \"ejemplo@correo.com\",\n    disabled: $setup.loading\n  }, null, 8 /* PROPS */, _hoisted_5), [[_vModelText, $setup.credentials.email]])]), _createElementVNode(\"div\", _hoisted_6, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    for: \"password\"\n  }, \"Contraseña:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.credentials.password = $event),\n    required: \"\",\n    placeholder: \"Ingresa tu contraseña\",\n    disabled: $setup.loading\n  }, null, 8 /* PROPS */, _hoisted_7), [[_vModelText, $setup.credentials.password]])]), _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"login-button\",\n    disabled: $setup.loading\n  }, [$setup.loading ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9)) : _createCommentVNode(\"v-if\", true), _createTextVNode(\" \" + _toDisplayString($setup.loading ? 'Iniciando sesión...' : 'Iniciar Sesión'), 1 /* TEXT */)], 8 /* PROPS */, _hoisted_8)], 32 /* NEED_HYDRATION */), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[3] || (_cache[3] = _withModifiers((...args) => $setup.handleForgotPassword && $setup.handleForgotPassword(...args), [\"prevent\"])),\n    class: \"forgot-password-link\"\n  }, \" ¿Olvidaste tu contraseña? \"), _createElementVNode(\"div\", _hoisted_11, [_cache[7] || (_cache[7] = _createTextVNode(\" ¿No tienes una cuenta? \")), _createVNode(_component_router_link, {\n    to: \"/register\",\n    class: \"register-link\"\n  }, {\n    default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\" Regístrate aquí \")])),\n    _: 1 /* STABLE */\n  })])])])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","$setup","errorMessage","_hoisted_3","_toDisplayString","_createCommentVNode","onSubmit","_cache","_withModifiers","args","handleLogin","_hoisted_4","for","type","id","$event","credentials","email","required","placeholder","disabled","loading","_hoisted_5","_hoisted_6","password","_hoisted_7","_hoisted_9","_createTextVNode","_hoisted_8","_hoisted_10","href","onClick","handleForgotPassword","_hoisted_11","_createVNode","_component_router_link","to","default","_withCtx","_"],"sources":["F:\\Driver google\\VUE.JS-2\\temp\\websap\\src\\views\\LoginView.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-container\">\r\n    <div class=\"login-card\">\r\n      <h1>Iniciar Sesión</h1>\r\n      \r\n      <div v-if=\"errorMessage\" class=\"error-message\">\r\n        {{ errorMessage }}\r\n      </div>\r\n      \r\n      <form @submit.prevent=\"handleLogin\" class=\"login-form\">\r\n        <div class=\"form-group\">\r\n          <label for=\"email\">Correo Electrónico:</label>\r\n          <input \r\n            type=\"email\" \r\n            id=\"email\" \r\n            v-model=\"credentials.email\" \r\n            required \r\n            placeholder=\"ejemplo@correo.com\"\r\n            :disabled=\"loading\"\r\n          />\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label for=\"password\">Contraseña:</label>\r\n          <input \r\n            type=\"password\" \r\n            id=\"password\" \r\n            v-model=\"credentials.password\" \r\n            required\r\n            placeholder=\"Ingresa tu contraseña\" \r\n            :disabled=\"loading\"\r\n          />\r\n        </div>\r\n        \r\n        <button \r\n          type=\"submit\" \r\n          class=\"login-button\" \r\n          :disabled=\"loading\"\r\n        >\r\n          <span v-if=\"loading\" class=\"loading-spinner\"></span>\r\n          {{ loading ? 'Iniciando sesión...' : 'Iniciar Sesión' }}\r\n        </button>\r\n      </form>\r\n      \r\n      <div class=\"login-options\">\r\n        <a href=\"#\" @click.prevent=\"handleForgotPassword\" class=\"forgot-password-link\">\r\n          ¿Olvidaste tu contraseña?\r\n        </a>\r\n        \r\n        <div class=\"register-option\">\r\n          ¿No tienes una cuenta? \r\n          <router-link to=\"/register\" class=\"register-link\">\r\n            Regístrate aquí\r\n          </router-link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { alert } from '../services/dialogService';\r\nimport apiService from '../services/apiService';\r\n\r\nexport default {\r\n  name: 'LoginView',\r\n  setup() {\r\n    const router = useRouter();\r\n    const loading = ref(false);\r\n    const errorMessage = ref('');\r\n    \r\n    const credentials = reactive({\r\n      email: '',\r\n      password: ''\r\n    });\r\n    \r\n    async function handleLogin() {\r\n      try {\r\n        loading.value = true;\r\n        errorMessage.value = '';\r\n        \r\n        const response = await apiService.post('/auth/login', credentials);\r\n        \r\n        if (response.success && response.data) {\r\n          // Guardar token\r\n          apiService.setToken(response.data.token);\r\n          \r\n          // Guardar estado de sesión\r\n          localStorage.setItem('isLoggedIn', 'true');\r\n          localStorage.setItem('currentUser', JSON.stringify({\r\n            id: response.data.id,\r\n            nombre: response.data.nombre,\r\n            email: response.data.email,\r\n            roles: response.data.roles || []\r\n          }));\r\n          \r\n          // Verificar si el usuario tiene el rol de superadmin\r\n          if (response.data.roles && response.data.roles.includes('Superadministrador')) {\r\n            router.push('/superadmin');\r\n          } else {\r\n            router.push('/menu'); // Redireccionar al menú normal para otros usuarios\r\n          }\r\n        } else {\r\n          throw new Error('Error en la autenticación');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error de login:', error);\r\n        errorMessage.value = error.message || 'Error al iniciar sesión. Verifica tus credenciales.';\r\n        \r\n        await alert('Error al iniciar sesión. Verifica tus credenciales.', {\r\n          title: 'Error de autenticación'\r\n        });\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    }\r\n    \r\n    async function handleForgotPassword() {\r\n      await alert('Por favor, contacta al administrador del sistema para restablecer tu contraseña.', {\r\n        title: 'Recuperación de contraseña'\r\n      });\r\n    }\r\n    \r\n    return {\r\n      credentials,\r\n      loading,\r\n      errorMessage,\r\n      handleLogin,\r\n      handleForgotPassword\r\n    };\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n  min-height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: #f5f5f5;\r\n  padding: 20px;\r\n}\r\n\r\n.login-card {\r\n  background-color: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);\r\n  padding: 30px;\r\n  width: 100%;\r\n  max-width: 400px;\r\n}\r\n\r\nh1 {\r\n  margin-bottom: 24px;\r\n  color: #2c3e50;\r\n  text-align: center;\r\n}\r\n\r\n.login-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\nlabel {\r\n  font-weight: 500;\r\n  color: #4a5568;\r\n  font-size: 14px;\r\n}\r\n\r\ninput {\r\n  padding: 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 16px;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:focus {\r\n  border-color: #4CAF50;\r\n  outline: none;\r\n  box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.25);\r\n}\r\n\r\n.login-button {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  padding: 12px;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n  margin-top: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.login-button:hover:not(:disabled) {\r\n  background-color: #45a049;\r\n}\r\n\r\n.login-button:disabled {\r\n  background-color: #cccccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.loading-spinner {\r\n  display: inline-block;\r\n  width: 16px;\r\n  height: 16px;\r\n  border: 2px solid rgba(255,255,255,0.3);\r\n  border-radius: 50%;\r\n  border-top-color: white;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.login-options {\r\n  margin-top: 24px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n  text-align: center;\r\n}\r\n\r\n.forgot-password-link, .register-link {\r\n  color: #4CAF50;\r\n  text-decoration: none;\r\n}\r\n\r\n.forgot-password-link:hover, .register-link:hover {\r\n  text-decoration: underline;\r\n}\r\n\r\n.register-option {\r\n  color: #666;\r\n  margin-top: 8px;\r\n}\r\n\r\n.error-message {\r\n  background-color: #ffebee;\r\n  color: #d32f2f;\r\n  padding: 12px;\r\n  border-radius: 4px;\r\n  margin-bottom: 20px;\r\n  font-size: 14px;\r\n  text-align: center;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}