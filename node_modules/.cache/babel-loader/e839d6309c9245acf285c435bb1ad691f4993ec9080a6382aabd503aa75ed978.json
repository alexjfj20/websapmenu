{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"sync-business-info\"\n};\nconst _hoisted_2 = {\n  class: \"actions\"\n};\nconst _hoisted_3 = [\"disabled\"];\nconst _hoisted_4 = {\n  key: 0,\n  class: \"spinner-border spinner-border-sm\",\n  role: \"status\",\n  \"aria-hidden\": \"true\"\n};\nconst _hoisted_5 = [\"disabled\"];\nconst _hoisted_6 = {\n  key: 0,\n  class: \"spinner-border spinner-border-sm\",\n  role: \"status\",\n  \"aria-hidden\": \"true\"\n};\nconst _hoisted_7 = [\"disabled\"];\nconst _hoisted_8 = {\n  key: 0,\n  class: \"spinner-border spinner-border-sm\",\n  role: \"status\",\n  \"aria-hidden\": \"true\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"current-info\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[7] || (_cache[7] = _createElementVNode(\"h2\", null, \"Sincronización de Información del Negocio\", -1 /* HOISTED */)), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"alert\", {\n      'alert-success': $setup.success,\n      'alert-danger': !$setup.success && $setup.message\n    }])\n  }, _toDisplayString($setup.message), 3 /* TEXT, CLASS */), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.runMigration && $setup.runMigration(...args)),\n    class: \"btn btn-primary\",\n    disabled: $setup.loading\n  }, [$setup.loading ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4)) : _createCommentVNode(\"v-if\", true), _cache[3] || (_cache[3] = _createTextVNode(\" Ejecutar Migración \"))], 8 /* PROPS */, _hoisted_3), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $setup.syncBusinessInfo && $setup.syncBusinessInfo(...args)),\n    class: \"btn btn-success\",\n    disabled: $setup.loading\n  }, [$setup.loading ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6)) : _createCommentVNode(\"v-if\", true), _cache[4] || (_cache[4] = _createTextVNode(\" Sincronizar Información \"))], 8 /* PROPS */, _hoisted_5), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $setup.syncAll && $setup.syncAll(...args)),\n    class: \"btn btn-info\",\n    disabled: $setup.loading\n  }, [$setup.loading ? (_openBlock(), _createElementBlock(\"span\", _hoisted_8)) : _createCommentVNode(\"v-if\", true), _cache[5] || (_cache[5] = _createTextVNode(\" Sincronizar Todo \"))], 8 /* PROPS */, _hoisted_7)]), $setup.businessInfo ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_cache[6] || (_cache[6] = _createElementVNode(\"h3\", null, \"Información Actual\", -1 /* HOISTED */)), _createElementVNode(\"pre\", null, _toDisplayString(JSON.stringify($setup.businessInfo, null, 2)), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","role","_createElementBlock","_hoisted_1","_createElementVNode","_normalizeClass","$setup","success","message","_hoisted_2","onClick","_cache","args","runMigration","disabled","loading","_hoisted_4","_createCommentVNode","_createTextVNode","_hoisted_3","syncBusinessInfo","_hoisted_6","_hoisted_5","syncAll","_hoisted_8","_hoisted_7","businessInfo","_hoisted_9","_toDisplayString","JSON","stringify"],"sources":["F:\\Driver google\\VUE.JS-2\\VUE-JS\\websap\\src\\components\\admin\\SyncBusinessInfo.vue"],"sourcesContent":["<template>\n  <div class=\"sync-business-info\">\n    <h2>Sincronización de Información del Negocio</h2>\n    \n    <div class=\"alert\" :class=\"{ 'alert-success': success, 'alert-danger': !success && message }\">\n      {{ message }}\n    </div>\n    \n    <div class=\"actions\">\n      <button @click=\"runMigration\" class=\"btn btn-primary\" :disabled=\"loading\">\n        <span v-if=\"loading\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n        Ejecutar Migración\n      </button>\n      \n      <button @click=\"syncBusinessInfo\" class=\"btn btn-success\" :disabled=\"loading\">\n        <span v-if=\"loading\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n        Sincronizar Información\n      </button>\n      \n      <button @click=\"syncAll\" class=\"btn btn-info\" :disabled=\"loading\">\n        <span v-if=\"loading\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n        Sincronizar Todo\n      </button>\n    </div>\n    \n    <div class=\"current-info\" v-if=\"businessInfo\">\n      <h3>Información Actual</h3>\n      <pre>{{ JSON.stringify(businessInfo, null, 2) }}</pre>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue';\nimport { runAddInformacionPagoMigration, syncBusinessInfoWithBackend, syncAllBusinessInfo } from '../../utils/syncPaymentInfo';\nimport { getBusinessInfo } from '../../services/storageService';\n\nexport default {\n  name: 'SyncBusinessInfo',\n  \n  setup() {\n    const loading = ref(false);\n    const success = ref(false);\n    const message = ref('');\n    const businessInfo = ref(null);\n    \n    // Cargar la información del negocio al montar el componente\n    onMounted(async () => {\n      try {\n        businessInfo.value = await getBusinessInfo();\n      } catch (error) {\n        console.error('Error al cargar información del negocio:', error);\n        message.value = 'Error al cargar información del negocio';\n        success.value = false;\n      }\n    });\n    \n    // Ejecutar la migración para añadir la columna informacion_pago\n    const runMigration = async () => {\n      try {\n        loading.value = true;\n        message.value = 'Ejecutando migración...';\n        \n        const result = await runAddInformacionPagoMigration();\n        \n        success.value = result.success;\n        message.value = result.message;\n      } catch (error) {\n        console.error('Error al ejecutar migración:', error);\n        success.value = false;\n        message.value = error.message || 'Error al ejecutar migración';\n      } finally {\n        loading.value = false;\n      }\n    };\n    \n    // Sincronizar la información del negocio con el backend\n    const syncBusinessInfo = async () => {\n      try {\n        loading.value = true;\n        message.value = 'Sincronizando información...';\n        \n        const result = await syncBusinessInfoWithBackend();\n        \n        success.value = result.success;\n        message.value = result.message;\n        \n        // Actualizar la información del negocio\n        businessInfo.value = await getBusinessInfo();\n      } catch (error) {\n        console.error('Error al sincronizar información:', error);\n        success.value = false;\n        message.value = error.message || 'Error al sincronizar información';\n      } finally {\n        loading.value = false;\n      }\n    };\n    \n    // Ejecutar la migración y sincronizar la información\n    const syncAll = async () => {\n      try {\n        loading.value = true;\n        message.value = 'Sincronizando todo...';\n        \n        const result = await syncAllBusinessInfo();\n        \n        success.value = result.success;\n        message.value = result.message;\n        \n        // Actualizar la información del negocio\n        businessInfo.value = await getBusinessInfo();\n      } catch (error) {\n        console.error('Error al sincronizar todo:', error);\n        success.value = false;\n        message.value = error.message || 'Error al sincronizar todo';\n      } finally {\n        loading.value = false;\n      }\n    };\n    \n    return {\n      loading,\n      success,\n      message,\n      businessInfo,\n      runMigration,\n      syncBusinessInfo,\n      syncAll\n    };\n  }\n};\n</script>\n\n<style scoped>\n.sync-business-info {\n  padding: 20px;\n  background-color: #f8f9fa;\n  border-radius: 5px;\n  margin-bottom: 20px;\n}\n\n.alert {\n  padding: 10px;\n  margin: 10px 0;\n  border-radius: 5px;\n}\n\n.alert-success {\n  background-color: #d4edda;\n  color: #155724;\n  border: 1px solid #c3e6cb;\n}\n\n.alert-danger {\n  background-color: #f8d7da;\n  color: #721c24;\n  border: 1px solid #f5c6cb;\n}\n\n.actions {\n  display: flex;\n  gap: 10px;\n  margin: 20px 0;\n}\n\n.current-info {\n  margin-top: 20px;\n  background-color: #fff;\n  padding: 15px;\n  border-radius: 5px;\n  border: 1px solid #dee2e6;\n}\n\npre {\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  background-color: #f5f5f5;\n  padding: 10px;\n  border-radius: 5px;\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.btn {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: bold;\n}\n\n.btn-primary {\n  background-color: #007bff;\n  color: white;\n}\n\n.btn-success {\n  background-color: #28a745;\n  color: white;\n}\n\n.btn-info {\n  background-color: #17a2b8;\n  color: white;\n}\n\n.btn:disabled {\n  opacity: 0.65;\n  cursor: not-allowed;\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAoB;;EAOxBA,KAAK,EAAC;AAAS;mBARxB;;EAAAC,GAAA;EAU6BD,KAAK,EAAC,kCAAkC;EAACE,IAAI,EAAC,QAAQ;EAAC,aAAW,EAAC;;mBAVhG;;EAAAD,GAAA;EAe6BD,KAAK,EAAC,kCAAkC;EAACE,IAAI,EAAC,QAAQ;EAAC,aAAW,EAAC;;mBAfhG;;EAAAD,GAAA;EAoB6BD,KAAK,EAAC,kCAAkC;EAACE,IAAI,EAAC,QAAQ;EAAC,aAAW,EAAC;;;EApBhGD,GAAA;EAyBSD,KAAK,EAAC;;;uBAxBbG,mBAAA,CA4BM,OA5BNC,UA4BM,G,0BA3BJC,mBAAA,CAAkD,YAA9C,2CAAyC,sBAE7CA,mBAAA,CAEM;IAFDL,KAAK,EAJdM,eAAA,EAIe,OAAO;MAAA,iBAA4BC,MAAA,CAAAC,OAAO;MAAA,iBAAmBD,MAAA,CAAAC,OAAO,IAAID,MAAA,CAAAE;IAAO;sBACrFF,MAAA,CAAAE,OAAO,yBAGZJ,mBAAA,CAeM,OAfNK,UAeM,GAdJL,mBAAA,CAGS;IAHAM,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEN,MAAA,CAAAO,YAAA,IAAAP,MAAA,CAAAO,YAAA,IAAAD,IAAA,CAAY;IAAEb,KAAK,EAAC,iBAAiB;IAAEe,QAAQ,EAAER,MAAA,CAAAS;MACnDT,MAAA,CAAAS,OAAO,I,cAAnBb,mBAAA,CAAsG,QAAtGc,UAAsG,KAV9GC,mBAAA,gB,0BAAAC,gBAAA,CAU8G,sBAExG,G,iBAZNC,UAAA,GAcMf,mBAAA,CAGS;IAHAM,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEN,MAAA,CAAAc,gBAAA,IAAAd,MAAA,CAAAc,gBAAA,IAAAR,IAAA,CAAgB;IAAEb,KAAK,EAAC,iBAAiB;IAAEe,QAAQ,EAAER,MAAA,CAAAS;MACvDT,MAAA,CAAAS,OAAO,I,cAAnBb,mBAAA,CAAsG,QAAtGmB,UAAsG,KAf9GJ,mBAAA,gB,0BAAAC,gBAAA,CAe8G,2BAExG,G,iBAjBNI,UAAA,GAmBMlB,mBAAA,CAGS;IAHAM,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEN,MAAA,CAAAiB,OAAA,IAAAjB,MAAA,CAAAiB,OAAA,IAAAX,IAAA,CAAO;IAAEb,KAAK,EAAC,cAAc;IAAEe,QAAQ,EAAER,MAAA,CAAAS;MAC3CT,MAAA,CAAAS,OAAO,I,cAAnBb,mBAAA,CAAsG,QAAtGsB,UAAsG,KApB9GP,mBAAA,gB,0BAAAC,gBAAA,CAoB8G,oBAExG,G,iBAtBNO,UAAA,E,GAyBoCnB,MAAA,CAAAoB,YAAY,I,cAA5CxB,mBAAA,CAGM,OAHNyB,UAGM,G,0BAFJvB,mBAAA,CAA2B,YAAvB,oBAAkB,sBACtBA,mBAAA,CAAsD,aAAAwB,gBAAA,CAA9CC,IAAI,CAACC,SAAS,CAACxB,MAAA,CAAAoB,YAAY,2B,KA3BzCT,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}