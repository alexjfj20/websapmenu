{"ast":null,"code":"import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.confirmDelete && $setup.confirmDelete(...args)),\n    class: \"delete-button\",\n    disabled: $setup.isDeleting\n  }, _toDisplayString($setup.isDeleting ? 'Eliminando...' : 'Eliminar'), 9 /* TEXT, PROPS */, _hoisted_1);\n}","map":{"version":3,"names":["_createElementBlock","onClick","_cache","args","$setup","confirmDelete","class","disabled","isDeleting","_hoisted_1"],"sources":["F:\\Driver google\\VUE.JS-2\\temp\\websap\\src\\components\\DeletePlatoButton.vue"],"sourcesContent":["// src/components/DeletePlatoButton.vue\n\n<template>\n  <button \n    @click=\"confirmDelete\" \n    class=\"delete-button\"\n    :disabled=\"isDeleting\"\n  >\n    {{ isDeleting ? 'Eliminando...' : 'Eliminar' }}\n  </button>\n</template>\n\n<script>\nimport { ref } from 'vue';\n\nexport default {\n  name: 'DeletePlatoButton',\n  \n  props: {\n    platoId: {\n      type: String,\n      required: true\n    },\n    platoName: {\n      type: String,\n      default: 'este plato'\n    }\n  },\n  \n  emits: ['deleted', 'error'],\n  \n  setup(props, { emit }) {\n    const isDeleting = ref(false);\n    \n    const confirmDelete = async () => {\n      if (confirm(`¿Estás seguro de que deseas eliminar ${props.platoName}?`)) {\n        await deletePlato();\n      }\n    };\n    \n    const deletePlato = async () => {\n      isDeleting.value = true;\n      \n      try {\n        console.log(`Iniciando eliminación directa del plato ID: ${props.platoId}`);\n        \n        // Usar fetch directamente para eliminar el plato\n        const response = await fetch('http://localhost:3000/api/sync/platos', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            id: props.platoId,\n            operation: 'delete'\n          })\n        });\n        \n        console.log(`Respuesta del servidor: ${response.status}`);\n        \n        if (response.ok) {\n          const data = await response.json();\n          console.log('Respuesta del servidor:', data);\n          \n          // Notificar que el plato fue eliminado\n          emit('deleted', props.platoId);\n          \n          // Mostrar mensaje de éxito\n          alert(`El plato \"${props.platoName}\" ha sido eliminado correctamente.`);\n        } else {\n          // Si hay un error, intentar eliminar directamente con el script\n          console.error(`Error al eliminar plato: ${response.status}`);\n          const errorText = await response.text();\n          console.error('Detalles del error:', errorText);\n          \n          // Notificar el error\n          emit('error', {\n            id: props.platoId,\n            status: response.status,\n            message: errorText\n          });\n          \n          // Sugerir usar el script directo\n          alert(`Error al eliminar el plato. Por favor, utiliza el script directo:\\n\\nnode delete-plato.js ${props.platoId}`);\n        }\n      } catch (error) {\n        console.error('Error al eliminar plato:', error);\n        \n        // Notificar el error\n        emit('error', {\n          id: props.platoId,\n          message: error.message\n        });\n        \n        // Sugerir usar el script directo\n        alert(`Error al eliminar el plato: ${error.message}\\n\\nPor favor, utiliza el script directo:\\n\\nnode delete-plato.js ${props.platoId}`);\n      } finally {\n        isDeleting.value = false;\n      }\n    };\n    \n    return {\n      isDeleting,\n      confirmDelete\n    };\n  }\n};\n</script>\n\n<style scoped>\n.delete-button {\n  background-color: #dc3545;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  padding: 6px 12px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\n.delete-button:hover {\n  background-color: #c82333;\n}\n\n.delete-button:disabled {\n  background-color: #6c757d;\n  cursor: not-allowed;\n}\n</style>\n"],"mappings":";mBAAA;;uBAGEA,mBAAA,CAMS;IALNC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,MAAA,CAAAC,aAAA,IAAAD,MAAA,CAAAC,aAAA,IAAAF,IAAA,CAAa;IACrBG,KAAK,EAAC,eAAe;IACpBC,QAAQ,EAAEH,MAAA,CAAAI;sBAERJ,MAAA,CAAAI,UAAU,uDARjBC,UAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}